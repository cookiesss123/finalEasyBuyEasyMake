import{d as B}from"./index-fc788f37.js";import{c as f,r as s,d as t,s as h,e as p,o as c,b as d,a as n}from"./carts-e36b449b.js";import{l as $}from"./loadingStore-8666b706.js";const a=$(),k=f(),L=B("bookmark",{state:()=>({recipeBookmarks:[],productBookmarks:[],uid:"",user:{},recipeBookmark:{},productBookmark:{}}),actions:{addBookmark(o,e){if(!this.uid){k.toastMessage("登入才可使用收藏功能","error");return}const r=s(t,`${o}/${this.uid}/${e.id}`);h(r,e),k.toastMessage("收藏成功")},deleteBookmark(o,e){p(s(t,`${o}/${this.uid}/${e}`)),k.toastMessage("已刪除收藏")},getBookmarks(o){c(n,e=>{if(e){this.uid=e.uid;const r=s(t,`${o}/${this.uid}`);d(r,i=>{o==="recipeBookmarks"?this.recipeBookmarks=i.val():o==="productBookmarks"&&(this.productBookmarks=i.val()),a.endLoading()})}else this.uid=null,a.endLoading()})},getBookmark(o,e){c(n,r=>{if(r){this.uid=r.uid;const i=s(t,"users/"+r.uid);d(i,l=>{this.user=l.val();const m=s(t,`${o}/${this.uid}/${e}`);d(m,u=>{o==="recipeBookmarks"?this.recipeBookmark=u.val():o==="productBookmarks"&&(this.productBookmark=u.val()),a.endLoading()})})}else this.uid=null,this.user={},o==="recipeBookmarks"?this.recipeBookmark=null:o==="productBookmarks"&&(this.productBookmark=null),a.endLoading()})}}});export{L as m};
