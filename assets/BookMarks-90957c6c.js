import{l as L}from"./loadingStore-3928a1a3.js";import{f as g,m as v,R as I,h as N}from"./index-d4f6f3b7.js";import{m as G}from"./modalMixin-4c687509.js";import{e as V,r as j,d as A,c as S,o as E,a as F}from"./carts-c864b624.js";import{m as w}from"./bookmark-14303522.js";import{b6 as M,aj as a,l,m as t,s as i,k as m,aJ as n,av as y,t as c,F as k,at as _,a3 as d,b1 as b}from"./_plugin-vue_export-helper-68081c38.js";import{n as Y}from"./numberCommaMixin-e0aac39c.js";import{d as f}from"./mainData-8598339c.js";import{s as z}from"./publicData-f4e8600e.js";import{B as J}from"./BannerComponent-882e3d71.js";import{n as P}from"./runtime-dom.esm-bundler-eb0e3820.js";import{_ as B}from"./image4-1806383b.js";import{_ as U}from"./icon-cart-796adfb7.js";import"./base-component-f117329c.js";const q={data(){return{bookMark:{},deleteId:""}},mixins:[G],props:["id","item","pageStatus","openDeleteModal"],methods:{...g(S,["toastMessage"]),deleteBookmark(){let s="recipeBookmarks";this.pageStatus==="product"&&(s="productBookmarks"),V(j(A,`${s}/${this.uid}/${this.deleteId}`)),this.toastMessage("已刪除收藏"),this.hide()}},watch:{id(){this.id&&(this.show(),this.bookMark=this.item,this.deleteId=this.id,this.openDeleteModal("",""))}},computed:{...v(w,["uid"])},mounted(){}},H={class:"modal fade",ref:"modal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},K={class:"modal-dialog modal-dialog-centered"},O={class:"modal-content"},Q=t("div",{class:"modal-header bg-dark"},[t("h5",{class:"modal-title text-white",id:"exampleModalLabel"}," 刪除收藏 "),t("button",{type:"button",class:"btn-close btn-close-white","data-bs-dismiss":"modal","aria-label":"Close"})],-1),W={class:"modal-body"},X={key:0},Z={key:1},tt={class:"text-danger fw-bold"},et={class:"modal-footer"},st=t("button",{type:"button",class:"btn btn-gray","data-bs-dismiss":"modal"},"關閉",-1);function ot(s,p,x,T,r,h){return a(),l("div",H,[t("div",K,[t("div",O,[Q,t("div",W,[t("p",null,[i("確定要刪除"),this.pageStatus==="recipe"?(a(),l("span",X,"食譜")):this.pageStatus==="product"?(a(),l("span",Z,"產品")):m("",!0),i("收藏 "),t("span",tt," 【"+n(this.bookMark.title)+"】 ",1),i(" 嗎? ")])]),t("div",et,[st,t("button",{type:"button",class:"btn btn-danger",onClick:p[0]||(p[0]=()=>h.deleteBookmark())},"確認刪除")])])])],512)}const at=M(q,[["render",ot]]),R="/finalEasyBuyEasyMake/assets/undraw_Appreciation_r2a1-776b7d68.png",lt={components:{RouterLink:I,DeleteBookmarksModal:at,BannerComponent:J},mixins:[Y],data(){return{selections:z,uid:"",bookMarks:[],pageStatus:"recipe",deleteId:"",deleteItem:{},averageRate:[],recipeThumbs:[]}},methods:{...g(L,["startLoading"]),...g(S,["addCart","toastMessage","goToTop"]),...g(w,["getBookmarks"]),...g(f,["getThumbs","getRates"]),openDeleteModal(s,p){this.deleteId=s,this.deleteItem=p},checkLogin(){E(F,s=>{s?this.uid=s.uid:(this.toastMessage("請先登入","error"),this.$router.push("/loginSignup"))})}},mounted(){this.checkLogin(),this.startLoading(),this.goToTop(),this.getBookmarks("recipeBookmarks"),this.getBookmarks("productBookmarks"),this.getThumbs(),this.getRates()},computed:{...N(f,["discount"]),...v(w,["recipeBookmarks","productBookmarks"]),...v(f,["thumbs","rates"])}},rt={class:"no-scroll-x"},nt={class:"container py-5"},it={class:"pt-lg-4 pt-3 position-relative"},dt={class:"category-selector row row-cols-2 list-unstyled border-bottom"},mt=["onClick"],ct={class:"fs-12 fs-md-5 d-block pb-2"},ut={class:"py-4"},bt={key:0,class:"row row-cols-xl-4 row-cols-lg-3 row-cols-2 gy-4"},pt={class:"card position-relative"},ht=["src","alt"],gt={class:"badge rounded-pill bg-primary position-absolute start-0 bottom-0 m-3"},kt=t("p",{class:"detail position-absolute top-50 start-50 translate-middle fw-bold letter-spacing-5 link-darkBrown fs-xl-5 text-center"},[i("查看"),t("br",{class:"d-xl-none d-lg-block"}),i("詳細食譜")],-1),_t=["onClick"],yt=t("img",{src:B,alt:"收藏按鈕-已收藏"},null,-1),ft=[yt],vt={class:"fw-bold fs-md-5 fs-6"},wt={class:"d-flex align-items-center flex-wrap fs-md-6 fs-12"},Bt=t("i",{class:"bi bi-hand-thumbs-up-fill"},null,-1),Ct={key:2,class:"badge rounded-pill ms-auto border mt-1 mt-md-0 border-gray bg-whiteGray text-gray"},St=t("i",{class:"bi bi-hand-thumbs-up-fill"},null,-1),Mt={key:1,class:"row row-cols-xl-4 row-cols-lg-3 row-cols-2 gy-4"},Rt={class:"card position-relative"},xt={class:"card-img-hover position-relative"},Tt=["src","alt"],$t=t("p",{class:"detail position-absolute top-50 start-50 translate-middle fw-bold letter-spacing-5 link-darkBrown fs-xl-5 text-center"},[i("查看"),t("br",{class:"d-xl-none d-lg-block"}),i("商品資訊")],-1),Dt={key:0,class:"fs-md-14 fs-12 text-white p-2 bg-primary position-absolute top-0 start-0"},Lt=["onClick"],It=t("img",{src:B,alt:"收藏按鈕-未收藏"},null,-1),Nt=[It],Gt=["onClick"],Vt=t("img",{src:B,alt:"收藏按鈕-已收藏"},null,-1),jt=[Vt],At=["onClick"],Et=t("img",{src:U,alt:"購物車按鈕",class:"shadow-sm"},null,-1),Ft=[Et],Yt={class:"fs-md-5 fs-6 fw-bold"},zt={class:"d-flex align-items-lg-center fs-md-6 fs-12"},Jt=t("i",{class:"bi bi-star-fill"},null,-1),Pt={key:1,class:"badge rounded-pill ms-auto border d-none d-md-block bg-whiteGray text-gray border-gray"},Ut=t("i",{class:"bi bi-star-fill"},null,-1),qt={class:"text-end mt-1 d-md-none fs-12"},Ht=t("i",{class:"bi bi-star-fill"},null,-1),Kt={key:1,class:"badge rounded-pill ms-auto border d-md-none bg-whiteGray text-gray border-gray"},Ot=t("i",{class:"bi bi-star-fill"},null,-1),Qt={key:2,class:"py-lg-4 text-center"},Wt=t("img",{src:R,class:"mb-lg-3 mb-2 img-md-200-sm-150",alt:"收藏大圖示"},null,-1),Xt=t("p",{class:"fs-lg-3 fs-6 mb-lg-3 mb-2"},"您尚無任何食譜收藏",-1),Zt={key:3,class:"py-lg-4 text-center"},te=t("img",{src:R,class:"mb-lg-3 mb-2 img-md-200-sm-150",alt:"收藏大圖示"},null,-1),ee=t("p",{class:"fs-lg-3 fs-6 mb-lg-3 mb-2"},"您尚無任何材料收藏",-1);function se(s,p,x,T,r,h){const $=y("BannerComponent"),u=y("RouterLink"),D=y("DeleteBookmarksModal");return a(),l("div",rt,[c($),t("section",nt,[t("div",it,[t("ul",dt,[(a(!0),l(k,null,_(r.selections.bookmarks,e=>(a(),l("li",{key:e.icon,class:d(["col text-center",{"pointer-events-none":r.pageStatus===e.value}])},[t("a",{href:"#",onClick:P(()=>r.pageStatus=e.value,["prevent"]),class:d(["text-decoration-none d-inline-block",{"fw-bold":r.pageStatus===e.value,"link-primary":r.pageStatus===e.value}])},[r.pageStatus!==e.value?(a(),l("i",{key:0,class:d([e.icon,"text-gray"])},null,2)):m("",!0),r.pageStatus===e.value?(a(),l("i",{key:1,class:d([e.iconSelected,"text-primary"])},null,2)):m("",!0),t("span",ct,n(e.title),1)],10,mt)],2))),128))]),t("div",{class:d(["blue-line bg-primary position-absolute",{"active-recipes":r.pageStatus==="recipe","active-products":r.pageStatus==="product"}])},null,2)]),t("div",ut,[r.pageStatus==="recipe"?(a(),l("div",bt,[(a(!0),l(k,null,_(s.recipeBookmarks,(e,o)=>(a(),l("div",{class:"col",key:e.id},[t("div",pt,[c(u,{to:`/recipes/${e.id}`,class:"card-img-hover position-relative"},{default:b(()=>[t("img",{src:e.image,class:"object-fit-cover card-img",alt:e.title},null,8,ht),t("span",gt,n(e.category),1),kt]),_:2},1032,["to"]),t("button",{type:"button",class:"position-absolute btn-bookmark border-0 bg-transparent top-0 end-0 m-2 m-md-3",onClick:()=>h.openDeleteModal(e.id,e)},ft,8,_t),c(u,{to:`/recipes/${e.id}`,class:"card-body px-0 text-decoration-none link-darkBrown"},{default:b(()=>[t("h3",vt,n(e.title),1),t("div",wt,[e.total?(a(),l("del",{key:0,class:d(["me-2 text-muted",{"d-none":e.price===e.total}])},"NT$ "+n(s.numberComma(e.total)),3)):m("",!0),t("span",{class:d(["me-1",{"text-danger":e.price!==e.total,"fw-bold":e.price!==e.total}])},"NT$ "+n(s.numberComma(e.price)),3),t("span",null," / "+n(e.content),1),s.thumbs[o]?(a(),l("span",{key:1,class:d(["badge rounded-pill ms-auto border mt-1 mt-md-0",{"border-primary":s.thumbs[o].thumbs!==0,"border-gray":s.thumbs[o].thumbs===0,"text-primary":s.thumbs[o].thumbs!==0,"text-gray":s.thumbs[o].thumbs===0,"bg-secondary":s.thumbs[o].thumbs!==0,"bg-whiteGray":s.thumbs[o].thumbs===0}])},[i(n(s.thumbs[o].thumbs)+" ",1),Bt],2)):s.thumbs[o]?m("",!0):(a(),l("span",Ct,[i(" 0 "),St]))])]),_:2},1032,["to"])])]))),128))])):r.pageStatus==="product"?(a(),l("div",Mt,[(a(!0),l(k,null,_(s.productBookmarks,(e,o)=>(a(),l("div",{class:"col",key:e.id},[t("div",Rt,[t("div",xt,[c(u,{to:`/products/${e.id}`},{default:b(()=>[t("img",{src:e.imgUrl,class:"object-fit-cover card-img",alt:e.title},null,8,Tt),$t,e.isCheaper?(a(),l("span",Dt,n(s.discount(e))+" 折 ",1)):m("",!0)]),_:2},1032,["to"]),t("button",{type:"button",class:"position-absolute btn-bookmark border-0 bg-transparent top-0 end-0 m-2 m-md-3",onClick:()=>h.openDeleteModal(e.id,e)},Nt,8,Lt),(a(!0),l(k,null,_(r.bookMarks,C=>(a(),l("div",{key:C},[C===e.id?(a(),l("button",{key:0,type:"button",class:"position-absolute btn-bookmark-delete border-0 bg-transparent top-0 end-0 m-2 m-md-3",onClick:()=>s.deleteBookmark(e.id)},jt,8,Gt)):m("",!0)]))),128)),t("button",{onClick:()=>s.addCart(e),type:"button",class:"btn-buy border-0 bg-transparent m-2 m-md-3 p-0 position-absolute end-0 bottom-0"},Ft,8,At)]),c(u,{to:`/products/${e.id}`,class:"card-body px-0 text-decoration-none link-darkBrown"},{default:b(()=>[t("h3",Yt,n(e.title),1),t("div",zt,[t("del",{class:d(["me-2 text-muted",{"d-none":!e.isCheaper}])},"NT$ "+n(s.numberComma(e.originalPrice)),3),t("span",{class:d(["me-1",{"text-danger":e.isCheaper,"fw-bold":e.isCheaper}])},"NT$ "+n(s.numberComma(e.price)),3),t("span",null," / "+n(e.num)+n(e.unit),1),s.rates[o]?(a(),l("span",{key:0,class:d(["badge rounded-pill ms-auto border d-none d-md-block",{"text-yellow":s.rates[o].averageRate,"border-yellow":s.rates[o].averageRate,"bg-lightYellow":s.rates[o].averageRate,"bg-whiteGray":!s.rates[o].averageRate,"text-gray":!s.rates[o].averageRate,"border-gray":!s.rates[o].averageRate}])},[i(n(s.rates[o].averageRate)+" ",1),Jt],2)):s.rates[o]?m("",!0):(a(),l("span",Pt,[i(" 0 "),Ut]))]),t("div",qt,[s.rates[o]?(a(),l("span",{key:0,class:d(["badge rounded-pill ms-auto border d-md-none",{"text-yellow":s.rates[o].averageRate,"border-yellow":s.rates[o].averageRate,"bg-lightYellow":s.rates[o].averageRate,"bg-whiteGray":!s.rates[o].averageRate,"text-gray":!s.rates[o].averageRate,"border-gray":!s.rates[o].averageRate}])},[i(n(s.rates[o].averageRate)+" ",1),Ht],2)):s.rates[o]?m("",!0):(a(),l("span",Kt,[i(" 0 "),Ot]))])]),_:2},1032,["to"])])]))),128))])):m("",!0),!s.recipeBookmarks&&r.pageStatus==="recipe"?(a(),l("div",Qt,[Wt,Xt,c(u,{to:"/recipes",class:"link-primary fs-lg-5"},{default:b(()=>[i("前往瀏覽食譜")]),_:1})])):!s.productBookmarks&&r.pageStatus==="product"?(a(),l("div",Zt,[te,ee,c(u,{to:"/products",class:"link-primary fs-lg-5"},{default:b(()=>[i("前往瀏覽食譜材料")]),_:1})])):m("",!0)])]),c(D,{id:r.deleteId,item:r.deleteItem,"page-status":r.pageStatus,"open-delete-modal":h.openDeleteModal},null,8,["id","item","page-status","open-delete-modal"])])}const ke=M(lt,[["render",se]]);export{ke as default};
