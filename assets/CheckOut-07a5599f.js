import{m as x,a as N}from"./index-17d9ec8c.js";import{c as v}from"./carts-1342d558.js";import{n as k}from"./numberCommaMixin-e0aac39c.js";import{v as C}from"./runtime-dom.esm-bundler-54ced388.js";import{_ as V,U as i,V as e,a1 as w,a2 as T,a0 as l,Y as c,Z as u,W as n,X as h,a5 as I,r as _,o as m,a4 as d,$ as q}from"./_plugin-vue_export-helper-03b40388.js";import"./vue-router-2c21c692.js";import"./_commonjsHelpers-042e6b4d.js";import"./db-143b9a4b.js";const S={data(){return{userId:"",token:"",nickName:"",user:{email:"",name:"",phoneNum:"",address:"",message:""}}},mixins:[k],methods:{...x(v,["getCart","addOrder"]),isPhone(t){return/^(09)[0-9]{8}$/.test(t)?!0:"需要正確的電話號碼"}},mounted(){this.token=document.cookie.replace(/(?:(?:^|.*;\s*)myToken\s*=\s*([^;]*).*$)|^.*$/,"$1"),this.userId=localStorage.getItem("userId"),this.userId=Number(this.userId),this.nickName=localStorage.getItem("nickName")},computed:{...N(v,["cart","cartItems"])}},U={class:"my-10"},z=I('<div class="container"><nav aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item fs-5"> 購物車 </li><li class="breadcrumb-item active fs-5" aria-current="page">填寫訂單資訊</li></ol></nav></div>',1),F={class:"container mt-5"},M={class:"row row-cols-1 row-cols-lg-2 g-5"},O={class:"col"},B={class:"row"},E={class:"card mb-3",style:{border:"none !important"}},L={class:"row g-0"},P=["src"],W={class:"col-8"},j={class:"card-body d-flex flex-column h-100"},D={class:"card-title d-flex mb-auto subTitle"},R={class:"ms-auto"},A={class:"card-text d-flex justify-content-end"},X={class:"mt-1"},Y={key:0,class:"mb-0 text-danger text-end fw-bold"},Z={key:1,class:"mb-0 text-danger text-end fw-bold"},G=e("hr",null,null,-1),H={class:"col-12"},J={class:"card",style:{border:"none !important"}},K={class:"card-body"},Q={class:"table table-borderless"},$=e("th",{class:"fw-normal"},"商品總金額",-1),ee={class:"text-end fw-normal"},se={key:0},te={class:"text-end"},oe={key:0},le=e("td",null,"優惠券折扣",-1),ae={class:"text-end"},re={class:"border-top"},ne=e("td",{class:"fw-bold text-danger"},"總計金額",-1),de={class:"text-end fw-bold text-danger"},ce={key:0},ie={key:1},me={class:"col-12"},ue=e("i",{class:"bi bi-arrow-left"},null,-1),pe={class:"col"},be={class:"row gy-4 d-flex"},_e={class:"col-12 fs-5"},he=e("i",{class:"bi bi-envelope-fill"},null,-1),fe=e("span",{class:"text-danger h4 ms-2"},"*",-1),ve={class:"col-12 fs-5"},ye=e("i",{class:"bi bi-person-fill"},null,-1),ge=e("span",{class:"text-danger h4 ms-2"},"*",-1),xe={class:"col-12 fs-5"},Ne=e("i",{class:"bi bi-telephone-fill"},null,-1),ke=e("span",{class:"text-danger h4 ms-2"},"*",-1),Ce={class:"col-12 fs-5"},Ve=e("i",{class:"bi bi-house-fill"},null,-1),we=e("span",{class:"text-danger h4 ms-2"},"*",-1),Te=e("div",{class:"col-12 fs-5 position-relative"},[e("label",{for:"payWay",class:"form-label text-red"},[e("i",{class:"bi bi-wallet-fill"}),c(" 付款方式"),e("span",{class:"text-danger h4 ms-2"},"*")]),e("input",{type:"text",class:"form-control",id:"payWay",value:"貨到付款",disabled:""}),e("i",{class:"fs-4 text-success bi bi-check-lg position-absolute",style:{top:"40px",right:"20px"}}),e("p",{class:"text-muted",style:{"font-size":"14px"}},"注意：本店一律採貨到付款的方式喔!")],-1),Ie={class:"col-12 fs-5"},qe=e("i",{class:"bi bi-chat-left-text-fill"},null,-1),Se=e("span",{class:"text-muted ms-2",style:{"font-size":"14px"}},"(可不填寫)",-1),Ue=e("p",{class:"text-muted",style:{"font-size":"14px"}},"有任何問題或是貨品相關注意事項都歡迎與我們聯繫~",-1),ze=e("div",{class:"col-12 mt-4"},[e("button",{type:"submit",class:"btn btn-red w-100"},"確認建立訂單")],-1);function Fe(t,a,Me,Oe,o,y){const f=_("RouterLink"),p=_("VField"),b=_("ErrorMessage"),g=_("VForm");return m(),i("div",U,[z,e("section",F,[e("div",M,[e("div",O,[e("div",B,[(m(!0),i(w,null,T(t.cartItems,(s,r)=>(m(),i("div",{class:"col-12",key:r+756345},[e("div",E,[e("div",L,[n(f,{to:`/products/${s.product.id}`,class:"col-4"},{default:h(()=>[e("img",{src:s.product.imgUrl,class:"img-fluid rounded-start w-100",style:{"object-fit":"cover",height:"150px"}},null,8,P)]),_:2},1032,["to"]),e("div",W,[e("div",j,[e("h5",D,[c(l(s.product.title)+" ",1),e("span",R,"x "+l(t.numberComma(s.qty)),1)]),e("div",A,[e("del",{class:d(["me-2 text-muted mt-1",{"d-none":!s.product.isCheaper}]),style:{"font-size":"14px"}},"NT$ "+l(t.numberComma(s.product.originalPrice)),3),e("span",X,[e("span",{class:d({"text-danger":s.product.isCheaper,"fw-bold":s.product.isCheaper})},"NT$ "+l(t.numberComma(s.product.price)),3),c(" / "+l(s.product.num)+l(s.product.unit),1)])]),s.product.category!=="組合包"?(m(),i("p",Y,"小計：NT$ "+l(t.numberComma(s.product.price*s.qty))+" / "+l(t.numberComma(s.product.num*s.qty))+l(s.product.unit),1)):u("",!0),s.product.category==="組合包"?(m(),i("p",Z,"小計：NT$ "+l(t.numberComma(s.product.price*s.qty))+" / "+l(t.numberComma(s.qty))+"組",1)):u("",!0)])])])]),G]))),128)),e("div",H,[e("div",J,[e("div",K,[e("table",Q,[e("thead",null,[e("tr",null,[$,e("th",ee,"NT$ "+l(t.numberComma(t.cart.total)),1)])]),e("tbody",null,[e("tr",null,[e("td",null,[c("運費"),t.cart.total>=1e3?(m(),i("span",se,"(滿千元免運)")):u("",!0)]),e("td",te," NT$ "+l(t.cart.total>=1e3?0:t.cart.deliveryCharge),1)]),t.cart.total+t.cart.deliveryCharge!==t.cart.finalTotal&&t.cart.coupon?(m(),i("tr",oe,[le,e("td",ae,"- NT$ "+l(t.numberComma(Math.ceil(t.cart.total*(t.cart.coupon.discount/100)))),1)])):u("",!0),e("tr",re,[ne,e("td",de,[t.cart.total<1e3?(m(),i("span",ce,"NT$ "+l(t.numberComma(t.cart.finalTotal)),1)):t.cart.total>=1e3?(m(),i("span",ie,"NT$ "+l(t.numberComma(t.cart.finalTotal-t.cart.deliveryCharge)),1)):u("",!0)])])])])])])]),e("div",me,[n(f,{to:"/products",class:"rounded-0 hvr-sweep-to-left btn mb-4 ms-3 text-red border-red"},{default:h(()=>[ue,c(" 繼續選購")]),_:1})])])]),e("div",pe,[n(g,{ref:"form",class:"",onSubmit:a[5]||(a[5]=()=>t.addOrder(o.user.email,o.user.name,o.user.phoneNum,o.user.address,o.user.message))},{default:h(({errors:s})=>[e("div",be,[e("div",_e,[e("label",{for:"email",class:d(["form-label text-secondary",{"text-red":o.user.email&&!s.信箱}])},[he,c(" 信箱"),fe],2),n(p,{id:"email",name:"信箱",type:"email",class:d(["form-control border-0 border-bottom",{"is-invalid":s.信箱,"is-valid":o.user.email&&!s.信箱}]),placeholder:"請輸入您的信箱",rules:"email|required",modelValue:o.user.email,"onUpdate:modelValue":a[0]||(a[0]=r=>o.user.email=r)},null,8,["class","modelValue"]),n(b,{name:"信箱",class:"invalid-feedback"})]),e("div",ve,[e("label",{for:"name",class:d(["form-label text-secondary",{"text-red":o.user.name&&!s.收件人姓名}])},[ye,c(" 收件人姓名"),ge],2),n(p,{id:"name",name:"收件人姓名",type:"name",class:d(["form-control border-0 border-bottom",{"is-invalid":s.收件人姓名,"is-valid":!s.收件人姓名&&o.user.name}]),placeholder:"請輸入您的收件人姓名",rules:"required",modelValue:o.user.name,"onUpdate:modelValue":a[1]||(a[1]=r=>o.user.name=r)},null,8,["class","modelValue"]),n(b,{name:"收件人姓名",class:"invalid-feedback"})]),e("div",xe,[e("label",{for:"phoneNum",class:d(["form-label text-secondary",{"text-red":o.user.phoneNum&&!s.收件人電話}])},[Ne,c(" 收件人電話"),ke],2),n(p,{id:"phoneNum",name:"收件人電話",type:"phoneNum",class:d(["form-control border-0 border-bottom",{"is-invalid":s.收件人電話,"is-valid":!s.收件人電話&&o.user.phoneNum}]),placeholder:"請輸入您的收件人電話",rules:y.isPhone,modelValue:o.user.phoneNum,"onUpdate:modelValue":a[2]||(a[2]=r=>o.user.phoneNum=r)},null,8,["class","rules","modelValue"]),n(b,{name:"收件人電話",class:"invalid-feedback"})]),e("div",Ce,[e("label",{for:"address",class:d(["form-label text-secondary",{"text-red":o.user.address&&!s.收件人地址}])},[Ve,c(" 收件人地址"),we],2),n(p,{id:"address",name:"收件人地址",type:"address",class:d(["form-control border-0 border-bottom",{"is-invalid":s.收件人地址,"is-valid":!s.收件人地址&&o.user.address}]),placeholder:"請輸入您的收件人地址",rules:"required",modelValue:o.user.address,"onUpdate:modelValue":a[3]||(a[3]=r=>o.user.address=r)},null,8,["class","modelValue"]),n(b,{name:"收件人地址",class:"invalid-feedback"})]),Te,e("div",Ie,[e("label",{for:"message",class:d(["form-label text-secondary",{"text-red":o.user.message}])},[qe,c(" 留言")],2),Se,q(e("textarea",{id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":a[4]||(a[4]=r=>o.user.message=r)},null,512),[[C,o.user.message]]),Ue]),ze])]),_:1},512)])])])])}const Ae=V(S,[["render",Fe]]);export{Ae as default};
