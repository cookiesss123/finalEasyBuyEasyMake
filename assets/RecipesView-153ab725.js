import{R as v}from"./vue-router-99ebe252.js";import{l as O,w as B,n as R,j as m}from"./runtime-dom.esm-bundler-eb0e3820.js";import{_ as j}from"./icon-search-d6364761.js";import{_ as x}from"./image5-4fc2427e.js";import{_ as I}from"./image4-1806383b.js";import{b6 as E,av as C,aj as l,l as c,m as e,a3 as n,s as g,aJ as h,b3 as p,F as f,at as y,k as u,t as k,b1 as w}from"./_plugin-vue_export-helper-68081c38.js";const L="/finalEasyMakeEasyBuy/assets/dessert-main-image-molten-cake-0fbd4f2-f4502124.jpg",M="/finalEasyMakeEasyBuy/assets/13d687f987752ba797cc3684987316e6-f2b80201.jpg",N="/finalEasyMakeEasyBuy/assets/cookies-4053771_960_720222-a7810d77.jpg",V="/finalEasyMakeEasyBuy/assets/baked-mochi-donuts-DSC_3500-1x1-1200-ae576dd9.jpg",S="/finalEasyMakeEasyBuy/assets/IMG_P-0051-1000x600-2dd9dd1d.jpg",D="/finalEasyMakeEasyBuy/assets/瘋提拉米蘇-1-c740fada.jpg";const{VITE_PATH:a}={VITE_PATH:"https://vue-final-dbjson-889xxtffg-cookiesss123.vercel.app",BASE_URL:"/finalEasyMakeEasyBuy/",MODE:"production",DEV:!1,PROD:!0},U={components:{RouterLink:v},data(){return{recipes:[],selectItem:"全部",priceOrRate:"成本",highOrLow:"不拘",recipeSearchName:"",filterRecipes:[],bookMarks:[],recipeThumbs:[],thumbs:{},myThumbs:[],myThumbObj:{},sortThumbs:[]}},methods:{getRecipes(){this.$http.get(`${a}/recipes`).then(r=>{console.log(r.data),this.recipes=r.data,this.filterRecipes=r.data}).catch(r=>{console.log(r)})},searchRecipes(){let r=`${a}/recipes`;if(this.highOrLow==="不拘"&&this.selectItem==="全部"){this.sortThumbs=[],this.filterRecipes=this.recipes.filter(t=>t.title.match(this.recipeSearchName));return}else this.priceOrRate==="成本"?(this.sortThumbs=[],this.selectItem==="全部"?this.highOrLow==="低到高"?r=`${a}/recipes?_sort=total&_order=asc`:this.highOrLow==="高到低"&&(r=`${a}/recipes?_sort=total&_order=desc`):this.selectItem!=="全部"&&(this.highOrLow==="不拘"?r=`${a}/recipes?category=${this.selectItem}`:this.highOrLow==="低到高"?r=`${a}/recipes?category=${this.selectItem}&_sort=total&_order=asc`:this.highOrLow==="高到低"&&(r=`${a}/recipes?category=${this.selectItem}&_sort=total&_order=desc`))):this.priceOrRate==="評價"&&(this.getAllRecipeThumbs(),this.sortThumbs=[],this.filterRecipes.forEach(t=>{Object.entries(this.thumbs).forEach(i=>{i[1].recipe.id===t.id&&this.sortThumbs.push(i)})}),console.log(this.sortThumbs,"食譜排序???"),this.highOrLow==="低到高"?(this.sortThumbs=this.sortThumbs.sort((t,i)=>t[1].people-i[1].people),console.log(this.sortThumbs,"排序好的食譜評價 低到高")):this.highOrLow==="高到低"&&(this.sortThumbs=this.sortThumbs.sort((t,i)=>i[1].people-t[1].people),console.log(this.sortThumbs,this.filterRecipes,"排序好的食譜評價 高到低")),this.recipeSearchName!==""&&(this.sortThumbs=this.sortThumbs.filter(t=>t[1].recipe.title.match(this.recipeSearchName))));this.priceOrRate!=="評價"&&this.$http.get(`${r}`).then(t=>{this.filterRecipes=t.data,this.recipeSearchName!==""&&(this.filterRecipes=this.filterRecipes.filter(i=>i.title.match(this.recipeSearchName)))}).catch(t=>{console.log(t)})},getBookmarks(){const r=`${a}/600/users/${this.userId}/recipeBookmarks?_expand=recipe`;this.$http.get(r,{headers:{authorization:`Bearer ${this.token}`}}).then(t=>{console.log(t.data),this.bookMarks=t.data}).catch(t=>{console.log(t)})},addBookmark(r){const t={userId:this.userId,recipeId:r};this.$http.post(`${a}/600/users/${this.userId}/recipeBookmarks?_expand=recipe`,t,{headers:{authorization:`Bearer ${this.token}`}}).then(i=>{console.log(i.data),this.getBookmarks(),console.log("收藏成功!")}).catch(i=>{console.log(i)})},deleteBookmark(r){let t="";this.bookMarks.forEach(i=>{i.recipeId.toString()===r.toString()&&(t=i.id)}),this.$http.delete(`${a}/600/recipeBookmarks/${Number(t)}`,{headers:{authorization:`Bearer ${this.token}`}}).then(i=>{console.log(i.data),this.getBookmarks(),console.log("刪除收藏")}).catch(i=>{console.log(i)})},getAllRecipeThumbs(){const r=`${a}/recipeThumbs?_expand=recipe`;this.$http.get(r).then(t=>{console.log("所有食譜讚",t.data),this.recipeThumbs=t.data,this.thumbs={},this.recipeThumbs.forEach(i=>{this.thumbs[i.recipe.id]===void 0?this.thumbs[i.recipe.id]={people:1,recipe:i.recipe}:this.thumbs[i.recipe.id].people+=1}),this.recipes.forEach(i=>{Object.keys(this.thumbs).forEach(T=>{this.thumbs[i.id]===void 0&&(this.thumbs[i.id]={people:0,recipe:i})})}),console.log("分類好的讚",Object.entries(this.thumbs))}).catch(t=>{console.log(t)})},getMyThumb(){const r=`${a}/600/users/${this.userId}/recipeThumbs`;this.$http.get(r,{headers:{authorization:`Bearer ${this.token}`}}).then(t=>{console.log("我按了哪些食譜讚?",t.data),this.myThumbs=t.data,this.myThumbs.forEach(i=>{this.myThumbObj[i.recipeId]===void 0&&(this.myThumbObj[i.recipeId]={thumb:!0})}),console.log("我讚過的食譜",this.myThumbObj)}).catch(t=>{console.log(t)})}},mounted(){this.userId=localStorage.getItem("userId"),this.userId=Number(this.userId),this.token=document.cookie.replace(/(?:(?:^|.*;\s*)myToken\s*=\s*([^;]*).*$)|^.*$/,"$1"),this.getRecipes(),this.getBookmarks(),this.getAllRecipeThumbs(),this.getMyThumb()},watch:{selectItem(){this.sortThumbs=[];let r=`${a}/recipes`;this.selectItem==="全部"?(r=`${a}/recipes`,console.log("全部類別")):this.selectItem!=="全部"&&(r=`${a}/recipes?category=${this.selectItem}`,console.log(this.selectItem)),this.$http.get(`${r}`).then(t=>{console.log(t.data),this.filterRecipes=t.data}).catch(t=>{console.log(t)})}}},A={class:"py-100-sm-40"},P={class:"bg-lightYellow d-flex justify-content-center py-4"},z={class:"selectProductCategory"},G=e("br",null,null,-1),H=e("br",null,null,-1),F=e("br",null,null,-1),K=e("br",null,null,-1),J=e("br",null,null,-1),Y=e("br",null,null,-1),q={class:"container selectProduct my-5"},Q={class:"input-group"},W={class:"btn btn-outline-brown px-5","data-bs-toggle":"collapse",href:"#multiCollapseExample1",role:"button","aria-expanded":"false","aria-controls":"multiCollapseExample1"},X=e("i",{class:"bi bi-caret-down-fill"},null,-1),Z={class:"ms-2 fw-bold"},$={class:"btn btn-outline-brown px-5",type:"button","data-bs-toggle":"collapse","data-bs-target":"#multiCollapseExample2","aria-expanded":"false","aria-controls":"multiCollapseExample2"},ee=e("i",{class:"bi bi-caret-down-fill"},null,-1),te={class:"ms-2 fw-bold"},se=e("img",{src:j,style:{height:"25px"},alt:""},null,-1),oe=[se],ie={class:"row g-0",id:"myGroup"},re={class:"col-2"},le={ref:"collapse1","data-bs-parent":"#myGroup",class:"collapse multi-collapse",id:"multiCollapseExample1"},ce={class:"card card-body border-0"},ne={class:"btn-group-vertical",role:"group","aria-label":"Vertical radio toggle button group"},ae=e("label",{class:"btn btn-outline-brown",for:"selectprice"},"成本",-1),he=e("label",{class:"btn btn-outline-brown",for:"selectRate"},"評價",-1),de={class:"col-2"},ue={ref:"collapse2","data-bs-parent":"#myGroup",class:"collapse multi-collapse",id:"multiCollapseExample2"},pe={class:"card card-body border-0"},be={class:"btn-group-vertical",role:"group","aria-label":"Vertical radio toggle button group"},me=e("label",{class:"btn btn-outline-brown",for:"noDifference"},"不拘",-1),_e=e("label",{class:"btn btn-outline-brown",for:"highToLow"},"高到低",-1),ge=e("label",{class:"btn btn-outline-brown",for:"lowToHigh"},"低到高",-1),fe={class:"container"},ye={key:0,class:"row row-cols-lg-4 row-cols-1 gy-4"},ke={class:"card position-relative border-0 bg-transparent",style:{"border-radius":"20px"}},we=["src"],xe={class:"card-text"},Ie=["onClick"],Te=e("img",{src:x},null,-1),ve=[Te],Oe=["onClick"],Be=e("img",{src:I},null,-1),Re=[Be],je={style:{"pointer-events":"none",top:"155px"},class:"badge rounded-pill bg-brown mt-4 border-0 me-3 position-absolute end-0"},Ee={class:"h5 d-flex justify-content-between fw-bold"},Ce={class:"col-12 d-flex justify-content-end"},Le={class:"mt-1"},Me={class:"d-flex align-items-center justify-content-end"},Ne={key:0,class:"mb-0 ms-3"},Ve={key:1,type:"button",class:"border-0 bg-transparent text-brown fs-5"},Se=e("i",{class:"bi bi-hand-thumbs-up-fill"},null,-1),De=[Se],Ue={key:2,type:"button",class:"border-0 bg-transparent text-brown fs-5"},Ae=e("i",{class:"bi bi-hand-thumbs-up"},null,-1),Pe=[Ae],ze={key:1,class:"row row-cols-lg-4 row-cols-1 gy-4"},Ge={class:"card position-relative border-0 bg-transparent",style:{"border-radius":"20px"}},He=["src"],Fe={class:"card-text"},Ke=["onClick"],Je=e("img",{src:x},null,-1),Ye=[Je],qe=["onClick"],Qe=e("img",{src:I},null,-1),We=[Qe],Xe={style:{"pointer-events":"none",top:"155px"},class:"badge rounded-pill bg-brown mt-4 border-0 me-3 position-absolute end-0"},Ze={class:"h5 d-flex justify-content-between fw-bold"},$e={class:"col-12 d-flex justify-content-end"},et={class:"mt-1"},tt={class:"d-flex align-items-center justify-content-end"},st={key:0,class:"mb-0 ms-3"},ot={key:1,type:"button",class:"border-0 bg-transparent text-brown fs-5"},it=e("i",{class:"bi bi-hand-thumbs-up-fill"},null,-1),rt=[it],lt={key:2,type:"button",class:"border-0 bg-transparent text-brown fs-5"},ct=e("i",{class:"bi bi-hand-thumbs-up"},null,-1),nt=[ct];function at(r,t,i,T,o,d){const _=C("RouterLink");return l(),c("div",A,[e("section",P,[e("div",z,[e("button",{type:"button",class:"btn border-0 me-5",onClick:t[0]||(t[0]=()=>o.selectItem="全部")},[e("img",{src:L,alt:"",class:n(["rounded-circle mb-3",{selectImgBorder:o.selectItem==="全部"}]),width:"120",height:"120",style:{"object-fit":"cover"}},null,2),G,e("span",{class:n(["text-secondary h5",{"text-orange":o.selectItem==="全部","fw-bold":o.selectItem==="全部"}])},"全部",2)]),e("button",{type:"button",class:"btn border-0 me-5",onClick:t[1]||(t[1]=()=>o.selectItem="台式甜點")},[e("img",{src:M,alt:"",class:n(["rounded-circle mb-3",{selectImgBorder:o.selectItem==="台式甜點"}]),width:"120",height:"120",style:{"object-fit":"cover"}},null,2),H,e("span",{class:n(["text-secondary h5",{"text-orange":o.selectItem==="台式甜點","fw-bold":o.selectItem==="台式甜點"}])},"台式甜點",2)]),e("button",{type:"button",class:"btn border-0 me-5",onClick:t[2]||(t[2]=()=>o.selectItem="法式甜點")},[e("img",{src:N,alt:"",class:n(["rounded-circle mb-3",{selectImgBorder:o.selectItem==="法式甜點"}]),width:"120",height:"120",style:{"object-fit":"cover"}},null,2),F,e("span",{class:n(["text-secondary h5",{"text-orange":o.selectItem==="法式甜點","fw-bold":o.selectItem==="法式甜點"}])},"法式甜點",2)]),e("button",{type:"button",class:"btn border-0 me-5",onClick:t[3]||(t[3]=()=>o.selectItem="美式甜點")},[e("img",{src:V,alt:"",class:n(["rounded-circle mb-3",{selectImgBorder:o.selectItem==="美式甜點"}]),width:"120",height:"120",style:{"object-fit":"cover"}},null,2),K,e("span",{class:n(["text-secondary h5",{"text-orange":o.selectItem==="美式甜點","fw-bold":o.selectItem==="美式甜點"}])},"美式甜點",2)]),e("button",{type:"button",class:"btn border-0 me-5",onClick:t[4]||(t[4]=()=>o.selectItem="日式甜點")},[e("img",{src:S,alt:"",class:n(["rounded-circle mb-3",{selectImgBorder:o.selectItem==="日式甜點"}]),width:"120",height:"120",style:{"object-fit":"cover"}},null,2),J,e("span",{class:n(["text-secondary h5",{"text-orange":o.selectItem==="日式甜點","fw-bold":o.selectItem==="日式甜點"}])},"日式甜點",2)]),e("button",{type:"button",class:"btn border-0 me-5",onClick:t[5]||(t[5]=()=>o.selectItem="義式甜點")},[e("img",{src:D,alt:"",class:n(["rounded-circle mb-3",{selectImgBorder:o.selectItem==="義式甜點"}]),width:"120",height:"120",style:{"object-fit":"cover"}},null,2),Y,e("span",{class:n(["text-secondary h5",{"text-orange":o.selectItem==="義式甜點","fw-bold":o.selectItem==="義式甜點"}])},"義式甜點",2)])])]),e("section",q,[e("div",Q,[e("a",W,[g("篩選對象 "),X,e("span",Z,h(o.priceOrRate),1)]),e("button",$,[g("篩選值 "),ee,e("span",te,h(o.highOrLow),1)]),p(e("input",{type:"search",class:"form-control border-brown border-end-0",placeholder:"請輸入食譜名稱","aria-label":"Example text with two button addons","onUpdate:modelValue":t[6]||(t[6]=s=>o.recipeSearchName=s),onKeyup:t[7]||(t[7]=B((...s)=>d.searchRecipes&&d.searchRecipes(...s),["enter"]))},null,544),[[O,o.recipeSearchName]]),e("button",{type:"submit",class:"btn border border-brown border-start-0 bg-transparent",onClick:t[8]||(t[8]=R((...s)=>d.searchRecipes&&d.searchRecipes(...s),["prevent"]))},oe)]),e("div",ie,[e("div",re,[e("div",le,[e("div",ce,[e("div",ne,[p(e("input",{type:"radio",class:"btn-check",value:"成本",name:"priceOrRate",id:"selectprice",autocomplete:"off","onUpdate:modelValue":t[9]||(t[9]=s=>o.priceOrRate=s)},null,512),[[m,o.priceOrRate]]),ae,p(e("input",{type:"radio",class:"btn-check",value:"評價",name:"priceOrRate",id:"selectRate",autocomplete:"off","onUpdate:modelValue":t[10]||(t[10]=s=>o.priceOrRate=s)},null,512),[[m,o.priceOrRate]]),he])])],512)]),e("div",de,[e("div",ue,[e("div",pe,[e("div",be,[p(e("input",{type:"radio",class:"btn-check",value:"不拘",name:"highOrLow",id:"noDifference",autocomplete:"off",checked:"","onUpdate:modelValue":t[11]||(t[11]=s=>o.highOrLow=s)},null,512),[[m,o.highOrLow]]),me,p(e("input",{type:"radio",class:"btn-check",value:"高到低",name:"highOrLow",id:"highToLow",autocomplete:"off","onUpdate:modelValue":t[12]||(t[12]=s=>o.highOrLow=s)},null,512),[[m,o.highOrLow]]),_e,p(e("input",{type:"radio",class:"btn-check",value:"低到高",name:"highOrLow",id:"lowToHigh",autocomplete:"off","onUpdate:modelValue":t[13]||(t[13]=s=>o.highOrLow=s)},null,512),[[m,o.highOrLow]]),ge])])],512)])])]),e("section",fe,[o.sortThumbs.length?o.sortThumbs.length?(l(),c("div",ze,[(l(!0),c(f,null,y(o.sortThumbs,s=>(l(),c("div",{class:"col text-decoration-none",key:s+346663},[e("div",Ge,[k(_,{to:`/recipes/${s[1].recipe.id}`},{default:w(()=>[e("img",{src:s[1].recipe.image,class:"card-img",height:"220",style:{"border-radius":"20px","object-fit":"cover","max-width":"100%","max-height":"100%"},alt:""},null,8,He)]),_:2},1032,["to"]),e("h5",Fe,[e("button",{type:"button",class:"position-absolute bookmarkBtn border-0 bg-transparent me-auto top-0 m-3",onClick:()=>d.addBookmark(s[1].recipe.id)},Ye,8,Ke),(l(!0),c(f,null,y(o.bookMarks,b=>(l(),c("div",{key:b.id+4567},[b.recipeId===s[1].recipe.id?(l(),c("button",{key:0,type:"button",class:"position-absolute deleteBookmarkBtn border-0 bg-transparent me-auto top-0 m-3",onClick:()=>d.deleteBookmark(s[1].recipe.id)},We,8,qe)):u("",!0)]))),128)),e("span",Xe,h(s[1].recipe.category),1)]),k(_,{to:`/recipes/${s[1].recipe.id}`,class:"card-footer bg-transparent border-0 text-decoration-none link-darkBrown"},{default:w(()=>[e("h5",Ze,h(s[1].recipe.title),1),e("div",$e,[e("del",{class:n(["me-2 text-muted mt-1",{"d-none":s[1].recipe.price===s[1].recipe.total}])},"NT$ "+h(s[1].recipe.total),3),e("span",et,[e("span",{class:n({"text-danger":s[1].recipe.price!==s[1].recipe.total,"fw-bold":s[1].recipe.price!==s[1].recipe.total})},"NT$ "+h(s[1].recipe.price),3),g(" / "+h(s[1].recipe.content),1)])]),e("div",tt,[o.thumbs[s[1].recipe.id]?(l(),c("span",st,h(o.thumbs[s[1].recipe.id].people),1)):u("",!0),o.myThumbObj[s[1].recipe.id]?(l(),c("button",ot,rt)):o.myThumbObj[s[1].recipe.id]?u("",!0):(l(),c("button",lt,nt))])]),_:2},1032,["to"])])]))),128))])):u("",!0):(l(),c("div",ye,[(l(!0),c(f,null,y(o.filterRecipes,s=>(l(),c("div",{class:"col text-decoration-none",key:s.id},[e("div",ke,[k(_,{to:`/recipes/${s.id}`},{default:w(()=>[e("img",{src:s.image,class:"card-img",height:"220",style:{"border-radius":"20px","object-fit":"cover","max-width":"100%","max-height":"100%"},alt:""},null,8,we)]),_:2},1032,["to"]),e("h5",xe,[e("button",{type:"button",class:"position-absolute bookmarkBtn border-0 bg-transparent me-auto top-0 m-3",onClick:()=>d.addBookmark(s.id)},ve,8,Ie),(l(!0),c(f,null,y(o.bookMarks,b=>(l(),c("div",{key:b.id+4567},[b.recipeId===s.id?(l(),c("button",{key:0,type:"button",class:"position-absolute deleteBookmarkBtn border-0 bg-transparent me-auto top-0 m-3",onClick:()=>d.deleteBookmark(s.id)},Re,8,Oe)):u("",!0)]))),128)),e("span",je,h(s.category),1)]),k(_,{to:`/recipes/${s.id}`,class:"card-footer bg-transparent border-0 text-decoration-none link-darkBrown"},{default:w(()=>[e("h5",Ee,h(s.title),1),e("div",Ce,[e("del",{class:n(["me-2 text-muted mt-1",{"d-none":s.price===s.total}])},"NT$ "+h(s.total),3),e("span",Le,[e("span",{class:n({"text-danger":s.price!==s.total,"fw-bold":s.price!==s.total})},"NT$ "+h(s.price),3),g(" / "+h(s.content),1)])]),e("div",Me,[o.thumbs[s.id]?(l(),c("span",Ne,h(o.thumbs[s.id].people),1)):u("",!0),o.myThumbObj[s.id]?(l(),c("button",Ve,De)):o.myThumbObj[s.id]?u("",!0):(l(),c("button",Ue,Pe))])]),_:2},1032,["to"])])]))),128))]))])])}const _t=E(U,[["render",at]]);export{_t as default};
