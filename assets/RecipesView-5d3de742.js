import{R as M}from"./vue-router-46224dd8.js";import{m as E}from"./index-b1b801c5.js";import{c as S}from"./carts-5862f2ca.js";import{n as D}from"./numberCommaMixin-e0aac39c.js";import{P as V}from"./PaginationComponent-13de0398.js";import{C}from"./collapse-6026b968.js";import{r as u,b as y,o as P,d as g,s as N,c as T,a as j}from"./db-143b9a4b.js";import{L as q}from"./index-fde5e204.js";import{w as p,v as z,d as G,m as b}from"./runtime-dom.esm-bundler-e140de91.js";import{_ as U}from"./loadingLogo-ea15f612.js";import{_ as A}from"./cake17-28d317b6.js";import{_ as H}from"./image5-4fc2427e.js";import{_ as F}from"./image4-1806383b.js";import{_ as K}from"./undraw_Page_not_found_re_e9o6-993b7155.js";import{_ as J,a7 as l,F as k,a9 as w,a8 as e,af as n,ab as h,aa as a,ad as d,ac as f,N as O,ae as L,r as R,o as r}from"./_plugin-vue_export-helper-d28549df.js";import"./_commonjsHelpers-042e6b4d.js";import"./base-component-5a126788.js";const W="/finalEasyBuyEasyMake/assets/allDessert1-fb69fd76.png",X="/finalEasyBuyEasyMake/assets/allDessert3-be510862.png",Y="/finalEasyBuyEasyMake/assets/mooncake1-18ed3215.png",Q="/finalEasyBuyEasyMake/assets/mooncake3-6e2f0ae6.png",Z="/finalEasyBuyEasyMake/assets/macaroon1-81d6a824.png",$="/finalEasyBuyEasyMake/assets/macaroon3-feb2704b.png",ee="/finalEasyBuyEasyMake/assets/donut1-25bdf9d6.png",te="/finalEasyBuyEasyMake/assets/donut4-dcebc977.png",se="/finalEasyBuyEasyMake/assets/cakeStr1-c2c82c24.png",oe="/finalEasyBuyEasyMake/assets/pie1-a63f5865.png",ie="/finalEasyBuyEasyMake/assets/pie3-504fdd30.png";const le={components:{RouterLink:M,PaginationComponent:V,Loading:q},mixins:[D],data(){return{costOrRateCollapse:{},highOrLowCollapse:{},recipes:[],selectCategory:"全部",selectItem:"全部",priceOrRate:"成本",highOrLow:"不拘",recipeSearchName:"",filterRecipes:[],bookMarks:[],thumbs:{},uid:"",search:!1,isLoading:!1,fullPage:!0}},methods:{...E(S,["toastMessage"]),getRecipes(){const i=u(g,"recipes/");y(i,s=>{this.recipes=s.val(),this.recipes=Object.entries(this.recipes).map(m=>(m[1].id=m[0],m[1])),console.log(this.recipes,"食譜資料");const _=u(g,"recipeThumbs/");y(_,m=>{this.thumbs=m.val(),console.log(this.thumbs,"所有讚"),this.recipes.forEach((t,c)=>{Object.keys(this.thumbs).forEach(x=>{t.id===x&&(this.recipes[c].thumbs=this.thumbs[t.id].thumbs)})}),this.recipes.forEach((t,c)=>{t.thumbs||(this.recipes[c].thumbs=0)}),console.log(this.recipes,"食譜"),this.filterRecipes=this.recipes,this.isLoading=!1,!this.$route.query.category&&this.$route.fullPath==="/recipes"?this.$refs.pagination.renderPage(1,this.filterRecipes):this.$route.query.category&&this.searchRecipes()})})},searchRecipes(){this.selectItem==="全部"?this.filterRecipes=this.recipes:this.selectItem!=="全部"&&(this.filterRecipes=this.recipes.filter(i=>i.category===this.selectItem)),this.priceOrRate==="成本"&&this.highOrLow!=="不拘"?this.highOrLow==="低到高"?this.filterRecipes=this.filterRecipes.sort((i,s)=>i.price-s.price):this.highOrLow==="高到低"&&(this.filterRecipes=this.filterRecipes.sort((i,s)=>s.price-i.price)):this.priceOrRate==="評價"&&this.highOrLow!=="不拘"&&(this.highOrLow==="低到高"?this.filterRecipes=this.filterRecipes.sort((i,s)=>i.thumbs-s.thumbs):this.highOrLow==="高到低"&&(this.filterRecipes=this.filterRecipes.sort((i,s)=>s.thumbs-i.thumbs))),this.filterRecipes=this.filterRecipes.filter(i=>i.title.match(this.recipeSearchName)),this.search=!0,this.$refs.pagination.renderPage(1,this.filterRecipes)},getBookmarks(){P(j,i=>{if(i){this.uid=i.uid,console.log(this.uid,"使用者已登入取得 uid");const s=u(g,"users/"+i.uid);y(s,_=>{this.user=_.val(),console.log(this.user,"讀取的資料");const m=u(g,`recipeBookmarks/${this.uid}`);y(m,t=>{this.bookMarks=t.val(),this.bookMarks&&(this.bookMarks=Object.keys(this.bookMarks)),console.log(this.bookMarks,"書籤")})})}else console.log("並未登入"),this.uid=null,this.user={}})},addBookmark(i){if(!this.uid){this.toastMessage("登入才可使用收藏功能","error");return}const s=u(g,`recipeBookmarks/${this.uid}/${i.id}`);N(s,i),this.toastMessage("收藏成功")},deleteBookmark(i){T(u(g,`recipeBookmarks/${this.uid}/${i}`)),this.toastMessage("刪除收藏")}},mounted(){this.isLoading=!0,this.costOrRateCollapse=new C(this.$refs.costOrRateCollapse,{toggle:!1,parent:"#myGroup"}),this.highOrLowCollapse=new C(this.$refs.highOrLowCollapse,{toggle:!1,parent:"#myGroup"}),this.$route.query.category&&(this.selectItem=this.$route.query.category,this.highOrLow=this.$route.query.valueHighOrLow,this.priceOrRate=this.$route.query.valuePriceOrRate,this.recipeSearchName=this.$route.query.searchName),this.getBookmarks(),this.getRecipes()},watch:{selectCategory(){this.recipeSearchName="",this.selectCategory==="全部"?(this.selectItem="全部",this.filterRecipes=this.recipes,this.$refs.pagination.renderPage(1,this.filterRecipes)):this.selectCategory!=="全部"&&(this.selectItem=this.selectCategory,this.filterRecipes=this.recipes.filter(i=>i.category===this.selectItem),console.log(this.filterRecipes,"篩選結果")),this.$refs.pagination.renderPage(1,this.filterRecipes)},priceOrRate(){this.costOrRateCollapse.hide()},highOrLow(){this.highOrLowCollapse.hide()},filterRecipes(){this.costOrRateCollapse.hide(),this.highOrLowCollapse.hide()}}},re={class:"",style:{"overflow-x":"hidden"}},ne=e("div",{class:"d-flex flex-column align-items-center py-10"},[e("img",{src:U,class:"loadingLogo mb-3",style:{width:"150px"},alt:""}),e("h1",{class:"text-center fw-bold text-blue"},[e("span",{class:"me-1 animate-text"},"L"),e("span",{class:"mx-1 animate-text"},"o"),e("span",{class:"mx-1 animate-text"},"a"),e("span",{class:"mx-1 animate-text"},"d"),e("span",{class:"mx-1 animate-text"},"i"),e("span",{class:"mx-1 animate-text"},"n"),e("span",{class:"mx-1 animate-text"},"g"),e("span",{class:"mx-2 animate-text"},"."),e("span",{class:"me-2 animate-text"},"."),e("span",{class:"animate-text"},".")])],-1),ae=e("section",{class:"bannerBg",style:{"background-image":"url('https://images.unsplash.com/photo-1681923665434-b1ae711f3918?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80')"}},[e("div",{class:"mask"},[e("div",{class:"text",style:{background:"linear-gradient(to bottom, white 50% , #4572c2 50%)","-webkit-background-clip":"text"}}," 甜點種類 ")])],-1),ce={class:"container mt-4"},he={class:"position-relative categorySelector row row-cols-6 gy-2 list-unstyled border-bottom"},me={key:0,class:"categoryImg1",src:W,alt:""},de={key:1,src:X,alt:""},pe=e("span",{class:"titleSize"},[a("所有"),e("br",{class:"d-lg-none"}),a("甜點")],-1),ue={key:0,class:"categoryImg2",src:Y,alt:""},ge={key:1,src:Q,alt:""},fe=e("span",{class:"titleSize"},[a("台式"),e("br",{class:"d-lg-none"}),a("甜點")],-1),be={key:0,class:"categoryImg3",src:Z,alt:""},_e={key:1,src:$,alt:""},ye=e("span",{class:"titleSize"},[a("法式"),e("br",{class:"d-lg-none"}),a("甜點")],-1),ke={key:0,class:"categoryImg4",src:ee,alt:""},xe={key:1,src:te,alt:""},we=e("span",{class:"titleSize"},[a("美式"),e("br",{class:"d-lg-none"}),a("甜點")],-1),Re={key:0,class:"categoryImg5",src:se,alt:""},ve={key:1,src:A,alt:""},Ie=e("span",{class:"titleSize"},[a("日式"),e("br",{class:"d-lg-none"}),a("甜點")],-1),Ce={key:0,class:"categoryImg6",src:oe,alt:""},Oe={key:1,src:ie,alt:""},Le=e("span",{class:"titleSize"},[a("義式"),e("br",{class:"d-lg-none"}),a("甜點")],-1),Be={class:"d-none d-lg-block container selectProduct my-5"},Me={class:"input-group"},Ee=e("i",{class:"bi bi-caret-down-fill"},null,-1),Se={class:"ms-2 fw-bold"},De=e("i",{class:"bi bi-caret-down-fill"},null,-1),Ve={class:"ms-2 fw-bold"},Pe=e("span",{class:"material-icons-outlined text-blue"},"search",-1),Ne=[Pe],Te={class:"row g-0",id:"myGroup"},je={class:"col-2"},qe={ref:"costOrRateCollapse",class:"collapse"},ze={class:"card card-body border-0",style:{border:"0px !important"}},Ge={class:"btn-group-vertical",role:"group","aria-label":"Vertical radio toggle button group"},Ue=e("label",{class:"btn btn-outline-blue",for:"selectprice"},"成本",-1),Ae=e("label",{class:"btn btn-outline-blue",for:"selectRate"},"評價",-1),He={class:"col-2"},Fe={ref:"highOrLowCollapse",class:"collapse"},Ke={class:"card card-body border-0",style:{border:"0px !important"}},Je={class:"btn-group-vertical",role:"group","aria-label":"Vertical radio toggle button group"},We=e("label",{class:"btn btn-outline-blue",for:"noDifference"},"不拘",-1),Xe=e("label",{class:"btn btn-outline-blue",for:"highToLow"},"高到低",-1),Ye=e("label",{class:"btn btn-outline-blue",for:"lowToHigh"},"低到高",-1),Qe={class:"container"},Ze={key:0,class:"row row-cols-lg-4 row-cols-2 gy-4"},$e={class:"card position-relative bg-transparent",style:{"border-radius":"0",border:"1px solid transparent"}},et={class:"cardImg",style:{}},tt=["src"],st={class:"card-text mb-0"},ot=e("p",{class:"detail d-none d-lg-block position-absolute fw-bold",style:{top:"35%",left:"50%",transform:"translateX(-50%)","letter-spacing":"5px"}},"查看詳細食譜",-1),it=["onClick"],lt=e("img",{src:H},null,-1),rt=[lt],nt=["onClick"],at=e("img",{src:F},null,-1),ct=[at],ht={style:{"pointer-events":"none"},class:"cardTextCategory badge rounded-pill bg-blue mt-4 border-0 m-3 position-absolute start-0"},mt={class:"d-flex justify-content-between align-items-center fw-bold"},dt={class:"cardTextTitle"},pt={class:"cardTextPrice d-flex align-items-lg-center align-items-end"},ut={class:""},gt={class:"starRates mb-0 ms-auto"},ft={class:"me-1"},bt=e("i",{class:"bi bi-hand-thumbs-up-fill"},null,-1),_t={key:1,class:"py-10"},yt=e("img",{src:K,class:"mb-3",alt:"",style:{height:"250px",display:"block",margin:"auto"}},null,-1),kt=e("h2",{class:"text-center"},"查無食譜，請您重新查詢",-1),xt=[yt,kt];function wt(i,s,_,m,t,c){const x=R("loading"),v=R("RouterLink"),B=R("PaginationComponent");return r(),l("div",re,[k(x,{active:t.isLoading,"onUpdate:active":s[0]||(s[0]=o=>t.isLoading=o),"can-cancel":!1,"is-full-page":t.fullPage,"lock-scroll":!0},{default:w(()=>[ne]),_:1},8,["active","is-full-page"]),ae,e("section",ce,[e("ul",he,[e("li",{class:n(["col d-flex align-items-center justify-content-center",{liDisabled:t.selectItem==="全部"}])},[e("a",{href:"#",onClick:s[1]||(s[1]=p(()=>t.selectCategory="全部",["prevent"])),class:n(["text-decoration-none d-flex flex-column align-items-center link-secondary",{"fw-bold":t.selectItem==="全部","link-blue":t.selectItem==="全部"}])},[t.selectItem!=="全部"?(r(),l("img",me)):t.selectItem==="全部"?(r(),l("img",de)):h("",!0),pe],2)],2),e("li",{class:n(["col d-flex align-items-center justify-content-center",{liDisabled:t.selectItem==="台式甜點"}])},[e("a",{href:"#",onClick:s[2]||(s[2]=p(()=>t.selectCategory="台式甜點",["prevent"])),class:n(["text-decoration-none d-flex flex-column align-items-center link-secondary",{"fw-bold":t.selectItem==="台式甜點","link-blue":t.selectItem==="台式甜點"}])},[t.selectItem!=="台式甜點"?(r(),l("img",ue)):t.selectItem==="台式甜點"?(r(),l("img",ge)):h("",!0),fe],2)],2),e("li",{class:n(["col d-flex align-items-center justify-content-center",{liDisabled:t.selectItem==="法式甜點"}])},[e("a",{href:"#",onClick:s[3]||(s[3]=p(()=>t.selectCategory="法式甜點",["prevent"])),class:n(["text-decoration-none d-flex flex-column align-items-center link-secondary",{"fw-bold":t.selectItem==="法式甜點","link-blue":t.selectItem==="法式甜點"}])},[t.selectItem!=="法式甜點"?(r(),l("img",be)):t.selectItem==="法式甜點"?(r(),l("img",_e)):h("",!0),ye],2)],2),e("li",{class:n(["col d-flex align-items-center justify-content-center",{liDisabled:t.selectItem==="美式甜點"}])},[e("a",{href:"#",onClick:s[4]||(s[4]=p(()=>t.selectCategory="美式甜點",["prevent"])),class:n(["text-decoration-none d-flex flex-column align-items-center link-secondary",{"fw-bold":t.selectItem==="美式甜點","link-blue":t.selectItem==="美式甜點"}])},[t.selectItem!=="美式甜點"?(r(),l("img",ke)):t.selectItem==="美式甜點"?(r(),l("img",xe)):h("",!0),we],2)],2),e("li",{class:n(["col d-flex align-items-center justify-content-center",{liDisabled:t.selectItem==="日式甜點"}])},[e("a",{href:"#",onClick:s[5]||(s[5]=p(()=>t.selectCategory="日式甜點",["prevent"])),class:n(["text-decoration-none d-flex flex-column align-items-center link-secondary",{"fw-bold":t.selectItem==="日式甜點","link-blue":t.selectItem==="日式甜點"}])},[t.selectItem!=="日式甜點"?(r(),l("img",Re)):t.selectItem==="日式甜點"?(r(),l("img",ve)):h("",!0),Ie],2)],2),e("li",{class:n(["col d-flex align-items-center justify-content-center",{liDisabled:t.selectItem==="義式甜點"}])},[e("a",{href:"#",onClick:s[6]||(s[6]=p(()=>t.selectCategory="義式甜點",["prevent"])),class:n(["text-decoration-none d-flex flex-column align-items-center link-secondary",{"fw-bold":t.selectItem==="義式甜點","link-blue":t.selectItem==="義式甜點"}])},[t.selectItem!=="義式甜點"?(r(),l("img",Ce)):t.selectItem==="義式甜點"?(r(),l("img",Oe)):h("",!0),Le],2)],2),e("li",{class:n(["redLine bg-blue position-absolute",{activeAll:t.selectItem==="全部",activeT:t.selectItem==="台式甜點",activeF:t.selectItem==="法式甜點",activeA:t.selectItem==="美式甜點",activeJ:t.selectItem==="日式甜點",activeI:t.selectItem==="義式甜點"}]),style:{height:"2px",bottom:"0px",left:"5.5%"}},null,2)])]),e("section",Be,[e("div",Me,[e("a",{class:"btn btn-outline-blue px-5",onClick:s[7]||(s[7]=()=>this.costOrRateCollapse.toggle())},[a("篩選對象 "),Ee,e("span",Se,d(t.priceOrRate),1)]),e("button",{class:"btn btn-outline-blue px-5",type:"button",onClick:s[8]||(s[8]=()=>this.highOrLowCollapse.toggle())},[a("篩選值 "),De,e("span",Ve,d(t.highOrLow),1)]),f(e("input",{type:"search",class:"form-control border-blue border-end-0",placeholder:"請輸入食譜名稱","aria-label":"Example text with two button addons","onUpdate:modelValue":s[9]||(s[9]=o=>t.recipeSearchName=o),onKeyup:s[10]||(s[10]=G((...o)=>c.searchRecipes&&c.searchRecipes(...o),["enter"]))},null,544),[[z,t.recipeSearchName]]),e("button",{type:"submit",class:"btn border border-blue border-start-0 bg-transparent d-flex",onClick:s[11]||(s[11]=p((...o)=>c.searchRecipes&&c.searchRecipes(...o),["prevent"]))},Ne)]),e("div",Te,[e("div",je,[e("div",qe,[e("div",ze,[e("div",Ge,[f(e("input",{type:"radio",class:"btn-check",value:"成本",name:"priceOrRate",id:"selectprice",autocomplete:"off","onUpdate:modelValue":s[12]||(s[12]=o=>t.priceOrRate=o)},null,512),[[b,t.priceOrRate]]),Ue,f(e("input",{type:"radio",class:"btn-check",value:"評價",name:"priceOrRate",id:"selectRate",autocomplete:"off","onUpdate:modelValue":s[13]||(s[13]=o=>t.priceOrRate=o)},null,512),[[b,t.priceOrRate]]),Ae])])],512)]),e("div",He,[e("div",Fe,[e("div",Ke,[e("div",Je,[f(e("input",{type:"radio",class:"btn-check",value:"不拘",name:"highOrLow",id:"noDifference",autocomplete:"off",checked:"","onUpdate:modelValue":s[14]||(s[14]=o=>t.highOrLow=o)},null,512),[[b,t.highOrLow]]),We,f(e("input",{type:"radio",class:"btn-check",value:"高到低",name:"highOrLow",id:"highToLow",autocomplete:"off","onUpdate:modelValue":s[15]||(s[15]=o=>t.highOrLow=o)},null,512),[[b,t.highOrLow]]),Xe,f(e("input",{type:"radio",class:"btn-check",value:"低到高",name:"highOrLow",id:"lowToHigh",autocomplete:"off","onUpdate:modelValue":s[16]||(s[16]=o=>t.highOrLow=o)},null,512),[[b,t.highOrLow]]),Ye])])],512)])])]),e("section",Qe,[t.filterRecipes.length?(r(),l("div",Ze,[(r(!0),l(O,null,L(this.$refs.pagination.pageProducts,o=>(r(),l("div",{class:"col text-decoration-none",key:o.id},[e("div",$e,[e("div",et,[k(v,{to:`/recipes/${o.id}`,class:"enlargeImg"},{default:w(()=>[e("img",{src:o.image,class:"card-img",style:{"object-fit":"cover","max-width":"100%","max-height":"100%","border-radius":"0"},alt:""},null,8,tt)]),_:2},1032,["to"])]),e("h5",st,[ot,e("button",{type:"button",class:"position-absolute bookmarkBtn border-0 bg-transparent end-0 top-0 m-lg-3 m-2",onClick:()=>c.addBookmark(o)},rt,8,it),(r(!0),l(O,null,L(t.bookMarks,I=>(r(),l("div",{key:I+4567},[I===o.id?(r(),l("button",{key:0,type:"button",class:"position-absolute deleteBookmarkBtn border-0 bg-transparent end-0 top-0 m-lg-3 m-2",onClick:()=>c.deleteBookmark(o.id)},ct,8,nt)):h("",!0)]))),128)),e("span",ht,d(o.category),1)]),k(v,{to:`/recipes/${o.id}`,class:"card-footer bg-transparent border-0 pt-lg-3 text-decoration-none link-darkBrown"},{default:w(()=>[e("h5",mt,[e("span",dt,d(o.title),1)]),e("div",pt,[e("div",ut,[o.total?(r(),l("del",{key:0,class:n(["me-2 text-muted d-block d-lg-inline-block",{"d-none":o.price===o.total}])},"NT$ "+d(i.numberComma(o.total)),3)):h("",!0),e("span",null,[o.price?(r(),l("span",{key:0,class:n({"text-danger":o.price!==o.total,"fw-bold":o.price!==o.total})},"NT$ "+d(i.numberComma(o.price)),3)):h("",!0),a(" / "+d(o.content),1)])]),e("h5",gt,[e("p",{class:n(["mb-0 badge rounded-pill border d-flex align-items-center",{"border-blue":o.thumbs!==0,"border-lightBrownGray":o.thumbs===0,"text-blue":o.thumbs!==0,"text-lightBrownGray":o.thumbs===0}])},[e("span",ft,d(o.thumbs),1),bt],2)])])]),_:2},1032,["to"])])]))),128))])):!t.filterRecipes.length&&t.search?(r(),l("div",_t,xt)):h("",!0),k(B,{ref:"pagination","price-or-rate":t.priceOrRate,"filter-recipes":t.filterRecipes,class:"mb-5"},null,8,["price-or-rate","filter-recipes"])])])}const zt=J(le,[["render",wt]]);export{zt as default};
