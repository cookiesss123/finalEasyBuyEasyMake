import{R as E}from"./vue-router-8d0a8096.js";import{m as M}from"./index-c9654e74.js";import{c as S}from"./carts-48386189.js";import{n as P}from"./numberCommaMixin-e0aac39c.js";import{P as V}from"./PaginationComponent-d6bbab82.js";import{C as O,_ as N}from"./icon-searchMobile-657ef2e6.js";import{r as p,b,o as T,d as g,s as j,c as q,a as U}from"./db-143b9a4b.js";import{L as D}from"./index-cef339c7.js";import{w as m,v as G,d as H,m as f}from"./runtime-dom.esm-bundler-05da3382.js";import{_ as A}from"./loadingLogo-3bb466c0.js";import{_ as F}from"./image5-4fc2427e.js";import{_ as K}from"./image4-1806383b.js";import{_ as z}from"./undraw_Page_not_found_re_e9o6-de2ef5f7.js";import{_ as J,a7 as r,F as y,a9 as x,a8 as e,ag as n,ab as c,aa as w,ad as d,ac as u,N as I,ae as L,r as R,o as l}from"./_plugin-vue_export-helper-e5f607bc.js";import"./_commonjsHelpers-042e6b4d.js";import"./base-component-5a126788.js";const Q="/finalEasyBuyEasyMake/assets/SDSS-a28503b5.png",W="/finalEasyBuyEasyMake/assets/mooncake1-18ed3215.png",X="/finalEasyBuyEasyMake/assets/mooncake2-5ba67f58.png",Y="/finalEasyBuyEasyMake/assets/macaroon1-15bf948f.png",Z="/finalEasyBuyEasyMake/assets/macaroon2-785737aa.png",$="/finalEasyBuyEasyMake/assets/donut1-364e65f4.png",ee="/finalEasyBuyEasyMake/assets/donut2-68875863.png",te="/finalEasyBuyEasyMake/assets/mochi1-8d70c660.png",se="/finalEasyBuyEasyMake/assets/mochi2-a118ee28.png",oe="/finalEasyBuyEasyMake/assets/tiramisu1-cf9b6bcd.png",ie="/finalEasyBuyEasyMake/assets/tiramisu2-ed76183b.png";const re={components:{RouterLink:E,PaginationComponent:V,Loading:D},mixins:[P],data(){return{costOrRateCollapse:{},highOrLowCollapse:{},recipes:[],selectCategory:"全部",selectItem:"全部",priceOrRate:"成本",highOrLow:"不拘",recipeSearchName:"",filterRecipes:[],bookMarks:[],thumbs:{},uid:"",search:!1,bannerImg:Q,isLoading:!1,fullPage:!0}},methods:{...M(S,["toastMessage"]),getRecipes(){const i=p(g,"recipes/");b(i,s=>{this.recipes=s.val(),this.recipes=Object.entries(this.recipes).map(h=>(h[1].id=h[0],h[1])),console.log(this.recipes,"食譜資料");const _=p(g,"recipeThumbs/");b(_,h=>{this.thumbs=h.val(),console.log(this.thumbs,"所有讚"),this.recipes.forEach((t,a)=>{Object.keys(this.thumbs).forEach(k=>{t.id===k&&(this.recipes[a].thumbs=this.thumbs[t.id].thumbs)})}),this.recipes.forEach((t,a)=>{t.thumbs||(this.recipes[a].thumbs=0)}),console.log(this.recipes,"食譜"),this.filterRecipes=this.recipes,this.isLoading=!1,!this.$route.query.category&&this.$route.fullPath==="/recipes"?this.$refs.pagination.renderPage(1,this.filterRecipes):this.$route.query.category&&this.searchRecipes()})})},searchRecipes(){this.selectItem==="全部"?this.filterRecipes=this.recipes:this.selectItem!=="全部"&&(this.filterRecipes=this.recipes.filter(i=>i.category===this.selectItem)),this.priceOrRate==="成本"&&this.highOrLow!=="不拘"?this.highOrLow==="低到高"?this.filterRecipes=this.filterRecipes.sort((i,s)=>i.price-s.price):this.highOrLow==="高到低"&&(this.filterRecipes=this.filterRecipes.sort((i,s)=>s.price-i.price)):this.priceOrRate==="評價"&&this.highOrLow!=="不拘"&&(this.highOrLow==="低到高"?this.filterRecipes=this.filterRecipes.sort((i,s)=>i.thumbs-s.thumbs):this.highOrLow==="高到低"&&(this.filterRecipes=this.filterRecipes.sort((i,s)=>s.thumbs-i.thumbs))),this.filterRecipes=this.filterRecipes.filter(i=>i.title.match(this.recipeSearchName)),this.search=!0,this.$refs.pagination.renderPage(1,this.filterRecipes)},getBookmarks(){T(U,i=>{if(i){this.uid=i.uid,console.log(this.uid,"使用者已登入取得 uid");const s=p(g,"users/"+i.uid);b(s,_=>{this.user=_.val(),console.log(this.user,"讀取的資料");const h=p(g,`recipeBookmarks/${this.uid}`);b(h,t=>{this.bookMarks=t.val(),this.bookMarks&&(this.bookMarks=Object.keys(this.bookMarks)),console.log(this.bookMarks,"書籤")})})}else console.log("並未登入"),this.uid=null,this.user={}})},addBookmark(i){if(!this.uid){this.toastMessage("登入才可使用收藏功能","error");return}const s=p(g,`recipeBookmarks/${this.uid}/${i.id}`);j(s,i),this.toastMessage("收藏成功")},deleteBookmark(i){q(p(g,`recipeBookmarks/${this.uid}/${i}`)),this.toastMessage("刪除收藏")}},mounted(){this.isLoading=!0,this.costOrRateCollapse=new O(this.$refs.costOrRateCollapse,{toggle:!1,parent:"#myGroup"}),this.highOrLowCollapse=new O(this.$refs.highOrLowCollapse,{toggle:!1,parent:"#myGroup"}),this.$route.query.category&&(this.selectItem=this.$route.query.category,this.highOrLow=this.$route.query.valueHighOrLow,this.priceOrRate=this.$route.query.valuePriceOrRate,this.recipeSearchName=this.$route.query.searchName),this.getBookmarks(),this.getRecipes()},watch:{selectCategory(){this.recipeSearchName="",this.selectCategory==="全部"?(this.selectItem="全部",this.filterRecipes=this.recipes,this.$refs.pagination.renderPage(1,this.filterRecipes)):this.selectCategory!=="全部"&&(this.selectItem=this.selectCategory,this.filterRecipes=this.recipes.filter(i=>i.category===this.selectItem),console.log(this.filterRecipes,"篩選結果")),this.$refs.pagination.renderPage(1,this.filterRecipes)},priceOrRate(){this.costOrRateCollapse.hide()},highOrLow(){this.highOrLowCollapse.hide()},filterRecipes(){this.costOrRateCollapse.hide(),this.highOrLowCollapse.hide()}}},le={class:""},ne=e("div",{class:"d-flex flex-column align-items-center py-10"},[e("img",{src:A,class:"loadingLogo mb-3",style:{width:"150px"},alt:""}),e("h1",{class:"text-center fw-bold text-lightBrown"},[e("span",{class:"me-1 animate-text"},"L"),e("span",{class:"mx-1 animate-text"},"o"),e("span",{class:"mx-1 animate-text"},"a"),e("span",{class:"mx-1 animate-text"},"d"),e("span",{class:"mx-1 animate-text"},"i"),e("span",{class:"mx-1 animate-text"},"n"),e("span",{class:"mx-1 animate-text"},"g"),e("span",{class:"mx-2 animate-text"},"."),e("span",{class:"me-2 animate-text"},"."),e("span",{class:"animate-text"},".")])],-1),ae=e("section",{class:"bannerBg"},[e("div",{class:"mask"},[e("div",{class:"text",style:{}}," 甜點種類 ")])],-1),ce={class:"container mt-4"},he={class:"categorySelector row row-cols-1 gy-2 row-cols-lg-6 list-unstyled"},de={class:"col d-flex border-end align-items-center justify-content-center"},me=e("span",{class:"material-icons-outlined fs-1",style:{"border-bottom":"2px solid transparent !important"}},"apps",-1),pe={class:"col d-flex border-end align-items-center justify-content-center"},ge={key:0,class:"categoryImg2",src:W,style:{width:"40px"},alt:""},ue={key:1,src:X,style:{width:"40px"},alt:""},fe={class:"col d-flex border-end align-items-center justify-content-center"},_e={key:0,class:"categoryImg3",src:Y,style:{width:"40px"},alt:""},be={key:1,src:Z,style:{width:"40px"},alt:""},ye={class:"col d-flex border-end align-items-center justify-content-center"},ke={key:0,class:"categoryImg4",src:$,style:{width:"40px"},alt:""},xe={key:1,src:ee,style:{width:"40px"},alt:""},we={class:"col d-flex border-end align-items-center justify-content-center"},Re={key:0,class:"categoryImg5",src:te,style:{width:"40px"},alt:""},ve={key:1,src:se,style:{width:"40px"},alt:""},Ce={class:"col d-flex align-items-center justify-content-center"},Oe={key:0,class:"categoryImg6",src:oe,style:{width:"40px"},alt:""},Ie={key:1,src:ie,style:{width:"40px"},alt:""},Le={class:"d-none d-lg-block container selectProduct my-5"},Be={class:"input-group"},Ee=e("i",{class:"bi bi-caret-down-fill"},null,-1),Me={class:"ms-2 fw-bold"},Se=e("i",{class:"bi bi-caret-down-fill"},null,-1),Pe={class:"ms-2 fw-bold"},Ve=e("img",{src:N,style:{height:"25px"},alt:""},null,-1),Ne=[Ve],Te={class:"row g-0",id:"myGroup"},je={class:"col-2"},qe={ref:"costOrRateCollapse",class:"collapse"},Ue={class:"card card-body border-0",style:{border:"0px !important"}},De={class:"btn-group-vertical",role:"group","aria-label":"Vertical radio toggle button group"},Ge=e("label",{class:"btn btn-outline-red",for:"selectprice"},"成本",-1),He=e("label",{class:"btn btn-outline-red",for:"selectRate"},"評價",-1),Ae={class:"col-2"},Fe={ref:"highOrLowCollapse",class:"collapse"},Ke={class:"card card-body border-0",style:{border:"0px !important"}},ze={class:"btn-group-vertical",role:"group","aria-label":"Vertical radio toggle button group"},Je=e("label",{class:"btn btn-outline-red",for:"noDifference"},"不拘",-1),Qe=e("label",{class:"btn btn-outline-red",for:"highToLow"},"高到低",-1),We=e("label",{class:"btn btn-outline-red",for:"lowToHigh"},"低到高",-1),Xe={class:"container"},Ye={key:0,class:"row row-cols-lg-4 row-cols-2 gy-4"},Ze={class:"card position-relative bg-transparent",style:{"border-radius":"0",border:"1px solid transparent"}},$e={class:"cardImg",style:{}},et=["src"],tt={class:"card-text mb-0"},st=["onClick"],ot=e("img",{src:F},null,-1),it=[ot],rt=["onClick"],lt=e("img",{src:K},null,-1),nt=[lt],at={style:{"pointer-events":"none"},class:"cardTextCategory badge rounded-pill bg-red mt-4 border-0 m-3 position-absolute start-0"},ct={class:"d-flex justify-content-between align-items-center fw-bold"},ht={class:"cardTextTitle"},dt={class:"cardTextPrice d-flex align-items-lg-center align-items-end"},mt={class:""},pt={class:"starRates mb-0 ms-auto"},gt={class:"me-1"},ut=e("i",{class:"bi bi-hand-thumbs-up-fill"},null,-1),ft={key:1,class:"py-10"},_t=e("img",{src:z,class:"mb-3",alt:"",style:{height:"250px",display:"block",margin:"auto"}},null,-1),bt=e("h2",{class:"text-center"},"查無食譜，請您重新查詢",-1),yt=[_t,bt];function kt(i,s,_,h,t,a){const k=R("loading"),v=R("RouterLink"),B=R("PaginationComponent");return l(),r("div",le,[y(k,{active:t.isLoading,"onUpdate:active":s[0]||(s[0]=o=>t.isLoading=o),"can-cancel":!1,"is-full-page":t.fullPage,"lock-scroll":!0},{default:x(()=>[ne]),_:1},8,["active","is-full-page"]),ae,e("section",ce,[e("ul",he,[e("li",de,[e("a",{href:"#",onClick:s[1]||(s[1]=m(()=>t.selectCategory="全部",["prevent"])),class:n(["text-decoration-none d-flex align-items-center link-secondary",{"fw-bold":t.selectItem==="全部","link-red":t.selectItem==="全部"}])},[me,e("span",{class:n([{dottedStyle:t.selectItem==="全部"},"fs-4"])},"全部",2)],2)]),e("li",pe,[e("a",{href:"#",onClick:s[2]||(s[2]=m(()=>t.selectCategory="台式甜點",["prevent"])),class:n(["text-decoration-none d-flex align-items-center link-secondary",{"fw-bold":t.selectItem==="台式甜點","link-red":t.selectItem==="台式甜點"}])},[t.selectItem!=="台式甜點"?(l(),r("img",ge)):t.selectItem==="台式甜點"?(l(),r("img",ue)):c("",!0),e("span",{class:n([{dottedStyle:t.selectItem==="台式甜點"},"fs-4 ms-1"])},"台式甜點",2)],2)]),e("li",fe,[e("a",{href:"#",onClick:s[3]||(s[3]=m(()=>t.selectCategory="法式甜點",["prevent"])),class:n(["text-decoration-none d-flex align-items-center link-secondary",{"fw-bold":t.selectItem==="法式甜點","link-red":t.selectItem==="法式甜點"}])},[t.selectItem!=="法式甜點"?(l(),r("img",_e)):t.selectItem==="法式甜點"?(l(),r("img",be)):c("",!0),e("span",{class:n([{dottedStyle:t.selectItem==="法式甜點"},"fs-4 ms-1"])},"法式甜點",2)],2)]),e("li",ye,[e("a",{href:"#",onClick:s[4]||(s[4]=m(()=>t.selectCategory="美式甜點",["prevent"])),class:n(["text-decoration-none d-flex align-items-center link-secondary",{"fw-bold":t.selectItem==="美式甜點","link-red":t.selectItem==="美式甜點"}])},[t.selectItem!=="美式甜點"?(l(),r("img",ke)):t.selectItem==="美式甜點"?(l(),r("img",xe)):c("",!0),e("span",{class:n([{dottedStyle:t.selectItem==="美式甜點"},"fs-4 ms-1"])},"美式甜點",2)],2)]),e("li",we,[e("a",{href:"#",onClick:s[5]||(s[5]=m(()=>t.selectCategory="日式甜點",["prevent"])),class:n(["text-decoration-none d-flex align-items-center link-secondary",{"fw-bold":t.selectItem==="日式甜點","link-red":t.selectItem==="日式甜點"}])},[t.selectItem!=="日式甜點"?(l(),r("img",Re)):t.selectItem==="日式甜點"?(l(),r("img",ve)):c("",!0),e("span",{class:n([{dottedStyle:t.selectItem==="日式甜點"},"fs-4 ms-1"])},"日式甜點",2)],2)]),e("li",Ce,[e("a",{href:"#",onClick:s[6]||(s[6]=m(()=>t.selectCategory="義式甜點",["prevent"])),class:n(["text-decoration-none d-flex align-items-center link-secondary",{"fw-bold":t.selectItem==="義式甜點","link-red":t.selectItem==="義式甜點"}])},[t.selectItem!=="義式甜點"?(l(),r("img",Oe)):t.selectItem==="義式甜點"?(l(),r("img",Ie)):c("",!0),e("span",{class:n([{dottedStyle:t.selectItem==="義式甜點"},"fs-4 ms-1"])},"義式甜點",2)],2)])])]),e("section",Le,[e("div",Be,[e("a",{class:"btn btn-outline-red px-5",onClick:s[7]||(s[7]=()=>this.costOrRateCollapse.toggle())},[w("篩選對象 "),Ee,e("span",Me,d(t.priceOrRate),1)]),e("button",{class:"btn btn-outline-red px-5",type:"button",onClick:s[8]||(s[8]=()=>this.highOrLowCollapse.toggle())},[w("篩選值 "),Se,e("span",Pe,d(t.highOrLow),1)]),u(e("input",{type:"search",class:"form-control border-red border-end-0",placeholder:"請輸入食譜名稱","aria-label":"Example text with two button addons","onUpdate:modelValue":s[9]||(s[9]=o=>t.recipeSearchName=o),onKeyup:s[10]||(s[10]=H((...o)=>a.searchRecipes&&a.searchRecipes(...o),["enter"]))},null,544),[[G,t.recipeSearchName]]),e("button",{type:"submit",class:"btn border border-red border-start-0 bg-transparent",onClick:s[11]||(s[11]=m((...o)=>a.searchRecipes&&a.searchRecipes(...o),["prevent"]))},Ne)]),e("div",Te,[e("div",je,[e("div",qe,[e("div",Ue,[e("div",De,[u(e("input",{type:"radio",class:"btn-check",value:"成本",name:"priceOrRate",id:"selectprice",autocomplete:"off","onUpdate:modelValue":s[12]||(s[12]=o=>t.priceOrRate=o)},null,512),[[f,t.priceOrRate]]),Ge,u(e("input",{type:"radio",class:"btn-check",value:"評價",name:"priceOrRate",id:"selectRate",autocomplete:"off","onUpdate:modelValue":s[13]||(s[13]=o=>t.priceOrRate=o)},null,512),[[f,t.priceOrRate]]),He])])],512)]),e("div",Ae,[e("div",Fe,[e("div",Ke,[e("div",ze,[u(e("input",{type:"radio",class:"btn-check",value:"不拘",name:"highOrLow",id:"noDifference",autocomplete:"off",checked:"","onUpdate:modelValue":s[14]||(s[14]=o=>t.highOrLow=o)},null,512),[[f,t.highOrLow]]),Je,u(e("input",{type:"radio",class:"btn-check",value:"高到低",name:"highOrLow",id:"highToLow",autocomplete:"off","onUpdate:modelValue":s[15]||(s[15]=o=>t.highOrLow=o)},null,512),[[f,t.highOrLow]]),Qe,u(e("input",{type:"radio",class:"btn-check",value:"低到高",name:"highOrLow",id:"lowToHigh",autocomplete:"off","onUpdate:modelValue":s[16]||(s[16]=o=>t.highOrLow=o)},null,512),[[f,t.highOrLow]]),We])])],512)])])]),e("section",Xe,[t.filterRecipes.length?(l(),r("div",Ye,[(l(!0),r(I,null,L(this.$refs.pagination.pageProducts,o=>(l(),r("div",{class:"col text-decoration-none",key:o.id},[e("div",Ze,[e("div",$e,[y(v,{to:`/recipes/${o.id}`,class:"enlargeImg"},{default:x(()=>[e("img",{src:o.image,class:"card-img",style:{"object-fit":"cover","max-width":"100%","max-height":"100%","border-radius":"0"},alt:""},null,8,et)]),_:2},1032,["to"])]),e("h5",tt,[e("button",{type:"button",class:"position-absolute bookmarkBtn border-0 bg-transparent end-0 top-0 m-lg-3 m-2",onClick:()=>a.addBookmark(o)},it,8,st),(l(!0),r(I,null,L(t.bookMarks,C=>(l(),r("div",{key:C+4567},[C===o.id?(l(),r("button",{key:0,type:"button",class:"position-absolute deleteBookmarkBtn border-0 bg-transparent end-0 top-0 m-lg-3 m-2",onClick:()=>a.deleteBookmark(o.id)},nt,8,rt)):c("",!0)]))),128)),e("span",at,d(o.category),1)]),y(v,{to:`/recipes/${o.id}`,class:"card-footer bg-transparent border-0 pt-lg-3 text-decoration-none link-darkBrown"},{default:x(()=>[e("h5",ct,[e("span",ht,d(o.title),1)]),e("div",dt,[e("div",mt,[o.total?(l(),r("del",{key:0,class:n(["me-2 text-muted d-block d-lg-inline-block",{"d-none":o.price===o.total}])},"NT$ "+d(i.numberComma(o.total)),3)):c("",!0),e("span",null,[o.price?(l(),r("span",{key:0,class:n({"text-danger":o.price!==o.total,"fw-bold":o.price!==o.total})},"NT$ "+d(i.numberComma(o.price)),3)):c("",!0),w(" / "+d(o.content),1)])]),e("h5",pt,[e("p",{class:n(["mb-0 badge rounded-pill border d-flex align-items-center",{"border-red":o.thumbs!==0,"border-lightBrownGray":o.thumbs===0,"text-red":o.thumbs!==0,"text-lightBrownGray":o.thumbs===0}])},[e("span",gt,d(o.thumbs),1),ut],2)])])]),_:2},1032,["to"])])]))),128))])):!t.filterRecipes.length&&t.search?(l(),r("div",ft,yt)):c("",!0),y(B,{ref:"pagination","price-or-rate":t.priceOrRate,"filter-recipes":t.filterRecipes},null,8,["price-or-rate","filter-recipes"])])])}const jt=J(re,[["render",kt]]);export{jt as default};
