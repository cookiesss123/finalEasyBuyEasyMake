import{R as E}from"./vue-router-8d0a8096.js";import{m as M}from"./index-f77dcddc.js";import{c as S}from"./carts-d5b2a762.js";import{n as P}from"./numberCommaMixin-e0aac39c.js";import{P as V}from"./PaginationComponent-d6bbab82.js";import{C as O,_ as N}from"./icon-searchMobile-657ef2e6.js";import{r as g,b as y,o as T,d as u,s as j,c as q,a as z}from"./db-143b9a4b.js";import{L as U}from"./index-cef339c7.js";import{w as p,v as D,d as G,m as _}from"./runtime-dom.esm-bundler-05da3382.js";import{_ as A}from"./loadingLogo-ccd03794.js";import{_ as F}from"./image5-4fc2427e.js";import{_ as H}from"./image4-1806383b.js";import{_ as K}from"./undraw_Page_not_found_re_e9o6-de2ef5f7.js";import{_ as J,a7 as l,F as k,a9 as w,a8 as e,ag as a,ab as h,aa as n,ad as m,ac as f,N as I,ae as L,r as R,o as r}from"./_plugin-vue_export-helper-e5f607bc.js";import"./_commonjsHelpers-042e6b4d.js";import"./base-component-5a126788.js";const X="/finalEasyBuyEasyMake/assets/SDSS-a28503b5.png",Q="/finalEasyBuyEasyMake/assets/mooncake1-18ed3215.png",W="/finalEasyBuyEasyMake/assets/mooncake2-5ba67f58.png",Y="/finalEasyBuyEasyMake/assets/macaroon1-15bf948f.png",Z="/finalEasyBuyEasyMake/assets/macaroon2-785737aa.png",$="/finalEasyBuyEasyMake/assets/donut1-364e65f4.png",ee="/finalEasyBuyEasyMake/assets/donut2-68875863.png",te="/finalEasyBuyEasyMake/assets/mochi1-8d70c660.png",se="/finalEasyBuyEasyMake/assets/mochi2-a118ee28.png",oe="/finalEasyBuyEasyMake/assets/tiramisu1-cf9b6bcd.png",ie="/finalEasyBuyEasyMake/assets/tiramisu2-ed76183b.png";const le={components:{RouterLink:E,PaginationComponent:V,Loading:U},mixins:[P],data(){return{costOrRateCollapse:{},highOrLowCollapse:{},recipes:[],selectCategory:"全部",selectItem:"全部",priceOrRate:"成本",highOrLow:"不拘",recipeSearchName:"",filterRecipes:[],bookMarks:[],thumbs:{},uid:"",search:!1,bannerImg:X,isLoading:!1,fullPage:!0}},methods:{...M(S,["toastMessage"]),getRecipes(){const i=g(u,"recipes/");y(i,s=>{this.recipes=s.val(),this.recipes=Object.entries(this.recipes).map(d=>(d[1].id=d[0],d[1])),console.log(this.recipes,"食譜資料");const b=g(u,"recipeThumbs/");y(b,d=>{this.thumbs=d.val(),console.log(this.thumbs,"所有讚"),this.recipes.forEach((t,c)=>{Object.keys(this.thumbs).forEach(x=>{t.id===x&&(this.recipes[c].thumbs=this.thumbs[t.id].thumbs)})}),this.recipes.forEach((t,c)=>{t.thumbs||(this.recipes[c].thumbs=0)}),console.log(this.recipes,"食譜"),this.filterRecipes=this.recipes,this.isLoading=!1,!this.$route.query.category&&this.$route.fullPath==="/recipes"?this.$refs.pagination.renderPage(1,this.filterRecipes):this.$route.query.category&&this.searchRecipes()})})},searchRecipes(){this.selectItem==="全部"?this.filterRecipes=this.recipes:this.selectItem!=="全部"&&(this.filterRecipes=this.recipes.filter(i=>i.category===this.selectItem)),this.priceOrRate==="成本"&&this.highOrLow!=="不拘"?this.highOrLow==="低到高"?this.filterRecipes=this.filterRecipes.sort((i,s)=>i.price-s.price):this.highOrLow==="高到低"&&(this.filterRecipes=this.filterRecipes.sort((i,s)=>s.price-i.price)):this.priceOrRate==="評價"&&this.highOrLow!=="不拘"&&(this.highOrLow==="低到高"?this.filterRecipes=this.filterRecipes.sort((i,s)=>i.thumbs-s.thumbs):this.highOrLow==="高到低"&&(this.filterRecipes=this.filterRecipes.sort((i,s)=>s.thumbs-i.thumbs))),this.filterRecipes=this.filterRecipes.filter(i=>i.title.match(this.recipeSearchName)),this.search=!0,this.$refs.pagination.renderPage(1,this.filterRecipes)},getBookmarks(){T(z,i=>{if(i){this.uid=i.uid,console.log(this.uid,"使用者已登入取得 uid");const s=g(u,"users/"+i.uid);y(s,b=>{this.user=b.val(),console.log(this.user,"讀取的資料");const d=g(u,`recipeBookmarks/${this.uid}`);y(d,t=>{this.bookMarks=t.val(),this.bookMarks&&(this.bookMarks=Object.keys(this.bookMarks)),console.log(this.bookMarks,"書籤")})})}else console.log("並未登入"),this.uid=null,this.user={}})},addBookmark(i){if(!this.uid){this.toastMessage("登入才可使用收藏功能","error");return}const s=g(u,`recipeBookmarks/${this.uid}/${i.id}`);j(s,i),this.toastMessage("收藏成功")},deleteBookmark(i){q(g(u,`recipeBookmarks/${this.uid}/${i}`)),this.toastMessage("刪除收藏")}},mounted(){this.isLoading=!0,this.costOrRateCollapse=new O(this.$refs.costOrRateCollapse,{toggle:!1,parent:"#myGroup"}),this.highOrLowCollapse=new O(this.$refs.highOrLowCollapse,{toggle:!1,parent:"#myGroup"}),this.$route.query.category&&(this.selectItem=this.$route.query.category,this.highOrLow=this.$route.query.valueHighOrLow,this.priceOrRate=this.$route.query.valuePriceOrRate,this.recipeSearchName=this.$route.query.searchName),this.getBookmarks(),this.getRecipes()},watch:{selectCategory(){this.recipeSearchName="",this.selectCategory==="全部"?(this.selectItem="全部",this.filterRecipes=this.recipes,this.$refs.pagination.renderPage(1,this.filterRecipes)):this.selectCategory!=="全部"&&(this.selectItem=this.selectCategory,this.filterRecipes=this.recipes.filter(i=>i.category===this.selectItem),console.log(this.filterRecipes,"篩選結果")),this.$refs.pagination.renderPage(1,this.filterRecipes)},priceOrRate(){this.costOrRateCollapse.hide()},highOrLow(){this.highOrLowCollapse.hide()},filterRecipes(){this.costOrRateCollapse.hide(),this.highOrLowCollapse.hide()}}},re={class:"",style:{"overflow-x":"hidden"}},ne=e("div",{class:"d-flex flex-column align-items-center py-10"},[e("img",{src:A,class:"loadingLogo mb-3",style:{width:"150px"},alt:""}),e("h1",{class:"text-center fw-bold text-red"},[e("span",{class:"me-1 animate-text"},"L"),e("span",{class:"mx-1 animate-text"},"o"),e("span",{class:"mx-1 animate-text"},"a"),e("span",{class:"mx-1 animate-text"},"d"),e("span",{class:"mx-1 animate-text"},"i"),e("span",{class:"mx-1 animate-text"},"n"),e("span",{class:"mx-1 animate-text"},"g"),e("span",{class:"mx-2 animate-text"},"."),e("span",{class:"me-2 animate-text"},"."),e("span",{class:"animate-text"},".")])],-1),ae=e("section",{class:"bannerBg"},[e("div",{class:"mask"},[e("div",{class:"text",style:{}}," 甜點種類 ")])],-1),ce={class:"container mt-4"},he={class:"position-relative categorySelector row row-cols-6 gy-2 row-cols-lg-6 list-unstyled border-bottom"},de=e("span",{class:"material-icons-outlined textImg"},"apps",-1),me=e("span",{class:"titleSize"},"全部",-1),pe=[de,me],ge={class:"col d-flex align-items-center justify-content-center"},ue={key:0,class:"categoryImg2",src:Q,alt:""},fe={key:1,src:W,alt:""},_e=e("span",{class:"titleSize"},[n("台式"),e("br",{class:"d-lg-none"}),n("甜點")],-1),be={class:"col d-flex align-items-center justify-content-center"},ye={key:0,class:"categoryImg3",src:Y,alt:""},ke={key:1,src:Z,alt:""},xe=e("span",{class:"titleSize"},[n("法式"),e("br",{class:"d-lg-none"}),n("甜點")],-1),we={class:"col d-flex align-items-center justify-content-center"},Re={key:0,class:"categoryImg4",src:$,alt:""},ve={key:1,src:ee,alt:""},Ce=e("span",{class:"titleSize"},[n("美式"),e("br",{class:"d-lg-none"}),n("甜點")],-1),Oe={class:"col d-flex align-items-center justify-content-center"},Ie={key:0,class:"categoryImg5",src:te,alt:""},Le={key:1,src:se,alt:""},Be=e("span",{class:"titleSize"},[n("日式"),e("br",{class:"d-lg-none"}),n("甜點")],-1),Ee={class:"col d-flex align-items-center justify-content-center"},Me={key:0,class:"categoryImg6",src:oe,alt:""},Se={key:1,src:ie,alt:""},Pe=e("span",{class:"titleSize"},[n("義式"),e("br",{class:"d-lg-none"}),n("甜點")],-1),Ve={class:"d-none d-lg-block container selectProduct my-5"},Ne={class:"input-group"},Te=e("i",{class:"bi bi-caret-down-fill"},null,-1),je={class:"ms-2 fw-bold"},qe=e("i",{class:"bi bi-caret-down-fill"},null,-1),ze={class:"ms-2 fw-bold"},Ue=e("img",{src:N,style:{height:"25px"},alt:""},null,-1),De=[Ue],Ge={class:"row g-0",id:"myGroup"},Ae={class:"col-2"},Fe={ref:"costOrRateCollapse",class:"collapse"},He={class:"card card-body border-0",style:{border:"0px !important"}},Ke={class:"btn-group-vertical",role:"group","aria-label":"Vertical radio toggle button group"},Je=e("label",{class:"btn btn-outline-red",for:"selectprice"},"成本",-1),Xe=e("label",{class:"btn btn-outline-red",for:"selectRate"},"評價",-1),Qe={class:"col-2"},We={ref:"highOrLowCollapse",class:"collapse"},Ye={class:"card card-body border-0",style:{border:"0px !important"}},Ze={class:"btn-group-vertical",role:"group","aria-label":"Vertical radio toggle button group"},$e=e("label",{class:"btn btn-outline-red",for:"noDifference"},"不拘",-1),et=e("label",{class:"btn btn-outline-red",for:"highToLow"},"高到低",-1),tt=e("label",{class:"btn btn-outline-red",for:"lowToHigh"},"低到高",-1),st={class:"container"},ot={key:0,class:"row row-cols-lg-4 row-cols-2 gy-4"},it={class:"card position-relative bg-transparent",style:{"border-radius":"0",border:"1px solid transparent"}},lt={class:"cardImg",style:{}},rt=["src"],nt={class:"card-text mb-0"},at=e("p",{class:"detail d-none d-lg-block position-absolute fw-bold",style:{top:"35%",left:"50%",transform:"translateX(-50%)","letter-spacing":"5px"}},"查看詳細食譜",-1),ct=["onClick"],ht=e("img",{src:F},null,-1),dt=[ht],mt=["onClick"],pt=e("img",{src:H},null,-1),gt=[pt],ut={style:{"pointer-events":"none"},class:"cardTextCategory badge rounded-pill bg-red mt-4 border-0 m-3 position-absolute start-0"},ft={class:"d-flex justify-content-between align-items-center fw-bold"},_t={class:"cardTextTitle"},bt={class:"cardTextPrice d-flex align-items-lg-center align-items-end"},yt={class:""},kt={class:"starRates mb-0 ms-auto"},xt={class:"me-1"},wt=e("i",{class:"bi bi-hand-thumbs-up-fill"},null,-1),Rt={key:1,class:"py-10"},vt=e("img",{src:K,class:"mb-3",alt:"",style:{height:"250px",display:"block",margin:"auto"}},null,-1),Ct=e("h2",{class:"text-center"},"查無食譜，請您重新查詢",-1),Ot=[vt,Ct];function It(i,s,b,d,t,c){const x=R("loading"),v=R("RouterLink"),B=R("PaginationComponent");return r(),l("div",re,[k(x,{active:t.isLoading,"onUpdate:active":s[0]||(s[0]=o=>t.isLoading=o),"can-cancel":!1,"is-full-page":t.fullPage,"lock-scroll":!0},{default:w(()=>[ne]),_:1},8,["active","is-full-page"]),ae,e("section",ce,[e("ul",he,[e("li",{class:a(["col",{liDisabled:t.selectItem==="全部"}])},[e("a",{href:"#",onClick:s[1]||(s[1]=p(()=>t.selectCategory="全部",["prevent"])),class:a(["text-decoration-none d-flex flex-column align-items-center link-secondary",{"fw-bold":t.selectItem==="全部","link-red":t.selectItem==="全部"}])},pe,2)],2),e("li",ge,[e("a",{href:"#",onClick:s[2]||(s[2]=p(()=>t.selectCategory="台式甜點",["prevent"])),class:a(["text-decoration-none d-flex flex-column align-items-center link-secondary",{"fw-bold":t.selectItem==="台式甜點","link-red":t.selectItem==="台式甜點"}])},[t.selectItem!=="台式甜點"?(r(),l("img",ue)):t.selectItem==="台式甜點"?(r(),l("img",fe)):h("",!0),_e],2)]),e("li",be,[e("a",{href:"#",onClick:s[3]||(s[3]=p(()=>t.selectCategory="法式甜點",["prevent"])),class:a(["text-decoration-none d-flex flex-column align-items-center link-secondary",{"fw-bold":t.selectItem==="法式甜點","link-red":t.selectItem==="法式甜點"}])},[t.selectItem!=="法式甜點"?(r(),l("img",ye)):t.selectItem==="法式甜點"?(r(),l("img",ke)):h("",!0),xe],2)]),e("li",we,[e("a",{href:"#",onClick:s[4]||(s[4]=p(()=>t.selectCategory="美式甜點",["prevent"])),class:a(["text-decoration-none d-flex flex-column align-items-center link-secondary",{"fw-bold":t.selectItem==="美式甜點","link-red":t.selectItem==="美式甜點"}])},[t.selectItem!=="美式甜點"?(r(),l("img",Re)):t.selectItem==="美式甜點"?(r(),l("img",ve)):h("",!0),Ce],2)]),e("li",Oe,[e("a",{href:"#",onClick:s[5]||(s[5]=p(()=>t.selectCategory="日式甜點",["prevent"])),class:a(["text-decoration-none d-flex flex-column align-items-center link-secondary",{"fw-bold":t.selectItem==="日式甜點","link-red":t.selectItem==="日式甜點"}])},[t.selectItem!=="日式甜點"?(r(),l("img",Ie)):t.selectItem==="日式甜點"?(r(),l("img",Le)):h("",!0),Be],2)]),e("li",Ee,[e("a",{href:"#",onClick:s[6]||(s[6]=p(()=>t.selectCategory="義式甜點",["prevent"])),class:a(["text-decoration-none d-flex flex-column align-items-center link-secondary",{"fw-bold":t.selectItem==="義式甜點","link-red":t.selectItem==="義式甜點"}])},[t.selectItem!=="義式甜點"?(r(),l("img",Me)):t.selectItem==="義式甜點"?(r(),l("img",Se)):h("",!0),Pe],2)]),e("li",{class:a(["redLine bg-red position-absolute",{activeAll:t.selectItem==="全部",activeT:t.selectItem==="台式甜點",activeF:t.selectItem==="法式甜點",activeA:t.selectItem==="美式甜點",activeJ:t.selectItem==="日式甜點",activeI:t.selectItem==="義式甜點"}]),style:{height:"2px",bottom:"0px",left:"5.5%"}},null,2)])]),e("section",Ve,[e("div",Ne,[e("a",{class:"btn btn-outline-red px-5",onClick:s[7]||(s[7]=()=>this.costOrRateCollapse.toggle())},[n("篩選對象 "),Te,e("span",je,m(t.priceOrRate),1)]),e("button",{class:"btn btn-outline-red px-5",type:"button",onClick:s[8]||(s[8]=()=>this.highOrLowCollapse.toggle())},[n("篩選值 "),qe,e("span",ze,m(t.highOrLow),1)]),f(e("input",{type:"search",class:"form-control border-red border-end-0",placeholder:"請輸入食譜名稱","aria-label":"Example text with two button addons","onUpdate:modelValue":s[9]||(s[9]=o=>t.recipeSearchName=o),onKeyup:s[10]||(s[10]=G((...o)=>c.searchRecipes&&c.searchRecipes(...o),["enter"]))},null,544),[[D,t.recipeSearchName]]),e("button",{type:"submit",class:"btn border border-red border-start-0 bg-transparent",onClick:s[11]||(s[11]=p((...o)=>c.searchRecipes&&c.searchRecipes(...o),["prevent"]))},De)]),e("div",Ge,[e("div",Ae,[e("div",Fe,[e("div",He,[e("div",Ke,[f(e("input",{type:"radio",class:"btn-check",value:"成本",name:"priceOrRate",id:"selectprice",autocomplete:"off","onUpdate:modelValue":s[12]||(s[12]=o=>t.priceOrRate=o)},null,512),[[_,t.priceOrRate]]),Je,f(e("input",{type:"radio",class:"btn-check",value:"評價",name:"priceOrRate",id:"selectRate",autocomplete:"off","onUpdate:modelValue":s[13]||(s[13]=o=>t.priceOrRate=o)},null,512),[[_,t.priceOrRate]]),Xe])])],512)]),e("div",Qe,[e("div",We,[e("div",Ye,[e("div",Ze,[f(e("input",{type:"radio",class:"btn-check",value:"不拘",name:"highOrLow",id:"noDifference",autocomplete:"off",checked:"","onUpdate:modelValue":s[14]||(s[14]=o=>t.highOrLow=o)},null,512),[[_,t.highOrLow]]),$e,f(e("input",{type:"radio",class:"btn-check",value:"高到低",name:"highOrLow",id:"highToLow",autocomplete:"off","onUpdate:modelValue":s[15]||(s[15]=o=>t.highOrLow=o)},null,512),[[_,t.highOrLow]]),et,f(e("input",{type:"radio",class:"btn-check",value:"低到高",name:"highOrLow",id:"lowToHigh",autocomplete:"off","onUpdate:modelValue":s[16]||(s[16]=o=>t.highOrLow=o)},null,512),[[_,t.highOrLow]]),tt])])],512)])])]),e("section",st,[t.filterRecipes.length?(r(),l("div",ot,[(r(!0),l(I,null,L(this.$refs.pagination.pageProducts,o=>(r(),l("div",{class:"col text-decoration-none",key:o.id},[e("div",it,[e("div",lt,[k(v,{to:`/recipes/${o.id}`,class:"enlargeImg"},{default:w(()=>[e("img",{src:o.image,class:"card-img",style:{"object-fit":"cover","max-width":"100%","max-height":"100%","border-radius":"0"},alt:""},null,8,rt)]),_:2},1032,["to"])]),e("h5",nt,[at,e("button",{type:"button",class:"position-absolute bookmarkBtn border-0 bg-transparent end-0 top-0 m-lg-3 m-2",onClick:()=>c.addBookmark(o)},dt,8,ct),(r(!0),l(I,null,L(t.bookMarks,C=>(r(),l("div",{key:C+4567},[C===o.id?(r(),l("button",{key:0,type:"button",class:"position-absolute deleteBookmarkBtn border-0 bg-transparent end-0 top-0 m-lg-3 m-2",onClick:()=>c.deleteBookmark(o.id)},gt,8,mt)):h("",!0)]))),128)),e("span",ut,m(o.category),1)]),k(v,{to:`/recipes/${o.id}`,class:"card-footer bg-transparent border-0 pt-lg-3 text-decoration-none link-darkBrown"},{default:w(()=>[e("h5",ft,[e("span",_t,m(o.title),1)]),e("div",bt,[e("div",yt,[o.total?(r(),l("del",{key:0,class:a(["me-2 text-muted d-block d-lg-inline-block",{"d-none":o.price===o.total}])},"NT$ "+m(i.numberComma(o.total)),3)):h("",!0),e("span",null,[o.price?(r(),l("span",{key:0,class:a({"text-danger":o.price!==o.total,"fw-bold":o.price!==o.total})},"NT$ "+m(i.numberComma(o.price)),3)):h("",!0),n(" / "+m(o.content),1)])]),e("h5",kt,[e("p",{class:a(["mb-0 badge rounded-pill border d-flex align-items-center",{"border-red":o.thumbs!==0,"border-lightBrownGray":o.thumbs===0,"text-red":o.thumbs!==0,"text-lightBrownGray":o.thumbs===0}])},[e("span",xt,m(o.thumbs),1),wt],2)])])]),_:2},1032,["to"])])]))),128))])):!t.filterRecipes.length&&t.search?(r(),l("div",Rt,Ot)):h("",!0),k(B,{ref:"pagination","price-or-rate":t.priceOrRate,"filter-recipes":t.filterRecipes},null,8,["price-or-rate","filter-recipes"])])])}const Ft=J(le,[["render",It]]);export{Ft as default};
