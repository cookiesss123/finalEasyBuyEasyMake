import{f as w,m as C}from"./index-d4f6f3b7.js";import{c as h}from"./carts-c864b624.js";import{n as N}from"./numberCommaMixin-e0aac39c.js";import{B as V}from"./BannerComponent-882e3d71.js";import{l as k}from"./runtime-dom.esm-bundler-eb0e3820.js";import{b6 as T,av as p,aj as d,l as c,t as n,m as e,F as q,at as B,aJ as l,s as m,k as u,b1 as _,r as j,a3 as i,b3 as z}from"./_plugin-vue_export-helper-68081c38.js";import"./publicData-f4e8600e.js";const F={data(){return{user:{email:"",name:"",phoneNum:"",address:"",message:""}}},components:{BannerComponent:V},mixins:[N],methods:{...w(h,["addOrder","goToTop","toastMessage"]),isPhone(t){return/^(09)[0-9]{8}$/.test(t)?!0:"需要正確的電話號碼"}},mounted(){this.goToTop()},computed:{...C(h,["cart","cartItems","myOrder"])},watch:{cartItems(){!this.cartItems.length&&!Object.keys(this.myOrder).length&&(this.$swal({icon:"warning",title:"請您重新操作",showConfirmButton:!1,timer:2500}),this.$router.push("/products"))}}},M={class:"no-scroll-x"},O={class:"container my-5"},U=j('<div class="position-relative w-100 mt-lg-5 my-5"><div class="line-gray border-top position-absolute border-2 z-index-n1 start-50 translate-middle-x" style="top:25%;"></div><div class="line-blue-50 line-blue-50-animation border-top border-primary position-absolute border-2 z-index-n1"></div><ul class="list-unstyled d-flex justify-content-between text-gray"><li class="d-flex flex-column align-items-center"><div class="circle bg-primary d-flex align-items-center justify-content-center mb-2 ms-n2"><i class="bi bi-check-lg fs-lg-4 text-white"></i></div><p class="fs-lg-6 fs-14">確認購物車品項</p></li><li class="d-flex flex-column align-items-center"><div class="circle circle-animation fs-lg-4 d-flex align-items-center justify-content-center mb-2"> 2 </div><p class="text-gray-to-primary-2 fs-lg-6 fs-14">填寫訂單資訊</p></li><li class="d-flex flex-column align-items-center"><div class="circle border border-gray bg-white fs-lg-4 d-flex align-items-center justify-content-center mb-2"> 3 </div><p class="fs-lg-6 fs-14">成功下訂</p></li></ul></div>',1),S={class:"row row-cols-1 row-cols-lg-2 g-5"},I={class:"col d-flex flex-column"},P=e("h4",{class:"text-center fw-bold mb-4 bg-secondary py-2"},"商品確認",-1),E={class:"list-unstyled mb-0"},L={class:"card"},D={class:"row g-0"},R={class:"col-4"},W=["src","alt"],A={class:"col-8"},J={class:"card-body d-flex flex-column h-100 pb-0"},G={class:"d-flex mb-auto"},H={class:"card-title fs-lg-6 fs-14 mb-0"},K={class:"ms-auto"},Q={class:"card-text text-end"},X={key:0,class:"mb-0 text-danger fw-bold"},Y={key:1,class:"mb-0 text-danger fw-bold"},Z=e("hr",null,null,-1),$={key:0,class:"table table-borderless"},ee=e("th",{class:"fw-normal"},"商品總金額",-1),se={class:"text-end fw-normal"},te={key:0},oe={class:"text-end"},le={key:0},ae=e("td",null,"優惠券折扣",-1),re={class:"text-end"},ne={class:"border-top bg-secondary"},ie=e("td",{class:"fw-bold text-danger"},"總計金額",-1),de={class:"text-end fw-bold text-danger"},ce={key:0},me={key:1},ue={class:"mt-auto"},pe=e("i",{class:"bi bi-arrow-left"},null,-1),be={class:"col"},fe=e("h4",{class:"text-center fw-bold mb-4 bg-lightPurple py-2"},"填寫收件人資訊",-1),he={class:"row gy-4 d-flex text-gray fs-lg-5"},_e={class:"col-12"},ge=e("i",{class:"bi bi-envelope-fill"},null,-1),ye=e("span",{class:"text-danger fs-4 ms-2"},"*",-1),ve={class:"col-12"},xe=e("i",{class:"bi bi-person-fill"},null,-1),we=e("span",{class:"text-danger fs-4 ms-2"},"*",-1),Ce={class:"col-12"},Ne=e("i",{class:"bi bi-telephone-fill"},null,-1),Ve=e("span",{class:"text-danger fs-4 ms-2"},"*",-1),ke={class:"col-12"},Te=e("i",{class:"bi bi-house-fill"},null,-1),qe=e("span",{class:"text-danger fs-4 ms-2"},"*",-1),Be=e("div",{class:"col-12 position-relative"},[e("label",{for:"payWay",class:"form-label text-primary"},[e("i",{class:"bi bi-wallet-fill"}),m(" 付款方式"),e("span",{class:"text-danger fs-4 ms-2"},"*")]),e("input",{type:"text",class:"form-control",id:"payWay",value:"貨到付款",disabled:""}),e("i",{class:"fs-4 text-success bi bi-check-lg position-absolute",style:{top:"40px",right:"20px"}}),e("p",{class:"text-muted",style:{"font-size":"14px"}},"注意：本店一律採貨到付款的方式喔!")],-1),je={class:"col-12"},ze=e("i",{class:"bi bi-chat-left-text-fill"},null,-1),Fe=e("span",{class:"text-muted ms-2",style:{"font-size":"14px"}},"(可不填寫)",-1),Me=e("p",{class:"text-muted",style:{"font-size":"14px"}},"有任何問題或是貨品相關注意事項都歡迎與我們聯繫~",-1),Oe=e("div",{class:"col-12 mt-4"},[e("button",{type:"submit",class:"hvr-sweep-to-right btn btn-primary fw-bold rounded-0 px-4 shadow-lg w-100"},"確認建立訂單")],-1);function Ue(t,a,Se,Ie,o,g){const y=p("BannerComponent"),v=p("RouterLink"),b=p("VField"),f=p("ErrorMessage"),x=p("VForm");return d(),c("div",M,[n(y),e("section",O,[U,e("div",S,[e("div",I,[P,e("ul",E,[(d(!0),c(q,null,B(t.cartItems,(s,r)=>(d(),c("li",{key:r+756345},[e("div",L,[e("div",D,[e("div",R,[e("img",{src:s.product.imgUrl,alt:s.product.title,class:"img-fluid w-100 object-fit-cover",style:{height:"130px"}},null,8,W)]),e("div",A,[e("div",J,[e("div",G,[e("h5",H,l(s.product.title),1),e("span",K,"x "+l(t.numberComma(s.qty)),1)]),e("div",Q,[e("del",{class:i(["me-2 text-muted fs-14",{"d-none":!s.product.isCheaper}])},"NT$ "+l(t.numberComma(s.product.originalPrice)),3),e("span",{class:i({"text-danger":s.product.isCheaper,"fw-bold":s.product.isCheaper})},"NT$ "+l(t.numberComma(s.product.price)),3),e("span",null," / "+l(s.product.num)+l(s.product.unit),1),s.product.category!=="組合包"?(d(),c("p",X,"小計：NT$ "+l(t.numberComma(s.product.price*s.qty))+" / "+l(t.numberComma(s.product.num*s.qty))+l(s.product.unit),1)):u("",!0),s.product.category==="組合包"?(d(),c("p",Y,"小計：NT$ "+l(t.numberComma(s.product.price*s.qty))+" / "+l(t.numberComma(s.qty))+"組",1)):u("",!0)])])])])]),Z]))),128))]),t.cart?(d(),c("table",$,[e("thead",null,[e("tr",null,[ee,e("th",se,"NT$ "+l(t.numberComma(t.cart.total)),1)])]),e("tbody",null,[e("tr",null,[e("td",null,[m("運費"),t.cart.total>=1e3?(d(),c("span",te,"（滿千元免運）")):u("",!0)]),e("td",oe," NT$ "+l(t.cart.total>=1e3?0:t.cart.deliveryCharge),1)]),t.cart.total+t.cart.deliveryCharge!==t.cart.finalTotal&&t.cart.coupon?(d(),c("tr",le,[ae,e("td",re,"- NT$ "+l(t.numberComma(Math.ceil(t.cart.total*(t.cart.coupon.discount/100)))),1)])):u("",!0),e("tr",ne,[ie,e("td",de,[t.cart.total<1e3?(d(),c("span",ce,"NT$ "+l(t.numberComma(t.cart.finalTotal)),1)):t.cart.total>=1e3?(d(),c("span",me,"NT$ "+l(t.numberComma(t.cart.finalTotal-t.cart.deliveryCharge)),1)):u("",!0)])])])])):u("",!0),e("div",ue,[n(v,{to:"/products",class:"hvr-sweep-to-left btn text-primary border-primary"},{default:_(()=>[pe,m(" 繼續選購")]),_:1})])]),e("div",be,[fe,n(x,{ref:"form",onSubmit:a[5]||(a[5]=()=>t.addOrder(o.user.email,o.user.name,o.user.phoneNum,o.user.address,o.user.message))},{default:_(({errors:s})=>[e("div",he,[e("div",_e,[e("label",{for:"email",class:i(["form-label",{"text-primary":o.user.email&&!s.信箱}])},[ge,m(" 信箱"),ye],2),n(b,{id:"email",name:"信箱",type:"email",class:i(["form-control border-0 border-bottom",{"is-invalid":s.信箱,"is-valid":o.user.email&&!s.信箱}]),placeholder:"請輸入您的信箱",rules:"email|required",modelValue:o.user.email,"onUpdate:modelValue":a[0]||(a[0]=r=>o.user.email=r)},null,8,["class","modelValue"]),n(f,{name:"信箱",class:"invalid-feedback"})]),e("div",ve,[e("label",{for:"name",class:i(["form-label",{"text-primary":o.user.name&&!s.收件人姓名}])},[xe,m(" 收件人姓名"),we],2),n(b,{id:"name",name:"收件人姓名",type:"name",class:i(["form-control border-0 border-bottom",{"is-invalid":s.收件人姓名,"is-valid":!s.收件人姓名&&o.user.name}]),placeholder:"請輸入您的收件人姓名",rules:"required",modelValue:o.user.name,"onUpdate:modelValue":a[1]||(a[1]=r=>o.user.name=r)},null,8,["class","modelValue"]),n(f,{name:"收件人姓名",class:"invalid-feedback"})]),e("div",Ce,[e("label",{for:"phoneNum",class:i(["form-label",{"text-primary":o.user.phoneNum&&!s.收件人電話}])},[Ne,m(" 收件人電話"),Ve],2),n(b,{id:"phoneNum",name:"收件人電話",type:"phoneNum",class:i(["form-control border-0 border-bottom",{"is-invalid":s.收件人電話,"is-valid":!s.收件人電話&&o.user.phoneNum}]),placeholder:"請輸入您的收件人電話",rules:g.isPhone,modelValue:o.user.phoneNum,"onUpdate:modelValue":a[2]||(a[2]=r=>o.user.phoneNum=r)},null,8,["class","rules","modelValue"]),n(f,{name:"收件人電話",class:"invalid-feedback"})]),e("div",ke,[e("label",{for:"address",class:i(["form-label",{"text-primary":o.user.address&&!s.收件人地址}])},[Te,m(" 收件人地址"),qe],2),n(b,{id:"address",name:"收件人地址",type:"address",class:i(["form-control border-0 border-bottom",{"is-invalid":s.收件人地址,"is-valid":!s.收件人地址&&o.user.address}]),placeholder:"請輸入您的收件人地址",rules:"required",modelValue:o.user.address,"onUpdate:modelValue":a[3]||(a[3]=r=>o.user.address=r)},null,8,["class","modelValue"]),n(f,{name:"收件人地址",class:"invalid-feedback"})]),Be,e("div",je,[e("label",{for:"message",class:i(["form-label",{"text-primary":o.user.message}])},[ze,m(" 留言")],2),Fe,z(e("textarea",{id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":a[4]||(a[4]=r=>o.user.message=r)},null,512),[[k,o.user.message]]),Me]),Oe])]),_:1},512)])])])])}const Je=T(F,[["render",Ue]]);export{Je as default};
