import{m as x}from"./modalMixin-04fea284.js";import{k as w,v as D}from"./runtime-dom.esm-bundler-226b1721.js";import{b6 as b,aj as r,l as i,m as t,s as c,aJ as l,b3 as _,k as f,F as p,at as m,t as O,av as g}from"./_plugin-vue_export-helper-31c7975b.js";import"./_commonjsHelpers-042e6b4d.js";const{VITE_PATH:v}={VITE_PATH:"http://localhost:3000",BASE_URL:"/finalEasyMakeEasyBuy/",MODE:"production",DEV:!1,PROD:!0},E={data(){return{tempOrder:{}}},mixins:[x],props:["id","openModal","getOrders"],methods:{updateOrder(){this.$http.put(`${v}/orders/${this.tempOrder.id}`,this.tempOrder).then(e=>{console.log(e.data),this.getOrders(),this.hide()}).catch(e=>{console.log(e)})}},mounted(){},watch:{id(){this.id&&this.$http.get(`${v}/orders/${this.id}`).then(e=>{this.tempOrder=e.data,console.log(e.data,this.tempOrder,"暫存訂單"),this.show(),this.openModal("")}).catch(e=>{console.log(e)})}}},S={class:"modal fade",ref:"modal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},T={class:"modal-dialog modal-xl"},V={class:"modal-content"},A=t("div",{class:"modal-header bg-dark"},[t("h5",{class:"modal-title text-white",id:"exampleModalLabel"},[t("span",null,"編輯訂單內容")]),t("button",{type:"button",class:"btn-close btn-close-white","data-bs-dismiss":"modal","aria-label":"Close"})],-1),I={class:"modal-body"},C={class:"row"},P={class:"col-4"},L={class:"row gy-3"},B={class:"col-12"},H={class:"mb-0"},N={class:"col-12"},U=t("h3",null,"訂購人資訊",-1),R={class:"table table-borderless text-brown"},q=t("th",{class:"fw-normal"},[t("i",{class:"bi bi-envelope-fill"}),c(" 信箱")],-1),F={class:"fw-normal"},j=t("td",null,[t("i",{class:"bi bi-person-fill"}),c(" 收件人姓名")],-1),J=t("td",null,[t("i",{class:"bi bi-telephone-fill"}),c(" 收件人電話")],-1),z=t("td",null,[t("i",{class:"bi bi-house-fill"}),c(" 收件人地址")],-1),G=t("tr",null,[t("td",null,[t("i",{class:"bi bi-wallet-fill"}),c(" 付款方式")]),t("td",null,"貨到付款")],-1),K=t("td",null,[t("i",{class:"bi bi-chat-left-text-fill"}),c(" 留言")],-1),Q={class:"col-8"},W={class:"row"},X={class:"col-12"},Y=t("h3",null,"訂單資訊",-1),Z={class:"table table-borderless"},tt=t("th",{class:"fw-normal"},"訂單建立時間 ",-1),et={class:"fw-normal"},lt=t("td",null,"運送狀態",-1),st=t("option",{value:"待出貨"},"待出貨",-1),ot=t("option",{value:"運送中"},"運送中",-1),dt=t("option",{value:"待取貨"},"待取貨",-1),nt=t("option",{value:"訂單完成"},"訂單完成",-1),at=[st,ot,dt,nt],rt=t("td",null,"付款金額",-1),it={key:0},ct=t("td",null,"付款狀態",-1),ht={class:"form-check"},ut=t("label",{class:"form-check-label",for:"paymentStatus"}," 是否付款 ",-1),_t=t("td",null,"付款時間",-1),pt={class:"col-12"},mt=t("h3",null,"選購商品",-1),bt={class:"table table-borderless text-brown"},yt={key:0},ft={class:"modal-footer"},Ot=t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"關閉",-1),gt=t("span",null,"確認編輯",-1),vt=[gt];function Mt(e,a,u,y,s,n){return r(),i("div",S,[t("div",T,[t("div",V,[A,t("div",I,[c(l()+" ",1),t("div",C,[t("div",P,[t("div",L,[t("div",B,[t("p",H,"編號（id）："+l(s.tempOrder.id),1)]),t("div",N,[U,t("table",R,[t("thead",null,[t("tr",null,[q,t("th",F,l(s.tempOrder.email),1)])]),t("tbody",null,[t("tr",null,[j,t("td",null,l(s.tempOrder.name),1)]),t("tr",null,[J,t("td",null,l(s.tempOrder.phoneNum),1)]),t("tr",null,[z,t("td",null,l(s.tempOrder.address),1)]),G,t("tr",null,[K,t("td",null,l(s.tempOrder.message),1)])])])])])]),t("div",Q,[t("div",W,[t("div",X,[Y,t("table",Z,[t("thead",null,[t("tr",null,[tt,t("th",et,l(new Date(s.tempOrder.creatAt).toLocaleDateString()),1)])]),t("tbody",null,[t("tr",null,[lt,t("td",null,[_(t("select",{name:"",id:"",class:"form-select","onUpdate:modelValue":a[0]||(a[0]=d=>s.tempOrder.deliveryStatus=d)},at,512),[[w,s.tempOrder.deliveryStatus]])])]),t("tr",null,[rt,s.tempOrder.cart?(r(),i("td",it,"NT$ "+l(s.tempOrder.cart.finalTotal),1)):f("",!0)]),t("tr",null,[ct,t("td",null,[t("div",ht,[_(t("input",{class:"form-check-input",type:"checkbox",value:"","true-value":"1","false-value":"0",id:"paymentStatus","onUpdate:modelValue":a[1]||(a[1]=d=>s.tempOrder.paymentStatus=d)},null,512),[[D,s.tempOrder.paymentStatus]]),ut])])]),t("tr",null,[_t,t("td",null,l(s.tempOrder.payDate),1)])])])]),t("div",pt,[mt,t("table",bt,[s.tempOrder.cart?(r(),i("tbody",yt,[(r(!0),i(p,null,m(s.tempOrder.cart.items,d=>(r(),i("tr",{key:d+986},[t("td",null,l(d.product.title),1),t("td",null,"NT$ "+l(d.product.price),1),t("td",null,l(d.qty)+" 份",1)]))),128))])):f("",!0)])])])])])]),t("div",ft,[Ot,t("button",{type:"button",class:"btn btn-primary",onClick:a[2]||(a[2]=(...d)=>n.updateOrder&&n.updateOrder(...d))},vt)])])])],512)}const kt=b(E,[["render",Mt]]),{VITE_PATH:M}={VITE_PATH:"http://localhost:3000",BASE_URL:"/finalEasyMakeEasyBuy/",MODE:"production",DEV:!1,PROD:!0},xt={data(){return{tempOrder:{}}},mixins:[x],props:["id","openDeleteModal","getOrders"],methods:{deleteOrder(){this.$http.delete(`${M}/orders/${this.tempOrder.id}`).then(e=>{console.log(e.data),this.getOrders(),this.hide()}).catch(e=>{console.log(e)})}},watch:{id(){this.id&&(console.log(this.id,"改變了"),this.$http.get(`${M}/orders/${this.id}`).then(e=>{this.tempOrder=e.data,console.log(this.tempOrder),this.show(),this.openDeleteModal("")}).catch(e=>{console.log(e)}))}}},Dt={class:"modal fade",ref:"modal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},$t={class:"modal-dialog"},wt={class:"modal-content"},Et=t("div",{class:"modal-header bg-dark"},[t("h5",{class:"modal-title text-white",id:"exampleModalLabel"}," 刪除訂單 "),t("button",{type:"button",class:"btn-close btn-close-white","data-bs-dismiss":"modal","aria-label":"Close"})],-1),St={class:"modal-body"},Tt={class:"text-danger fw-bold"},Vt={class:"modal-footer"},At=t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"關閉",-1);function It(e,a,u,y,s,n){return r(),i("div",Dt,[t("div",$t,[t("div",wt,[Et,t("div",St,[t("p",null,[c("確定要刪除此筆訂單 "),t("span",Tt," 【"+l(s.tempOrder.id)+"】 ",1),c(" 嗎? ")])]),t("div",Vt,[At,t("button",{type:"button",class:"btn btn-danger",onClick:a[0]||(a[0]=(...d)=>n.deleteOrder&&n.deleteOrder(...d))}," 確認刪除 ")])])])],512)}const Ct=b(xt,[["render",It]]),{VITE_PATH:k}={VITE_PATH:"http://localhost:3000",BASE_URL:"/finalEasyMakeEasyBuy/",MODE:"production",DEV:!1,PROD:!0},Pt={components:{OrderModal:kt,DeleteOrderModal:Ct},data(){return{orders:[],orderId:"",orderDeleteId:""}},methods:{getOrders(){this.$http.get(`${k}/orders`).then(e=>{console.log(e.data),this.orders=e.data}).catch(e=>{console.log(e)})},openModal(e){this.orderId=e},openDeleteModal(e){this.orderDeleteId=e},updatePaymentStatus(e,a){this.$http.patch(`${k}/orders/${e}`,{paymentStatus:a}).then(u=>{console.log(u.data),this.getOrders()}).catch(u=>{console.log(u)})}},mounted(){this.getOrders()}},Lt={class:"container"},Bt={class:"table text-center mt-4",style:{"vertical-align":"middle"}},Ht=t("thead",null,[t("tr",null,[t("th",null,"訂單編號"),t("th",null,"購買時間"),t("th",null,"收貨人"),t("th",null,"信箱"),t("th",null,"購買產品"),t("th",null,"應付金額"),t("th",null,"訂單狀態"),t("th",null,"是否付款"),t("th",null,"編輯")])],-1),Nt={class:"form-check form-switch"},Ut=["onUpdate:modelValue","onChange"],Rt={class:"form-check-label",for:"pay"},qt={class:"btn-group"},Ft=["onClick"],jt=["onClick"];function Jt(e,a,u,y,s,n){const d=g("OrderModal"),$=g("DeleteOrderModal");return r(),i("div",Lt,[t("table",Bt,[Ht,t("tbody",null,[(r(!0),i(p,null,m(s.orders,o=>(r(),i("tr",{key:o.id+34564},[t("td",null,l(o.id),1),t("td",null,l(new Date(o.creatAt).toLocaleDateString()),1),t("td",null,l(o.name),1),t("td",null,l(o.email),1),t("td",null,[(r(!0),i(p,null,m(o.cart.items,h=>(r(),i("p",{key:h+366},l(h.product.title)+" x "+l(h.qty),1))),128))]),t("td",null,l(o.cart.finalTotal),1),t("td",null,l(o.deliveryStatus),1),t("td",null,[t("div",Nt,[_(t("input",{class:"form-check-input",type:"checkbox",role:"switch",id:"pay","onUpdate:modelValue":h=>o.paymentStatus=h,onChange:()=>n.updatePaymentStatus(o.id,o.paymentStatus)},null,40,Ut),[[D,o.paymentStatus]]),t("label",Rt,l(o.paymentStatus?"已付款":"未付款"),1)])]),t("td",null,[t("div",qt,[t("button",{type:"button",class:"btn btn-sm btn-outline-primary",onClick:h=>n.openModal(o.id)},"編輯",8,Ft),t("button",{type:"button",class:"btn btn-sm btn-outline-danger",onClick:h=>n.openDeleteModal(o.id)},"刪除",8,jt)])])]))),128))])]),O(d,{ref:"orderModal",id:s.orderId,"open-modal":n.openModal,"get-orders":n.getOrders},null,8,["id","open-modal","get-orders"]),O($,{ref:"deleteOrderModal",id:s.orderDeleteId,"get-orders":n.getOrders,"open-delete-modal":n.openDeleteModal},null,8,["id","get-orders","open-delete-modal"])])}const Wt=b(Pt,[["render",Jt]]);export{Wt as default};
