import{m as v}from"./index-a9d6be75.js";import{o as w,c as S,r as k,d as C,b as T,a as N}from"./carts-810a7b65.js";import{n as L}from"./numberCommaMixin-e0aac39c.js";import{L as W}from"./index-2b32f149.js";import{_ as q}from"./loadingLogo-ea15f612.js";import{_ as V,a7 as l,F as _,a9 as b,a8 as s,ad as o,af as a,N as p,ae as m,ab as n,aa as d,r as f,o as i}from"./_plugin-vue_export-helper-d28549df.js";import"./runtime-dom.esm-bundler-e140de91.js";const A={data(){return{uid:"",order:{},barWidth:0,isLoading:!1,fullPage:!0}},components:{Loading:W},mixins:[L],methods:{...v(S,["goToTop"]),getOrder(){this.isLoading=!0;const{id:r}=this.$route.params;w(N,c=>{if(c){this.uid=c.uid;const u=k(C,`orders/${this.uid}/${r}`);T(u,h=>{this.order=h.val(),this.order.id=r,this.order.deliveryStatus==="待出貨"?this.barWidth=0:this.order.deliveryStatus==="運送中"?this.barWidth=33:this.order.deliveryStatus==="待取貨"?this.barWidth=66:this.order.deliveryStatus==="訂單完成"&&(this.barWidth=100),this.isLoading=!1})}else this.uid=null,this.uid||(this.toastMessage("請先登入","error"),this.$router.push("/loginSignup"))})}},mounted(){this.goToTop(),this.getOrder()}},D={class:"py-md-96 py-60 container no-scroll-x"},P=s("div",{class:"d-flex flex-column align-items-center py-96"},[s("img",{src:q,class:"loading-logo mb-3",alt:"logo"}),s("p",{class:"text-center fw-bold text-purple fs-md-2 fs-5"},[s("span",{class:"me-1 animate-text"},"L"),s("span",{class:"mx-1 animate-text"},"o"),s("span",{class:"mx-1 animate-text"},"a"),s("span",{class:"mx-1 animate-text"},"d"),s("span",{class:"mx-1 animate-text"},"i"),s("span",{class:"mx-1 animate-text"},"n"),s("span",{class:"mx-1 animate-text"},"g"),s("span",{class:"mx-2 animate-text"},"."),s("span",{class:"me-2 animate-text"},"."),s("span",{class:"animate-text"},".")])],-1),z={"aria-label":"breadcrumb","data-aos":"fade-up"},B={class:"breadcrumb"},M={class:"breadcrumb-item"},O=s("li",{class:"breadcrumb-item"},"訂單狀況",-1),R={class:"breadcrumb-item active","aria-current":"page"},j={class:"col-lg-6","data-aos":"fade-up"},F={class:"table"},U=s("th",{class:"fw-normal text-muted"},"訂單建立時間",-1),E={class:"fw-normal"},G=s("td",{class:"text-muted"},"訂單編號",-1),H={class:"position-relative w-100 mt-lg-5 my-5","data-aos":"fade-up"},I=s("div",{class:"line-gray border-top position-absolute border-2 z-index-n1 top-8"},null,-1),J={class:"list-unstyled d-flex justify-content-between text-gray"},K={key:0,class:"order-dot-white rounded-circle position-relative bg-white border border-primary d-block mt-lg-n1"},Q=s("i",{class:"bi bi-circle-fill fs-lg-14 fs-12 position-absolute translate-middle start-50 top-50"},null,-1),X=[Q],Y={key:1,class:"bi bi-circle-fill d-block fs-lg-6 fs-12"},Z={class:"fs-lg-6 fs-14"},$={class:"row gx-5 gy-5 row-cols-1 row-cols-lg-2","data-aos":"fade-up"},ss={class:"col"},ts=s("h4",{class:"text-center fw-bold bg-secondary py-2"},"訂購商品資訊",-1),es={key:0,class:"py-3"},os={class:"list-unstyled row mb-0"},rs={class:"card"},ls={class:"row g-0"},is={class:"col-4"},ds=["src"],ns={class:"col-8"},as={class:"card-body d-flex flex-column h-100 pb-0"},cs={class:"d-flex mb-auto"},us={class:"card-title mb-0 d-flex fs-lg-6 fs-14"},hs={class:"ms-auto"},_s={class:"card-text text-end"},bs={class:"mt-1"},ps=s("br",null,null,-1),ms={key:0,class:"mb-0 text-danger text-end fw-bold"},fs={key:1,class:"mb-0 text-danger text-end fw-bold"},gs=s("hr",null,null,-1),ys={class:"table table-borderless"},xs=s("th",{class:"fw-normal"},"商品總金額",-1),vs={key:0,class:"text-end fw-normal"},ws={key:0},Ss={key:0,class:"text-end"},ks={key:0},Cs=s("td",null,"優惠券折扣",-1),Ts={class:"text-end"},Ns={class:"border-top bg-secondary"},Ls=s("td",{class:"fw-bold text-danger"},"總計金額",-1),Ws={class:"text-end fw-bold text-danger"},qs={class:"col"},Vs=s("h4",{class:"text-center fw-bold bg-lightPurple py-2"},"收件人資訊",-1),As={class:"table table-borderless table-striped"},Ds=s("th",{class:"fw-normal"},[s("i",{class:"bi bi-envelope-fill"}),d(" 信箱")],-1),Ps={class:"fw-normal"},zs=s("td",null,[s("i",{class:"bi bi-person-fill"}),d(" 收件人姓名")],-1),Bs=s("td",null,[s("i",{class:"bi bi-telephone-fill"}),d(" 收件人電話")],-1),Ms=s("td",null,[s("i",{class:"bi bi-house-fill"}),d(" 收件人地址")],-1),Os=s("tr",null,[s("td",null,[s("i",{class:"bi bi-wallet-fill"}),d(" 付款方式")]),s("td",null,"貨到付款")],-1),Rs=s("td",null,[s("i",{class:"bi bi-chat-left-text-fill"}),d(" 留言")],-1);function js(r,c,u,h,e,Fs){const g=f("loading"),y=f("RouterLink");return i(),l("section",D,[_(g,{active:e.isLoading,"onUpdate:active":c[0]||(c[0]=t=>e.isLoading=t),"can-cancel":!1,"is-full-page":e.fullPage,"lock-scroll":!0},{default:b(()=>[P]),_:1},8,["active","is-full-page"]),s("nav",z,[s("ol",B,[s("li",M,[_(y,{to:"/member",href:"#",class:"link-primary"},{default:b(()=>[d("會員專區")]),_:1})]),O,s("li",R,o(e.order.deliveryStatus),1)])]),s("div",j,[s("table",F,[s("thead",null,[s("tr",null,[U,s("th",E,o(new Date(e.order.creatAt).toLocaleString().split(":")[0])+":"+o(new Date(e.order.creatAt).toLocaleString().split(":")[1]),1)])]),s("tbody",null,[s("tr",null,[G,s("td",null,o(e.order.id),1)])])])]),s("div",H,[I,s("div",{class:a(["border-top border-primary position-absolute border-2 z-index-n1 top-8",{"w-33":e.barWidth===33,"w-66":e.barWidth===66,"line-gray":e.barWidth===100}])},null,2),s("ul",J,[(i(),l(p,null,m(4,t=>s("li",{key:t+394,class:a(["d-flex flex-column align-items-center",{"text-primary":t===1&&e.barWidth>=0||t===2&&e.barWidth>=33||t===3&&e.barWidth>=66||t===4&&e.barWidth===100,"fw-bold":t===1&&e.order.deliveryStatus==="待出貨"||t===2&&e.order.deliveryStatus==="運送中"||t===3&&e.order.deliveryStatus==="待取貨"||t===4&&e.order.deliveryStatus==="訂單完成"}])},[t===1&&e.order.deliveryStatus==="待出貨"||t===2&&e.order.deliveryStatus==="運送中"||t===3&&e.order.deliveryStatus==="待取貨"||t===4&&e.order.deliveryStatus==="訂單完成"?(i(),l("div",K,X)):(i(),l("i",Y)),s("div",{class:a(["mt-2 text-center rounded-circle w-lg-90-md-70",{"bg-secondary":t===1&&e.order.deliveryStatus==="待出貨"||t===2&&e.order.deliveryStatus==="運送中"||t===3&&e.order.deliveryStatus==="待取貨"||t===4&&e.order.deliveryStatus==="訂單完成"}])},[s("i",{class:a(["fs-lg-2 fs-4 bi",{"bi-box-seam":t===1,"bi-truck":t===2,"bi-house-check":t===3,"bi-clipboard-check":t===4}])},null,2),s("p",Z,o(t===1?"待出貨":t===2?"運送中":t===3?"已抵達":"訂單完成"),1)],2)],2)),64))])]),s("div",$,[s("div",ss,[ts,e.order.cart?(i(),l("div",es,[s("ul",os,[(i(!0),l(p,null,m(e.order.cart.items,(t,x)=>(i(),l("li",{class:"col-12",key:x+756345},[s("div",rs,[s("div",ls,[s("div",is,[s("img",{src:t.product.imgUrl,class:"img-fluid object-fit-cover w-100",style:{height:"130px"}},null,8,ds)]),s("div",ns,[s("div",as,[s("div",cs,[s("h5",us,o(t.product.title),1),s("span",hs,"x "+o(r.numberComma(t.qty)),1)]),s("div",_s,[s("del",{class:a(["me-2 text-muted mt-1 fs-14",{"d-none":!t.product.isCheaper}])},"NT$ "+o(r.numberComma(t.product.originalPrice)),3),s("span",bs,[s("span",{class:a({"text-danger":t.product.isCheaper,"fw-bold":t.product.isCheaper})},"NT$ "+o(r.numberComma(t.product.price)),3),d(" / "+o(t.product.num)+o(t.product.unit),1)]),ps]),t.product.category!=="組合包"?(i(),l("p",ms,"小計：NT$ "+o(r.numberComma(t.product.price*t.qty))+" / "+o(r.numberComma(t.product.num*t.qty))+o(t.product.unit),1)):n("",!0),t.product.category==="組合包"?(i(),l("p",fs,"小計：NT$ "+o(r.numberComma(t.product.price*t.qty))+" / "+o(r.numberComma(t.qty))+"組",1)):n("",!0)])])])]),gs]))),128))]),s("table",ys,[s("thead",null,[s("tr",null,[xs,e.order.cart?(i(),l("th",vs,"NT$ "+o(r.numberComma(e.order.cart.total)),1)):n("",!0)])]),s("tbody",null,[s("tr",null,[s("td",null,[d("運費"),e.order.cart.total>=1e3?(i(),l("span",ws,"(滿千元免運)")):n("",!0)]),e.order.cart?(i(),l("td",Ss,"NT$ "+o(e.order.cart.deliveryCharge),1)):n("",!0)]),e.order.cart.total+e.order.cart.deliveryCharge!==e.order.cart.finalTotal&&e.order.cart.coupon?(i(),l("tr",ks,[Cs,s("td",Ts,"- NT$ "+o(r.numberComma(Math.ceil(e.order.cart.total*(e.order.cart.coupon.discount/100)))),1)])):n("",!0),s("tr",Ns,[Ls,s("td",Ws,"NT$ "+o(r.numberComma(e.order.cart.finalTotal)),1)])])])])):n("",!0)]),s("div",qs,[Vs,s("table",As,[s("thead",null,[s("tr",null,[Ds,s("th",Ps,o(e.order.email),1)])]),s("tbody",null,[s("tr",null,[zs,s("td",null,o(e.order.name),1)]),s("tr",null,[Bs,s("td",null,o(e.order.phoneNum),1)]),s("tr",null,[Ms,s("td",null,o(e.order.address),1)]),Os,s("tr",null,[Rs,s("td",null,o(e.order.message===""?"無":e.order.message),1)])])])])])])}const Qs=V(A,[["render",js]]);export{Qs as default};
