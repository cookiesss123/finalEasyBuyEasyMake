import{m as g,b as y}from"./axios-77a7bf34.js";import{c as f}from"./carts-7b352231.js";import{v as N}from"./runtime-dom.esm-bundler-bb3e8e23.js";import{_ as w,U as m,V as s,a1 as V,a2 as k,a0 as a,Z as C,W as n,X as b,a6 as T,r as p,o as _,Y as c,a4 as d,$ as I}from"./_plugin-vue_export-helper-cbb9d8af.js";import"./vue-router-1aba70ec.js";import"./_commonjsHelpers-042e6b4d.js";const S={data(){return{userId:"",token:"",nickName:"",user:{email:"",name:"",phoneNum:"",address:"",message:""}}},methods:{...g(f,["getCart","addOrder"]),isPhone(t){return/^(09)[0-9]{8}$/.test(t)?!0:"需要正確的電話號碼"}},mounted(){this.token=document.cookie.replace(/(?:(?:^|.*;\s*)myToken\s*=\s*([^;]*).*$)|^.*$/,"$1"),this.userId=localStorage.getItem("userId"),this.userId=Number(this.userId),this.nickName=localStorage.getItem("nickName"),this.getCart()},computed:{...y(f,["cart","cartItems"])}},U={class:"py-100-sm-40"},q=T('<div class="container"><nav aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item fs-5"> 購物車 </li><li class="breadcrumb-item active fs-5 d-none d-lg-block" aria-current="page">填寫訂單資訊</li></ol></nav></div>',1),z={class:"container mt-5"},F={class:"row row-cols-1 row-cols-lg-2 gx-5"},M={class:"col"},B={class:"row"},E={class:"card mb-3 border-0"},L={class:"row g-0"},O=["src"],P={class:"col-md-8"},W={class:"card-body"},j={class:"card-title d-flex"},D={class:"ms-auto"},R={class:"card-text d-flex justify-content-end"},A={class:"mt-1"},X=s("br",null,null,-1),Y={class:"mb-0 text-danger text-end"},Z=s("hr",null,null,-1),G={class:"col-12"},H={class:"card border-0"},J={class:"card-body"},K={class:"table table-borderless"},Q=s("th",{class:"fw-normal"},"商品總金額",-1),$={class:"text-end fw-normal"},ss=s("td",null,"運費",-1),es={class:"text-end"},os={key:0},ts=s("td",null,"優惠券折扣",-1),ls={class:"text-end"},as={class:"border-top"},rs=s("td",{class:"fw-bold text-danger"},"總計金額",-1),ns={class:"text-end fw-bold text-danger"},ds={class:"col-12"},cs=s("i",{class:"bi bi-arrow-left"},null,-1),is={class:"col"},us={class:"row gy-4 d-flex"},ms={class:"col-12 fs-5"},ps=s("i",{class:"bi bi-envelope-fill"},null,-1),_s={class:"col-12 fs-5"},bs=s("i",{class:"bi bi-person-fill"},null,-1),hs={class:"col-12 fs-5"},fs=s("i",{class:"bi bi-telephone-fill"},null,-1),vs={class:"col-12 fs-5"},xs=s("i",{class:"bi bi-house-fill"},null,-1),gs=s("div",{class:"col-12 fs-5 position-relative"},[s("label",{for:"payWay",class:"form-label text-brown"},[s("i",{class:"bi bi-wallet-fill"}),c(" 付款方式")]),s("input",{type:"text",class:"form-control",id:"payWay",value:"貨到付款",disabled:""}),s("i",{class:"fs-4 text-success bi bi-check-lg position-absolute",style:{top:"40px",right:"20px"}}),s("p",{class:"text-muted",style:{"font-size":"14px"}},"注意：本店一律採貨到付款的方式喔!")],-1),ys={class:"col-12 fs-5"},Ns=s("i",{class:"bi bi-chat-left-text-fill"},null,-1),ws=s("span",{class:"text-muted ms-2",style:{"font-size":"14px"}},"(可不填寫)",-1),Vs=s("p",{class:"text-muted",style:{"font-size":"14px"}},"有任何問題或是貨品相關注意事項都歡迎與我們聯繫~",-1),ks=s("div",{class:"col-12 mt-4"},[s("button",{type:"submit",class:"btn btn-brown w-100"},"確認建立訂單")],-1);function Cs(t,l,Ts,Is,o,v){const h=p("RouterLink"),i=p("VField"),u=p("ErrorMessage"),x=p("VForm");return _(),m("div",U,[q,s("section",z,[s("div",F,[s("div",M,[s("div",B,[(_(!0),m(V,null,k(t.cartItems,(e,r)=>(_(),m("div",{class:"col-12",key:r+756345},[s("div",E,[s("div",L,[n(h,{to:`/products/${e.product.id}`,class:"col-md-4"},{default:b(()=>[s("img",{src:e.product.imgUrl,class:"img-fluid rounded-start",style:{"object-fit":"cover",height:"150px",width:"300px"}},null,8,O)]),_:2},1032,["to"]),s("div",P,[s("div",W,[s("h5",j,[c(a(e.product.title)+" ",1),s("span",D,"x "+a(e.qty),1)]),s("div",R,[s("del",{class:d(["me-2 text-muted mt-1",{"d-none":!e.product.isCheaper}]),style:{"font-size":"14px"}},"NT$ "+a(e.product.originalPrice),3),s("span",A,[s("span",{class:d({"text-danger":e.product.isCheaper,"fw-bold":e.product.isCheaper})},"NT$ "+a(e.product.price),3),c(" / "+a(e.product.num)+a(e.product.unit),1)]),X]),s("p",Y,"小計：NT$ "+a(e.product.price*e.qty)+" / "+a(e.product.num*e.qty)+a(e.product.unit),1)])])])]),Z]))),128)),s("div",G,[s("div",H,[s("div",J,[s("table",K,[s("thead",null,[s("tr",null,[Q,s("th",$,"NT$ "+a(t.cart.total),1)])]),s("tbody",null,[s("tr",null,[ss,s("td",es,"NT$ "+a(t.cart.deliveryCharge),1)]),t.cart.total+t.cart.deliveryCharge!==t.cart.finalTotal&&t.cart.coupon?(_(),m("tr",os,[ts,s("td",ls,"- NT$ "+a(Math.ceil(t.cart.total*(t.cart.coupon.discount/100))),1)])):C("",!0),s("tr",as,[rs,s("td",ns,"NT$ "+a(t.cart.finalTotal),1)])])])])])]),s("div",ds,[n(h,{to:"/products",class:"btn btn-outline-brown mb-4 ms-3"},{default:b(()=>[cs,c(" 繼續選購")]),_:1})])])]),s("div",is,[n(x,{ref:"form",class:"",onSubmit:l[5]||(l[5]=()=>t.addOrder(o.user.email,o.user.name,o.user.phoneNum,o.user.address,o.user.message))},{default:b(({errors:e})=>[s("div",us,[s("div",ms,[s("label",{for:"email",class:d(["form-label text-secondary",{"text-brown":o.user.email&&!e.信箱}])},[ps,c(" 信箱")],2),n(i,{id:"email",name:"信箱",type:"email",class:d(["form-control border-0 border-bottom",{"is-invalid":e.信箱,"is-valid":o.user.email&&!e.信箱}]),placeholder:"請輸入您的信箱",rules:"email|required",modelValue:o.user.email,"onUpdate:modelValue":l[0]||(l[0]=r=>o.user.email=r)},null,8,["class","modelValue"]),n(u,{name:"信箱",class:"invalid-feedback"})]),s("div",_s,[s("label",{for:"name",class:d(["form-label text-secondary",{"text-brown":o.user.name&&!e.收件人姓名}])},[bs,c(" 收件人姓名")],2),n(i,{id:"name",name:"收件人姓名",type:"name",class:d(["form-control border-0 border-bottom",{"is-invalid":e.收件人姓名,"is-valid":!e.收件人姓名&&o.user.name}]),placeholder:"請輸入您的收件人姓名",rules:"required",modelValue:o.user.name,"onUpdate:modelValue":l[1]||(l[1]=r=>o.user.name=r)},null,8,["class","modelValue"]),n(u,{name:"收件人姓名",class:"invalid-feedback"})]),s("div",hs,[s("label",{for:"phoneNum",class:d(["form-label text-secondary",{"text-brown":o.user.phoneNum&&!e.收件人電話}])},[fs,c(" 收件人電話")],2),n(i,{id:"phoneNum",name:"收件人電話",type:"phoneNum",class:d(["form-control border-0 border-bottom",{"is-invalid":e.收件人電話,"is-valid":!e.收件人電話&&o.user.phoneNum}]),placeholder:"請輸入您的收件人電話",rules:v.isPhone,modelValue:o.user.phoneNum,"onUpdate:modelValue":l[2]||(l[2]=r=>o.user.phoneNum=r)},null,8,["class","rules","modelValue"]),n(u,{name:"收件人電話",class:"invalid-feedback"})]),s("div",vs,[s("label",{for:"address",class:d(["form-label text-secondary",{"text-brown":o.user.address&&!e.收件人地址}])},[xs,c(" 收件人地址")],2),n(i,{id:"address",name:"收件人地址",type:"address",class:d(["form-control border-0 border-bottom",{"is-invalid":e.收件人地址,"is-valid":!e.收件人地址&&o.user.address}]),placeholder:"請輸入您的收件人地址",rules:"required",modelValue:o.user.address,"onUpdate:modelValue":l[3]||(l[3]=r=>o.user.address=r)},null,8,["class","modelValue"]),n(u,{name:"收件人地址",class:"invalid-feedback"})]),gs,s("div",ys,[s("label",{for:"message",class:d(["form-label text-secondary",{"text-brown":o.user.message}])},[Ns,c(" 留言")],2),ws,I(s("textarea",{id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":l[4]||(l[4]=r=>o.user.message=r)},null,512),[[N,o.user.message]]),Vs]),ks])]),_:1},512)])])])])}const Bs=w(S,[["render",Cs]]);export{Bs as default};
