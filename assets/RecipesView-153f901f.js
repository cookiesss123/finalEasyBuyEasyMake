import{R as B}from"./vue-router-46224dd8.js";import{m as E}from"./index-6af516ba.js";import{c as V}from"./carts-32b42ff3.js";import{n as N}from"./numberCommaMixin-e0aac39c.js";import{P}from"./PaginationComponent-828e246b.js";import{C as O}from"./collapse-6026b968.js";import{r as u,b as _,o as D,d as f,s as S,c as T,a as q}from"./db-143b9a4b.js";import{L as U}from"./index-fde5e204.js";import{w as d,v as j,d as G,m as b}from"./runtime-dom.esm-bundler-e140de91.js";import{_ as H}from"./loadingLogo-ea15f612.js";import{_ as A}from"./cake17-28d317b6.js";import{_ as F}from"./image5-4fc2427e.js";import{_ as K}from"./image4-1806383b.js";import{_ as z}from"./undraw_Page_not_found_re_e9o6-993b7155.js";import{_ as W,a7 as l,F as k,a9 as w,a8 as e,af as n,ab as m,aa as a,ad as h,ac as g,N as I,ae as L,r as v,o as r}from"./_plugin-vue_export-helper-d28549df.js";import"./_commonjsHelpers-042e6b4d.js";import"./base-component-5a126788.js";const Y="/finalEasyBuyEasyMake/assets/allDessert1-fb69fd76.png",J="/finalEasyBuyEasyMake/assets/allDessert3-be510862.png",Q="/finalEasyBuyEasyMake/assets/mooncake1-18ed3215.png",X="/finalEasyBuyEasyMake/assets/mooncake3-6e2f0ae6.png",Z="/finalEasyBuyEasyMake/assets/macaroon1-81d6a824.png",$="/finalEasyBuyEasyMake/assets/macaroon3-feb2704b.png",ee="/finalEasyBuyEasyMake/assets/donut1-25bdf9d6.png",se="/finalEasyBuyEasyMake/assets/donut4-dcebc977.png",te="/finalEasyBuyEasyMake/assets/cakeStr1-c2c82c24.png",oe="/finalEasyBuyEasyMake/assets/pie1-a63f5865.png",ie="/finalEasyBuyEasyMake/assets/pie3-504fdd30.png",le={components:{RouterLink:B,PaginationComponent:P,Loading:U},mixins:[N],data(){return{costOrRateCollapse:{},highOrLowCollapse:{},recipes:[],selectCategory:"全部",selectItem:"全部",priceOrRate:"成本",highOrLow:"不拘",recipeSearchName:"",filterRecipes:[],bookMarks:[],thumbs:{},user:{},uid:"",search:!1,isLoading:!1,fullPage:!0}},methods:{...E(V,["toastMessage"]),getRecipes(){const i=u(f,"recipes/");_(i,t=>{this.recipes=t.val(),this.recipes=Object.entries(this.recipes).map(p=>(p[1].id=p[0],p[1]));const y=u(f,"recipeThumbs/");_(y,p=>{this.thumbs=p.val(),this.recipes.forEach((s,c)=>{Object.keys(this.thumbs).forEach(x=>{s.id===x&&(this.recipes[c].thumbs=this.thumbs[s.id].thumbs)})}),this.recipes.forEach((s,c)=>{s.thumbs||(this.recipes[c].thumbs=0)}),this.filterRecipes=this.recipes,this.isLoading=!1,!this.$route.query.category&&this.$route.fullPath==="/recipes"?this.$refs.pagination.renderPage(1,this.filterRecipes):this.$route.query.category&&this.searchRecipes()})})},searchRecipes(){this.selectItem==="全部"?this.filterRecipes=this.recipes:this.selectItem!=="全部"&&(this.filterRecipes=this.recipes.filter(i=>i.category===this.selectItem)),this.priceOrRate==="成本"&&this.highOrLow!=="不拘"?this.highOrLow==="低到高"?this.filterRecipes=this.filterRecipes.sort((i,t)=>i.price-t.price):this.highOrLow==="高到低"&&(this.filterRecipes=this.filterRecipes.sort((i,t)=>t.price-i.price)):this.priceOrRate==="評價"&&this.highOrLow!=="不拘"&&(this.highOrLow==="低到高"?this.filterRecipes=this.filterRecipes.sort((i,t)=>i.thumbs-t.thumbs):this.highOrLow==="高到低"&&(this.filterRecipes=this.filterRecipes.sort((i,t)=>t.thumbs-i.thumbs))),this.filterRecipes=this.filterRecipes.filter(i=>i.title.match(this.recipeSearchName)),this.search=!0,this.$refs.pagination.renderPage(1,this.filterRecipes)},getBookmarks(){D(q,i=>{if(i){this.uid=i.uid;const t=u(f,"users/"+i.uid);_(t,y=>{this.user=y.val();const p=u(f,`recipeBookmarks/${this.uid}`);_(p,s=>{this.bookMarks=s.val(),this.bookMarks&&(this.bookMarks=Object.keys(this.bookMarks))})})}else this.uid=null,this.user={}})},addBookmark(i){if(!this.uid){this.toastMessage("登入才可使用收藏功能","error");return}const t=u(f,`recipeBookmarks/${this.uid}/${i.id}`);S(t,i),this.toastMessage("收藏成功")},deleteBookmark(i){T(u(f,`recipeBookmarks/${this.uid}/${i}`)),this.toastMessage("刪除收藏")}},mounted(){this.isLoading=!0,this.costOrRateCollapse=new O(this.$refs.costOrRateCollapse,{toggle:!1,parent:"#myGroup"}),this.highOrLowCollapse=new O(this.$refs.highOrLowCollapse,{toggle:!1,parent:"#myGroup"}),this.$route.query.category&&(this.selectItem=this.$route.query.category,this.highOrLow=this.$route.query.valueHighOrLow,this.priceOrRate=this.$route.query.valuePriceOrRate,this.recipeSearchName=this.$route.query.searchName),this.getBookmarks(),this.getRecipes()},watch:{selectCategory(){this.recipeSearchName="",this.selectCategory==="全部"?(this.selectItem="全部",this.filterRecipes=this.recipes,this.$refs.pagination.renderPage(1,this.filterRecipes)):this.selectCategory!=="全部"&&(this.selectItem=this.selectCategory,this.filterRecipes=this.recipes.filter(i=>i.category===this.selectItem)),this.$refs.pagination.renderPage(1,this.filterRecipes)},priceOrRate(){this.costOrRateCollapse.hide()},highOrLow(){this.highOrLowCollapse.hide()},filterRecipes(){this.costOrRateCollapse.hide(),this.highOrLowCollapse.hide()}}},re=e("div",{class:"d-flex flex-column align-items-center py-96"},[e("img",{src:H,class:"loadingLogo mb-3",style:{width:"150px"},alt:""}),e("p",{class:"text-center fw-bold text-primary h2"},[e("span",{class:"me-1 animate-text"},"L"),e("span",{class:"mx-1 animate-text"},"o"),e("span",{class:"mx-1 animate-text"},"a"),e("span",{class:"mx-1 animate-text"},"d"),e("span",{class:"mx-1 animate-text"},"i"),e("span",{class:"mx-1 animate-text"},"n"),e("span",{class:"mx-1 animate-text"},"g"),e("span",{class:"mx-2 animate-text"},"."),e("span",{class:"me-2 animate-text"},"."),e("span",{class:"animate-text"},".")])],-1),ae=e("section",{class:"text-center","data-aos":"fade-up"},[e("div",{class:"py-lg-200 py-96 bg-img-fixed",style:{"background-image":"url('https://images.unsplash.com/photo-1681923665434-b1ae711f3918?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80')"}}),e("h2",{class:"text-purple mb-0 fs-lg-1 fs-5 letter-spacing-20 fw-bold bg-secondary-lightPurple py-2"},"甜點種類")],-1),ne={class:"container","data-aos":"fade-up"},ce={class:"pt-lg-4 pt-3 position-relative"},me={class:"category-selector row row-cols-6 list-unstyled border-bottom"},pe={key:0,class:"category-img1 d-block mx-auto",src:Y,alt:"所有甜點灰色圖示"},he={key:1,src:J,class:"d-block mx-auto",alt:"所有甜點藍色圖示"},de=e("span",{class:"fs-12 fs-md-5 d-block py-2"},[a("所有"),e("br",{class:"d-lg-none"}),a("甜點")],-1),ue={key:0,class:"category-img2 d-block mx-auto",src:Q,alt:"台式甜點灰色圖示"},fe={key:1,class:"d-block mx-auto",src:X,alt:"台式甜點藍色圖示"},ge=e("span",{class:"fs-12 fs-md-5 d-block py-2"},[a("台式"),e("br",{class:"d-lg-none"}),a("甜點")],-1),be={key:0,class:"category-img3 d-block mx-auto",src:Z,alt:"法式甜點灰色圖示"},ye={key:1,class:"d-block mx-auto",src:$,alt:"法式甜點藍色圖示"},_e=e("span",{class:"fs-12 fs-md-5 d-block py-2"},[a("法式"),e("br",{class:"d-lg-none"}),a("甜點")],-1),ke={key:0,class:"category-img4 d-block mx-auto",src:ee,alt:"美式甜點灰色圖示"},xe={key:1,class:"d-block mx-auto",src:se,alt:"美式甜點藍色圖示"},we=e("span",{class:"fs-12 fs-md-5 d-block py-2"},[a("美式"),e("br",{class:"d-lg-none"}),a("甜點")],-1),ve={key:0,class:"category-img5 d-block mx-auto",src:te,alt:"日式甜點灰色圖示"},Re={key:1,class:"d-block mx-auto",src:A,alt:"日式甜點藍色圖示"},Ce=e("span",{class:"fs-12 fs-md-5 d-block py-2"},[a("日式"),e("br",{class:"d-lg-none"}),a("甜點")],-1),Oe={key:0,class:"category-img6 d-block mx-auto",src:oe,alt:"義式甜點灰色圖示"},Ie={key:1,class:"d-block mx-auto",src:ie,alt:"義式甜點藍色圖示"},Le=e("span",{class:"fs-12 fs-md-5 d-block py-2"},[a("義式"),e("br",{class:"d-lg-none"}),a("甜點")],-1),Me={class:"d-none d-lg-block my-5"},Be={class:"input-group"},Ee=e("i",{class:"bi bi-caret-down-fill"},null,-1),Ve={class:"ms-2 fw-bold"},Ne=e("i",{class:"bi bi-caret-down-fill"},null,-1),Pe={class:"ms-2 fw-bold"},De=e("span",{class:"material-icons-outlined text-primary"},"search",-1),Se=[De],Te={class:"row g-0",id:"myGroup"},qe={class:"col-2"},Ue={ref:"costOrRateCollapse",class:"collapse"},je={class:"card card-body border-0",style:{border:"0px !important"}},Ge={class:"btn-group-vertical",role:"group","aria-label":"Vertical radio toggle button group"},He=e("label",{class:"btn btn-outline-primary",for:"selectprice"},"成本",-1),Ae=e("label",{class:"btn btn-outline-primary",for:"selectRate"},"評價",-1),Fe={class:"col-2"},Ke={ref:"highOrLowCollapse",class:"collapse"},ze={class:"card card-body border-0",style:{border:"0px !important"}},We={class:"btn-group-vertical",role:"group","aria-label":"Vertical radio toggle button group"},Ye=e("label",{class:"btn btn-outline-primary",for:"noDifference"},"不拘",-1),Je=e("label",{class:"btn btn-outline-primary",for:"highToLow"},"高到低",-1),Qe=e("label",{class:"btn btn-outline-primary",for:"lowToHigh"},"低到高",-1),Xe={key:0,class:"row row-cols-xl-4 row-cols-lg-3 row-cols-2 gy-4"},Ze={class:"card position-relative"},$e=["src","alt"],es={class:"badge rounded-pill bg-primary position-absolute start-0 bottom-0 m-3"},ss=e("p",{class:"detail position-absolute top-50 start-50 translate-middle fw-bold letter-spacing-5 link-darkBrown fs-xl-5 text-center"},[a("查看"),e("br",{class:"d-xl-none d-lg-block"}),a("詳細食譜")],-1),ts=["onClick"],os=e("img",{src:F,alt:"收藏按鈕-未收藏"},null,-1),is=[os],ls=["onClick"],rs=e("img",{src:K,alt:"收藏按鈕-已收藏"},null,-1),as=[rs],ns={class:"fw-bold fs-md-5 fs-6"},cs={class:"d-flex align-items-center flex-wrap fs-md-6 fs-12"},ms=e("i",{class:"bi bi-hand-thumbs-up-fill"},null,-1),ps={key:1,class:"py-lg-4 text-center"},hs=e("img",{src:z,class:"mb-lg-3 mb-2 img-md-200-sm-150",alt:"查無資訊"},null,-1),ds=e("h3",{class:"fs-lg-3 fs-6"},"查無食譜，請您重新查詢",-1),us=[hs,ds];function fs(i,t,y,p,s,c){const x=v("loading"),R=v("RouterLink"),M=v("PaginationComponent");return r(),l("div",null,[k(x,{active:s.isLoading,"onUpdate:active":t[0]||(t[0]=o=>s.isLoading=o),"can-cancel":!1,"is-full-page":s.fullPage,"lock-scroll":!0},{default:w(()=>[re]),_:1},8,["active","is-full-page"]),ae,e("section",ne,[e("div",ce,[e("ul",me,[e("li",{class:n(["col text-center",{"pointer-events-none":s.selectItem==="全部"}])},[e("a",{href:"#",onClick:t[1]||(t[1]=d(()=>s.selectCategory="全部",["prevent"])),class:n(["text-decoration-none d-inline-block",{"fw-bold":s.selectItem==="全部","link-primary":s.selectItem==="全部"}])},[s.selectItem!=="全部"?(r(),l("img",pe)):s.selectItem==="全部"?(r(),l("img",he)):m("",!0),de],2)],2),e("li",{class:n(["col text-center",{"pointer-events-none":s.selectItem==="台式甜點"}])},[e("a",{href:"#",onClick:t[2]||(t[2]=d(()=>s.selectCategory="台式甜點",["prevent"])),class:n(["text-decoration-none d-inline-block",{"fw-bold":s.selectItem==="台式甜點","link-primary":s.selectItem==="台式甜點"}])},[s.selectItem!=="台式甜點"?(r(),l("img",ue)):s.selectItem==="台式甜點"?(r(),l("img",fe)):m("",!0),ge],2)],2),e("li",{class:n(["col text-center",{"pointer-events-none":s.selectItem==="法式甜點"}])},[e("a",{href:"#",onClick:t[3]||(t[3]=d(()=>s.selectCategory="法式甜點",["prevent"])),class:n(["text-decoration-none d-inline-block",{"fw-bold":s.selectItem==="法式甜點","link-primary":s.selectItem==="法式甜點"}])},[s.selectItem!=="法式甜點"?(r(),l("img",be)):s.selectItem==="法式甜點"?(r(),l("img",ye)):m("",!0),_e],2)],2),e("li",{class:n(["col text-center",{"pointer-events-none":s.selectItem==="美式甜點"}])},[e("a",{href:"#",onClick:t[4]||(t[4]=d(()=>s.selectCategory="美式甜點",["prevent"])),class:n(["text-decoration-none d-inline-block",{"fw-bold":s.selectItem==="美式甜點","link-primary":s.selectItem==="美式甜點"}])},[s.selectItem!=="美式甜點"?(r(),l("img",ke)):s.selectItem==="美式甜點"?(r(),l("img",xe)):m("",!0),we],2)],2),e("li",{class:n(["col text-center",{"pointer-events-none":s.selectItem==="日式甜點"}])},[e("a",{href:"#",onClick:t[5]||(t[5]=d(()=>s.selectCategory="日式甜點",["prevent"])),class:n(["text-decoration-none d-inline-block",{"fw-bold":s.selectItem==="日式甜點","link-primary":s.selectItem==="日式甜點"}])},[s.selectItem!=="日式甜點"?(r(),l("img",ve)):s.selectItem==="日式甜點"?(r(),l("img",Re)):m("",!0),Ce],2)],2),e("li",{class:n(["col text-center",{"pointer-events-none":s.selectItem==="義式甜點"}])},[e("a",{href:"#",onClick:t[6]||(t[6]=d(()=>s.selectCategory="義式甜點",["prevent"])),class:n(["text-decoration-none d-inline-block",{"fw-bold":s.selectItem==="義式甜點","link-primary":s.selectItem==="義式甜點"}])},[s.selectItem!=="義式甜點"?(r(),l("img",Oe)):s.selectItem==="義式甜點"?(r(),l("img",Ie)):m("",!0),Le],2)],2)]),e("div",{class:n(["blue-line bg-primary position-absolute",{"active-all-recipe":s.selectItem==="全部","active-taiwan":s.selectItem==="台式甜點","active-france":s.selectItem==="法式甜點","active-usa":s.selectItem==="美式甜點","active-japan":s.selectItem==="日式甜點","active-italy":s.selectItem==="義式甜點"}])},null,2)]),e("div",Me,[e("div",Be,[e("a",{class:"btn btn-outline-primary px-5",onClick:t[7]||(t[7]=()=>this.costOrRateCollapse.toggle())},[a("篩選對象 "),Ee,e("span",Ve,h(s.priceOrRate),1)]),e("button",{class:"btn btn-outline-primary px-5",type:"button",onClick:t[8]||(t[8]=()=>this.highOrLowCollapse.toggle())},[a("篩選值 "),Ne,e("span",Pe,h(s.highOrLow),1)]),g(e("input",{type:"search",class:"form-control border-primary border-end-0",placeholder:"請輸入食譜名稱","aria-label":"Example text with two button addons","onUpdate:modelValue":t[9]||(t[9]=o=>s.recipeSearchName=o),onKeyup:t[10]||(t[10]=G((...o)=>c.searchRecipes&&c.searchRecipes(...o),["enter"]))},null,544),[[j,s.recipeSearchName]]),e("button",{type:"submit",class:"btn border border-primary border-start-0 bg-transparent d-flex",onClick:t[11]||(t[11]=d((...o)=>c.searchRecipes&&c.searchRecipes(...o),["prevent"]))},Se)]),e("div",Te,[e("div",qe,[e("div",Ue,[e("div",je,[e("div",Ge,[g(e("input",{type:"radio",class:"btn-check",value:"成本",name:"priceOrRate",id:"selectprice",autocomplete:"off","onUpdate:modelValue":t[12]||(t[12]=o=>s.priceOrRate=o)},null,512),[[b,s.priceOrRate]]),He,g(e("input",{type:"radio",class:"btn-check",value:"評價",name:"priceOrRate",id:"selectRate",autocomplete:"off","onUpdate:modelValue":t[13]||(t[13]=o=>s.priceOrRate=o)},null,512),[[b,s.priceOrRate]]),Ae])])],512)]),e("div",Fe,[e("div",Ke,[e("div",ze,[e("div",We,[g(e("input",{type:"radio",class:"btn-check",value:"不拘",name:"highOrLow",id:"noDifference",autocomplete:"off",checked:"","onUpdate:modelValue":t[14]||(t[14]=o=>s.highOrLow=o)},null,512),[[b,s.highOrLow]]),Ye,g(e("input",{type:"radio",class:"btn-check",value:"高到低",name:"highOrLow",id:"highToLow",autocomplete:"off","onUpdate:modelValue":t[15]||(t[15]=o=>s.highOrLow=o)},null,512),[[b,s.highOrLow]]),Je,g(e("input",{type:"radio",class:"btn-check",value:"低到高",name:"highOrLow",id:"lowToHigh",autocomplete:"off","onUpdate:modelValue":t[16]||(t[16]=o=>s.highOrLow=o)},null,512),[[b,s.highOrLow]]),Qe])])],512)])])]),s.filterRecipes.length?(r(),l("div",Xe,[(r(!0),l(I,null,L(this.$refs.pagination.pageProducts,o=>(r(),l("div",{class:"col",key:o.id},[e("div",Ze,[k(R,{to:`/recipes/${o.id}`,class:"card-img-hover position-relative"},{default:w(()=>[e("img",{src:o.image,class:"object-fit-cover card-img",alt:o.title},null,8,$e),e("span",es,h(o.category),1),ss]),_:2},1032,["to"]),e("button",{type:"button",class:"position-absolute btn-bookmark border-0 bg-transparent top-0 end-0 m-2 m-md-3",onClick:()=>c.addBookmark(o)},is,8,ts),(r(!0),l(I,null,L(s.bookMarks,C=>(r(),l("div",{key:C+4567},[C===o.id?(r(),l("button",{key:0,type:"button",class:"position-absolute btn-bookmark-delete border-0 bg-transparent top-0 end-0 m-2 m-md-3",onClick:()=>c.deleteBookmark(o.id)},as,8,ls)):m("",!0)]))),128)),k(R,{to:`/recipes/${o.id}`,class:"card-body px-0 text-decoration-none link-darkBrown"},{default:w(()=>[e("h3",ns,h(o.title),1),e("div",cs,[o.total?(r(),l("del",{key:0,class:n(["me-2 text-muted",{"d-none":o.price===o.total}])},"NT$ "+h(i.numberComma(o.total)),3)):m("",!0),e("span",{class:n(["me-1",{"text-danger":o.price!==o.total,"fw-bold":o.price!==o.total}])},"NT$ "+h(i.numberComma(o.price)),3),e("span",null," / "+h(o.content),1),e("span",{class:n(["badge rounded-pill ms-auto border mt-1 mt-md-0",{"border-primary":o.thumbs!==0,"border-gray":o.thumbs===0,"text-primary":o.thumbs!==0,"text-gray":o.thumbs===0,"bg-secondary":o.thumbs!==0,"bg-whiteGray":o.thumbs===0}])},[a(h(o.thumbs)+" ",1),ms],2)])]),_:2},1032,["to"])])]))),128))])):!s.filterRecipes.length&&s.search?(r(),l("div",ps,us)):m("",!0),k(M,{ref:"pagination","price-or-rate":s.priceOrRate,"filter-recipes":s.filterRecipes,class:"mb-5"},null,8,["price-or-rate","filter-recipes"])])])}const Ns=W(le,[["render",fs]]);export{Ns as default};
