import{R as N}from"./vue-router-2c21c692.js";import{m as S}from"./index-6c7632a6.js";import{c as T}from"./carts-e672eb99.js";import{n as q}from"./numberCommaMixin-e0aac39c.js";import{P as U}from"./PaginationComponent-8d29b0f7.js";import{C as R,_ as G}from"./icon-searchMobile-02ca4854.js";import{L as D}from"./LoadingModal-16ab9486.js";import{r as m,o as f,g as H,d as p,s as A,a as K,e as Y}from"./db-6192b564.js";import{v as z,d as F,w as W,e as g}from"./runtime-dom.esm-bundler-54ced388.js";import{_ as X}from"./image5-4fc2427e.js";import{_ as Z}from"./image4-1806383b.js";import{_ as J}from"./undraw_Page_not_found_re_e9o6-6d6a6f1b.js";import{_ as Q,U as l,W as y,V as t,a4 as i,Z as a,Y as k,a0 as h,$ as u,a1 as I,a2 as x,r as w,o as c,X as O}from"./_plugin-vue_export-helper-03b40388.js";import"./_commonjsHelpers-042e6b4d.js";import"./modal-5929133b.js";import"./loadingLogo-3bb466c0.js";const L="/finalEasyMakeEasyBuy/assets/dessert-main-image-molten-cake-0fbd4f2-f4502124.jpg",B="/finalEasyMakeEasyBuy/assets/13d687f987752ba797cc3684987316e6-f2b80201.jpg",M="/finalEasyMakeEasyBuy/assets/cookies-4053771_960_720222-a7810d77.jpg",j="/finalEasyMakeEasyBuy/assets/baked-mochi-donuts-DSC_3500-1x1-1200-ae576dd9.jpg",E="/finalEasyMakeEasyBuy/assets/IMG_P-0051-1000x600-2dd9dd1d.jpg",V="/finalEasyMakeEasyBuy/assets/瘋提拉米蘇-1-c740fada.jpg";const $={components:{RouterLink:N,PaginationComponent:U,LoadingModal:D},mixins:[q],data(){return{costOrRateCollapse:{},highOrLowCollapse:{},recipes:[],selectCategory:"全部",selectItem:"全部",priceOrRate:"成本",highOrLow:"不拘",recipeSearchName:"",filterRecipes:[],bookMarks:[],thumbs:{},uid:"",search:!1}},methods:{...S(T,["toastMessage"]),getRecipes(){const r=m(p,"recipes/");f(r,s=>{this.recipes=s.val(),this.recipes=Object.entries(this.recipes).map(d=>(d[1].id=d[0],d[1])),console.log(this.recipes,"食譜資料");const b=m(p,"recipeThumbs/");f(b,d=>{this.thumbs=d.val(),console.log(this.thumbs,"所有讚"),this.recipes.forEach((e,n)=>{Object.keys(this.thumbs).forEach(_=>{e.id===_&&(this.recipes[n].thumbs=this.thumbs[e.id].thumbs)})}),this.recipes.forEach((e,n)=>{e.thumbs||(this.recipes[n].thumbs=0)}),console.log(this.recipes,"食譜"),this.filterRecipes=this.recipes,!this.$route.query.category&&this.$route.fullPath==="/recipes"?this.$refs.pagination.renderPage(1,this.filterRecipes):this.$route.query.category&&this.searchRecipes()})})},searchRecipes(){this.selectItem==="全部"?this.filterRecipes=this.recipes:this.selectItem!=="全部"&&(this.filterRecipes=this.recipes.filter(r=>r.category===this.selectItem)),this.priceOrRate==="成本"&&this.highOrLow!=="不拘"?this.highOrLow==="低到高"?this.filterRecipes=this.filterRecipes.sort((r,s)=>r.price-s.price):this.highOrLow==="高到低"&&(this.filterRecipes=this.filterRecipes.sort((r,s)=>s.price-r.price)):this.priceOrRate==="評價"&&this.highOrLow!=="不拘"&&(this.highOrLow==="低到高"?this.filterRecipes=this.filterRecipes.sort((r,s)=>r.thumbs-s.thumbs):this.highOrLow==="高到低"&&(this.filterRecipes=this.filterRecipes.sort((r,s)=>s.thumbs-r.thumbs))),this.filterRecipes=this.filterRecipes.filter(r=>r.title.match(this.recipeSearchName)),this.search=!0,this.$refs.pagination.renderPage(1,this.filterRecipes)},getBookmarks(){H(Y,r=>{if(r){this.uid=r.uid,console.log(this.uid,"使用者已登入取得 uid");const s=m(p,"users/"+r.uid);f(s,b=>{this.user=b.val(),console.log(this.user,"讀取的資料");const d=m(p,`recipeBookmarks/${this.uid}`);f(d,e=>{this.bookMarks=e.val(),this.bookMarks&&(this.bookMarks=Object.keys(this.bookMarks)),console.log(this.bookMarks,"書籤")})})}else console.log("並未登入"),this.uid=null,this.user={}})},addBookmark(r){this.uid||this.toastMessage("登入才可使用收藏功能","error");const s=m(p,`recipeBookmarks/${this.uid}/${r.id}`);A(s,r),this.toastMessage("收藏成功")},deleteBookmark(r){K(m(p,`recipeBookmarks/${this.uid}/${r}`)),this.toastMessage("刪除收藏")}},mounted(){this.costOrRateCollapse=new R(this.$refs.costOrRateCollapse,{toggle:!1,parent:"#myGroup"}),this.highOrLowCollapse=new R(this.$refs.highOrLowCollapse,{toggle:!1,parent:"#myGroup"}),this.$route.query.category&&(this.selectItem=this.$route.query.category,this.highOrLow=this.$route.query.valueHighOrLow,this.priceOrRate=this.$route.query.valuePriceOrRate,this.recipeSearchName=this.$route.query.searchName),this.getBookmarks(),this.getRecipes()},watch:{selectCategory(){this.recipeSearchName="",this.selectCategory==="全部"?(this.selectItem="全部",this.filterRecipes=this.recipes,this.$refs.pagination.renderPage(1,this.filterRecipes)):this.selectCategory!=="全部"&&(this.selectItem=this.selectCategory,this.filterRecipes=this.recipes.filter(r=>r.category===this.selectItem),console.log(this.filterRecipes,"篩選結果")),this.$refs.pagination.renderPage(1,this.filterRecipes)},priceOrRate(){this.costOrRateCollapse.hide()},highOrLow(){this.highOrLowCollapse.hide()},filterRecipes(){this.costOrRateCollapse.hide(),this.highOrLowCollapse.hide()}}},ee={class:"py-100-sm-40"},te={class:"bg-lightYellow mb-4 py-4 px-lg-5",style:{"overflow-x":"hidden"}},se={class:"container"},oe={class:"selectProductCategory row row-cols-lg-6 row-cols-3"},re={key:0,src:L,alt:"",class:"rounded-circle",style:{"object-fit":"cover"}},ie={key:1,src:L,alt:"",class:"rounded-circle",style:{"object-fit":"cover",transform:"scale(1.2,1.2)"}},le={key:0,src:B,alt:"",class:"rounded-circle",style:{"object-fit":"cover"}},ce={key:1,src:B,alt:"",class:"rounded-circle",style:{"object-fit":"cover",transform:"scale(1.2,1.2)"}},ne={key:0,src:M,alt:"",class:"rounded-circle",style:{"object-fit":"cover"}},ae={key:1,src:M,alt:"",class:"rounded-circle",style:{"object-fit":"cover",transform:"scale(1.2,1.2)"}},de={key:0,src:j,alt:"",class:"rounded-circle",style:{"object-fit":"cover"}},he={key:1,src:j,alt:"",class:"rounded-circle",style:{"object-fit":"cover",transform:"scale(1.2,1.2)"}},me={key:0,src:E,alt:"",class:"rounded-circle",style:{"object-fit":"cover"}},pe={key:1,src:E,alt:"",class:"rounded-circle",style:{"object-fit":"cover",transform:"scale(1.2,1.2)"}},ue={key:0,src:V,alt:"",class:"rounded-circle",style:{"object-fit":"cover"}},ge={key:1,src:V,alt:"",class:"rounded-circle",style:{"object-fit":"cover",transform:"scale(1.2,1.2)"}},be={class:"d-none d-lg-block container selectProduct my-5"},fe={class:"input-group"},ye=t("i",{class:"bi bi-caret-down-fill"},null,-1),_e={class:"ms-2 fw-bold"},ke=t("i",{class:"bi bi-caret-down-fill"},null,-1),we={class:"ms-2 fw-bold"},Ce=t("img",{src:G,style:{height:"25px"},alt:""},null,-1),ve=[Ce],Re={class:"row g-0",id:"myGroup"},Ie={class:"col-2"},xe={ref:"costOrRateCollapse",class:"collapse"},Oe={class:"card card-body border-0"},Le={class:"btn-group-vertical",role:"group","aria-label":"Vertical radio toggle button group"},Be=t("label",{class:"btn btn-outline-brown",for:"selectprice"},"成本",-1),Me=t("label",{class:"btn btn-outline-brown",for:"selectRate"},"評價",-1),je={class:"col-2"},Ee={ref:"highOrLowCollapse",class:"collapse"},Ve={class:"card card-body border-0"},Pe={class:"btn-group-vertical",role:"group","aria-label":"Vertical radio toggle button group"},Ne=t("label",{class:"btn btn-outline-brown",for:"noDifference"},"不拘",-1),Se=t("label",{class:"btn btn-outline-brown",for:"highToLow"},"高到低",-1),Te=t("label",{class:"btn btn-outline-brown",for:"lowToHigh"},"低到高",-1),qe={class:"container"},Ue={key:0,class:"row row-cols-lg-4 row-cols-1 gy-4"},Ge={class:"card position-relative border-0 bg-transparent",style:{"border-radius":"20px"}},De={class:"cardImg",style:{"border-radius":"20px"}},He=["src"],Ae={class:"card-text"},Ke=["onClick"],Ye=t("img",{src:X},null,-1),ze=[Ye],Fe=["onClick"],We=t("img",{src:Z},null,-1),Xe=[We],Ze={style:{"pointer-events":"none",top:"155px"},class:"badge rounded-pill bg-brown mt-4 border-0 m-3 position-absolute start-0"},Je={class:"d-flex justify-content-between align-items-center fw-bold"},Qe={class:"me-1"},$e=t("i",{class:"bi bi-hand-thumbs-up-fill"},null,-1),et={key:1,class:"py-10"},tt=t("img",{src:J,class:"mb-3",alt:"",style:{height:"250px",display:"block",margin:"auto"}},null,-1),st=t("h2",{class:"text-center"},"查無食譜，請您重新查詢",-1),ot=[tt,st];function rt(r,s,b,d,e,n){const _=w("LoadingModal"),C=w("RouterLink"),P=w("PaginationComponent");return c(),l("div",ee,[y(_,{ref:"loadingModal"},null,512),t("section",te,[t("div",se,[t("div",oe,[t("button",{type:"button",class:i(["col d-flex flex-column align-items-center btn border-0",{selectedImg:e.selectCategory==="全部"}]),onClick:s[0]||(s[0]=()=>e.selectCategory="全部")},[t("div",{class:i(["cardImg mb-2",{"opacity-100":e.selectItem==="全部"}])},[t("div",{class:i(["enlargeImg rounded-circle",{selectImgBorder:e.selectItem==="全部"}])},[e.selectCategory!=="全部"?(c(),l("img",re)):e.selectCategory==="全部"?(c(),l("img",ie)):a("",!0)],2)],2),t("span",{class:i(["text-secondary",{"text-brown":e.selectItem==="全部","fw-bold":e.selectItem==="全部"}])},"全部",2)],2),t("button",{type:"button",class:i(["col d-flex flex-column align-items-center btn border-0",{selectedImg:e.selectCategory==="台式甜點"}]),onClick:s[1]||(s[1]=()=>e.selectCategory="台式甜點")},[t("div",{class:i(["cardImg mb-2",{"opacity-100":e.selectItem==="台式甜點"}])},[t("div",{class:i(["enlargeImg rounded-circle",{selectImgBorder:e.selectItem==="台式甜點"}])},[e.selectCategory!=="台式甜點"?(c(),l("img",le)):e.selectCategory==="台式甜點"?(c(),l("img",ce)):a("",!0)],2)],2),t("span",{class:i(["text-secondary",{"text-brown":e.selectItem==="台式甜點","fw-bold":e.selectItem==="台式甜點"}])},"台式甜點",2)],2),t("button",{type:"button",class:i(["col d-flex flex-column align-items-center btn border-0",{selectedImg:e.selectCategory==="法式甜點"}]),onClick:s[2]||(s[2]=()=>e.selectCategory="法式甜點")},[t("div",{class:i(["cardImg mb-2",{"opacity-100":e.selectItem==="法式甜點"}])},[t("div",{class:i(["enlargeImg rounded-circle",{selectImgBorder:e.selectItem==="法式甜點"}])},[e.selectCategory!=="法式甜點"?(c(),l("img",ne)):e.selectCategory==="法式甜點"?(c(),l("img",ae)):a("",!0)],2)],2),t("span",{class:i(["text-secondary",{"text-brown":e.selectItem==="法式甜點","fw-bold":e.selectItem==="法式甜點"}])},"法式甜點",2)],2),t("button",{type:"button",class:i(["col d-flex flex-column align-items-center btn border-0",{selectedImg:e.selectCategory==="美式甜點"}]),onClick:s[3]||(s[3]=()=>e.selectCategory="美式甜點")},[t("div",{class:i(["cardImg mb-2",{"opacity-100":e.selectItem==="美式甜點"}])},[t("div",{class:i(["enlargeImg rounded-circle",{selectImgBorder:e.selectItem==="美式甜點"}])},[e.selectCategory!=="美式甜點"?(c(),l("img",de)):e.selectCategory==="美式甜點"?(c(),l("img",he)):a("",!0)],2)],2),t("span",{class:i(["text-secondary",{"text-brown":e.selectItem==="美式甜點","fw-bold":e.selectItem==="美式甜點"}])},"美式甜點",2)],2),t("button",{type:"button",class:i(["col d-flex flex-column align-items-center btn border-0",{selectedImg:e.selectCategory==="日式甜點"}]),onClick:s[4]||(s[4]=()=>e.selectCategory="日式甜點")},[t("div",{class:i(["cardImg mb-2",{"opacity-100":e.selectItem==="日式甜點"}])},[t("div",{class:i(["enlargeImg rounded-circle",{selectImgBorder:e.selectItem==="日式甜點"}])},[e.selectCategory!=="日式甜點"?(c(),l("img",me)):e.selectCategory==="日式甜點"?(c(),l("img",pe)):a("",!0)],2)],2),t("span",{class:i(["text-secondary",{"text-brown":e.selectItem==="日式甜點","fw-bold":e.selectItem==="日式甜點"}])},"日式甜點",2)],2),t("button",{type:"button",class:i(["col d-flex flex-column align-items-center btn border-0",{selectedImg:e.selectCategory==="義式甜點"}]),onClick:s[5]||(s[5]=()=>e.selectCategory="義式甜點")},[t("div",{class:i(["cardImg mb-2",{"opacity-100":e.selectItem==="義式甜點"}])},[t("div",{class:i(["enlargeImg rounded-circle",{selectImgBorder:e.selectItem==="義式甜點"}])},[e.selectCategory!=="義式甜點"?(c(),l("img",ue)):e.selectCategory==="義式甜點"?(c(),l("img",ge)):a("",!0)],2)],2),t("span",{class:i(["text-secondary",{"text-brown":e.selectItem==="義式甜點","fw-bold":e.selectItem==="義式甜點"}])},"義式甜點",2)],2)])])]),t("section",be,[t("div",fe,[t("a",{class:"btn btn-outline-brown px-5",onClick:s[6]||(s[6]=()=>this.costOrRateCollapse.toggle())},[k("篩選對象 "),ye,t("span",_e,h(e.priceOrRate),1)]),t("button",{class:"btn btn-outline-brown px-5",type:"button",onClick:s[7]||(s[7]=()=>this.highOrLowCollapse.toggle())},[k("篩選值 "),ke,t("span",we,h(e.highOrLow),1)]),u(t("input",{type:"search",class:"form-control border-brown border-end-0",placeholder:"請輸入食譜名稱","aria-label":"Example text with two button addons","onUpdate:modelValue":s[8]||(s[8]=o=>e.recipeSearchName=o),onKeyup:s[9]||(s[9]=F((...o)=>n.searchRecipes&&n.searchRecipes(...o),["enter"]))},null,544),[[z,e.recipeSearchName]]),t("button",{type:"submit",class:"btn border border-brown border-start-0 bg-transparent",onClick:s[10]||(s[10]=W((...o)=>n.searchRecipes&&n.searchRecipes(...o),["prevent"]))},ve)]),t("div",Re,[t("div",Ie,[t("div",xe,[t("div",Oe,[t("div",Le,[u(t("input",{type:"radio",class:"btn-check",value:"成本",name:"priceOrRate",id:"selectprice",autocomplete:"off","onUpdate:modelValue":s[11]||(s[11]=o=>e.priceOrRate=o)},null,512),[[g,e.priceOrRate]]),Be,u(t("input",{type:"radio",class:"btn-check",value:"評價",name:"priceOrRate",id:"selectRate",autocomplete:"off","onUpdate:modelValue":s[12]||(s[12]=o=>e.priceOrRate=o)},null,512),[[g,e.priceOrRate]]),Me])])],512)]),t("div",je,[t("div",Ee,[t("div",Ve,[t("div",Pe,[u(t("input",{type:"radio",class:"btn-check",value:"不拘",name:"highOrLow",id:"noDifference",autocomplete:"off",checked:"","onUpdate:modelValue":s[13]||(s[13]=o=>e.highOrLow=o)},null,512),[[g,e.highOrLow]]),Ne,u(t("input",{type:"radio",class:"btn-check",value:"高到低",name:"highOrLow",id:"highToLow",autocomplete:"off","onUpdate:modelValue":s[14]||(s[14]=o=>e.highOrLow=o)},null,512),[[g,e.highOrLow]]),Se,u(t("input",{type:"radio",class:"btn-check",value:"低到高",name:"highOrLow",id:"lowToHigh",autocomplete:"off","onUpdate:modelValue":s[15]||(s[15]=o=>e.highOrLow=o)},null,512),[[g,e.highOrLow]]),Te])])],512)])])]),t("section",qe,[e.filterRecipes.length?(c(),l("div",Ue,[(c(!0),l(I,null,x(this.$refs.pagination.pageProducts,o=>(c(),l("div",{class:"col text-decoration-none",key:o.id},[t("div",Ge,[t("div",De,[y(C,{to:`/recipes/${o.id}`,class:"enlargeImg"},{default:O(()=>[t("img",{src:o.image,class:"card-img",height:"220",style:{"border-radius":"20px","object-fit":"cover","max-width":"100%","max-height":"100%"},alt:""},null,8,He)]),_:2},1032,["to"])]),t("h5",Ae,[t("button",{type:"button",class:"position-absolute bookmarkBtn border-0 bg-transparent end-0 top-0 m-3",onClick:()=>n.addBookmark(o)},ze,8,Ke),(c(!0),l(I,null,x(e.bookMarks,v=>(c(),l("div",{key:v+4567},[v===o.id?(c(),l("button",{key:0,type:"button",class:"position-absolute deleteBookmarkBtn border-0 bg-transparent end-0 top-0 m-3",onClick:()=>n.deleteBookmark(o.id)},Xe,8,Fe)):a("",!0)]))),128)),t("span",Ze,h(o.category),1)]),y(C,{to:`/recipes/${o.id}`,class:"card-footer bg-transparent border-0 text-decoration-none link-darkBrown"},{default:O(()=>[t("h5",Je,[t("span",null,h(o.title),1),t("p",{class:i(["mb-0 badge rounded-pill border",{"border-brown":o.thumbs!==0,"border-lightBrownGray":o.thumbs===0,"text-brown":o.thumbs!==0,"text-lightBrownGray":o.thumbs===0}])},[t("span",Qe,h(o.thumbs),1),$e],2)]),t("div",null,[o.total?(c(),l("del",{key:0,class:i(["me-2 text-muted",{"d-none":o.price===o.total}])},"NT$ "+h(r.numberComma(o.total)),3)):a("",!0),t("span",null,[o.price?(c(),l("span",{key:0,class:i({"text-danger":o.price!==o.total,"fw-bold":o.price!==o.total})},"NT$ "+h(r.numberComma(o.price)),3)):a("",!0),k(" / "+h(o.content),1)])])]),_:2},1032,["to"])])]))),128))])):!e.filterRecipes.length&&e.search?(c(),l("div",et,ot)):a("",!0),y(P,{ref:"pagination","price-or-rate":e.priceOrRate,"filter-recipes":e.filterRecipes},null,8,["price-or-rate","filter-recipes"])])])}const wt=Q($,[["render",rt]]);export{wt as default};
