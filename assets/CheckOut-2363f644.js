import{m as v,a as w}from"./index-b1b801c5.js";import{c as f}from"./carts-5862f2ca.js";import{n as k}from"./numberCommaMixin-e0aac39c.js";import{v as N}from"./runtime-dom.esm-bundler-e140de91.js";import{_ as C,a7 as c,a8 as e,N as V,ae as T,ad as l,aa as r,ab as m,F as i,a9 as _,ag as q,r as h,o as u,af as d,ac as I}from"./_plugin-vue_export-helper-d28549df.js";import"./vue-router-46224dd8.js";import"./_commonjsHelpers-042e6b4d.js";import"./db-143b9a4b.js";const M={data(){return{userId:"",token:"",nickName:"",user:{email:"",name:"",phoneNum:"",address:"",message:""}}},mixins:[k],methods:{...v(f,["getCart","addOrder"]),isPhone(t){return/^(09)[0-9]{8}$/.test(t)?!0:"需要正確的電話號碼"}},mounted(){this.token=document.cookie.replace(/(?:(?:^|.*;\s*)myToken\s*=\s*([^;]*).*$)|^.*$/,"$1"),this.userId=localStorage.getItem("userId"),this.userId=Number(this.userId),this.nickName=localStorage.getItem("nickName")},computed:{...w(f,["cart","cartItems"])}},B={class:"",style:{"overflow-x":"hidden"}},S=q('<section class="py-lg-9 d-flex" style="background-image:url(&#39;https://images.unsplash.com/photo-1678465952838-c9d7f5daaa65?ixlib=rb-4.0.3&amp;ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&amp;auto=format&amp;fit=crop&amp;w=688&amp;q=80&#39;);background-repeat:no-repeat;background-position:center center;background-size:cover;height:50vh;"><div class="checkoutMask mx-auto mt-4"><div class="container"><ul class="list-unstyled d-lg-flex fs-5 align-items-center"><li class="text-center" style="flex:1;"><i class="bi bi-check-circle-fill text-blue fs-2"></i><p><span class="fw-bold">確認購物車品項</span></p></li><li class="bg-blue d-none d-lg-block" style="width:200px;height:3px;flex:2;"></li><li class="bg-blue d-lg-none my-2" style="width:3px;height:40px;margin:0 auto;"></li><li class="text-center position-relative" style="flex:1;"><i class="bi bi-2-circle-fill text-blue fs-2 rounded-circle" style="padding:3px 5px;border:2px dotted #4572c2;"></i><p class=""><span class="text-blue fw-bold">填寫訂單資訊</span></p></li><li class="d-none d-lg-block" style="width:200px;height:3px;flex:2;border-top:3px dashed #6c757d;"></li><li class="d-lg-none my-4" style="width:40px;height:3px;margin:0 auto;transform:rotate(90deg);border-top:3px dashed #6c757d;"></li><li class="text-center" style="flex:1;"><i class="bi bi-3-circle fs-2 text-secondary"></i><p><span class="text-secondary fw-bold">成功下訂</span></p></li></ul></div></div></section>',1),z={class:"container my-5"},D={class:"row row-cols-1 row-cols-lg-2 g-5"},F={class:"col"},U=e("h4",{class:"text-center fw-bold mb-4 bg-lightBlue py-2"},"商品確認",-1),O={class:"row"},j={class:"card mb-3",style:{border:"none !important"}},A={class:"row g-0"},E={class:"col-4"},H=["src"],L={class:"col-8"},P={class:"card-body d-flex flex-column h-100"},W={class:"card-title d-flex mb-auto subTitle"},G={class:"ms-auto"},R={class:"card-text d-flex justify-content-end"},Y={class:"mt-1"},J={key:0,class:"mb-0 text-danger text-end fw-bold"},K={key:1,class:"mb-0 text-danger text-end fw-bold"},Q=e("hr",null,null,-1),X={class:"col-12"},Z={class:"card",style:{border:"none !important"}},$={class:"card-body"},ee={class:"table table-borderless"},se=e("th",{class:"fw-normal"},"商品總金額",-1),te={class:"text-end fw-normal"},oe={key:0},le={class:"text-end"},ae={key:0},ne=e("td",null,"優惠券折扣",-1),de={class:"text-end"},ie={class:"border-top bg-lightBlue"},re=e("td",{class:"fw-bold text-danger"},"總計金額",-1),ce={class:"text-end fw-bold text-danger"},ue={key:0},me={key:1},pe={class:"col-12"},be=e("i",{class:"bi bi-arrow-left"},null,-1),he={class:"col"},fe=e("h4",{class:"text-center fw-bold mb-4 bg-lightYellow py-2"},"填寫收件人資訊",-1),_e={class:"row gy-4 d-flex"},ge={class:"col-12 fs-5"},xe=e("i",{class:"bi bi-envelope-fill"},null,-1),ye=e("span",{class:"text-danger h4 ms-2"},"*",-1),ve={class:"col-12 fs-5"},we=e("i",{class:"bi bi-person-fill"},null,-1),ke=e("span",{class:"text-danger h4 ms-2"},"*",-1),Ne={class:"col-12 fs-5"},Ce=e("i",{class:"bi bi-telephone-fill"},null,-1),Ve=e("span",{class:"text-danger h4 ms-2"},"*",-1),Te={class:"col-12 fs-5"},qe=e("i",{class:"bi bi-house-fill"},null,-1),Ie=e("span",{class:"text-danger h4 ms-2"},"*",-1),Me=e("div",{class:"col-12 fs-5 position-relative"},[e("label",{for:"payWay",class:"form-label text-blue"},[e("i",{class:"bi bi-wallet-fill"}),r(" 付款方式"),e("span",{class:"text-danger h4 ms-2"},"*")]),e("input",{type:"text",class:"form-control",id:"payWay",value:"貨到付款",disabled:""}),e("i",{class:"fs-4 text-success bi bi-check-lg position-absolute",style:{top:"40px",right:"20px"}}),e("p",{class:"text-muted",style:{"font-size":"14px"}},"注意：本店一律採貨到付款的方式喔!")],-1),Be={class:"col-12 fs-5"},Se=e("i",{class:"bi bi-chat-left-text-fill"},null,-1),ze=e("span",{class:"text-muted ms-2",style:{"font-size":"14px"}},"(可不填寫)",-1),De=e("p",{class:"text-muted",style:{"font-size":"14px"}},"有任何問題或是貨品相關注意事項都歡迎與我們聯繫~",-1),Fe=e("div",{class:"col-12 mt-4"},[e("button",{type:"submit",class:"hvr-sweep-to-right btn btn-blue fw-bold rounded-0 px-4 shadow-lg w-100"},"確認建立訂單")],-1);function Ue(t,a,Oe,je,o,g){const x=h("RouterLink"),p=h("VField"),b=h("ErrorMessage"),y=h("VForm");return u(),c("div",B,[S,e("section",z,[e("div",D,[e("div",F,[U,e("div",O,[(u(!0),c(V,null,T(t.cartItems,(s,n)=>(u(),c("div",{class:"col-12",key:n+756345},[e("div",j,[e("div",A,[e("div",E,[e("img",{src:s.product.imgUrl,class:"img-fluid w-100",style:{"object-fit":"cover",height:"130px"}},null,8,H)]),e("div",L,[e("div",P,[e("h5",W,[r(l(s.product.title)+" ",1),e("span",G,"x "+l(t.numberComma(s.qty)),1)]),e("div",R,[e("del",{class:d(["me-2 text-muted mt-1",{"d-none":!s.product.isCheaper}]),style:{"font-size":"14px"}},"NT$ "+l(t.numberComma(s.product.originalPrice)),3),e("span",Y,[e("span",{class:d({"text-danger":s.product.isCheaper,"fw-bold":s.product.isCheaper})},"NT$ "+l(t.numberComma(s.product.price)),3),r(" / "+l(s.product.num)+l(s.product.unit),1)])]),s.product.category!=="組合包"?(u(),c("p",J,"小計：NT$ "+l(t.numberComma(s.product.price*s.qty))+" / "+l(t.numberComma(s.product.num*s.qty))+l(s.product.unit),1)):m("",!0),s.product.category==="組合包"?(u(),c("p",K,"小計：NT$ "+l(t.numberComma(s.product.price*s.qty))+" / "+l(t.numberComma(s.qty))+"組",1)):m("",!0)])])])]),Q]))),128)),e("div",X,[e("div",Z,[e("div",$,[e("table",ee,[e("thead",null,[e("tr",null,[se,e("th",te,"NT$ "+l(t.numberComma(t.cart.total)),1)])]),e("tbody",null,[e("tr",null,[e("td",null,[r("運費"),t.cart.total>=1e3?(u(),c("span",oe,"(滿千元免運)")):m("",!0)]),e("td",le," NT$ "+l(t.cart.total>=1e3?0:t.cart.deliveryCharge),1)]),t.cart.total+t.cart.deliveryCharge!==t.cart.finalTotal&&t.cart.coupon?(u(),c("tr",ae,[ne,e("td",de,"- NT$ "+l(t.numberComma(Math.ceil(t.cart.total*(t.cart.coupon.discount/100)))),1)])):m("",!0),e("tr",ie,[re,e("td",ce,[t.cart.total<1e3?(u(),c("span",ue,"NT$ "+l(t.numberComma(t.cart.finalTotal)),1)):t.cart.total>=1e3?(u(),c("span",me,"NT$ "+l(t.numberComma(t.cart.finalTotal-t.cart.deliveryCharge)),1)):m("",!0)])])])])])])]),e("div",pe,[i(x,{to:"/products",class:"rounded-0 hvr-sweep-to-left btn mb-4 ms-3 text-blue border-blue"},{default:_(()=>[be,r(" 繼續選購")]),_:1})])])]),e("div",he,[fe,i(y,{ref:"form",class:"",onSubmit:a[5]||(a[5]=()=>t.addOrder(o.user.email,o.user.name,o.user.phoneNum,o.user.address,o.user.message))},{default:_(({errors:s})=>[e("div",_e,[e("div",ge,[e("label",{for:"email",class:d(["form-label text-secondary",{"text-blue":o.user.email&&!s.信箱}])},[xe,r(" 信箱"),ye],2),i(p,{id:"email",name:"信箱",type:"email",class:d(["form-control border-0 border-bottom",{"is-invalid":s.信箱,"is-valid":o.user.email&&!s.信箱}]),placeholder:"請輸入您的信箱",rules:"email|required",modelValue:o.user.email,"onUpdate:modelValue":a[0]||(a[0]=n=>o.user.email=n)},null,8,["class","modelValue"]),i(b,{name:"信箱",class:"invalid-feedback"})]),e("div",ve,[e("label",{for:"name",class:d(["form-label text-secondary",{"text-blue":o.user.name&&!s.收件人姓名}])},[we,r(" 收件人姓名"),ke],2),i(p,{id:"name",name:"收件人姓名",type:"name",class:d(["form-control border-0 border-bottom",{"is-invalid":s.收件人姓名,"is-valid":!s.收件人姓名&&o.user.name}]),placeholder:"請輸入您的收件人姓名",rules:"required",modelValue:o.user.name,"onUpdate:modelValue":a[1]||(a[1]=n=>o.user.name=n)},null,8,["class","modelValue"]),i(b,{name:"收件人姓名",class:"invalid-feedback"})]),e("div",Ne,[e("label",{for:"phoneNum",class:d(["form-label text-secondary",{"text-blue":o.user.phoneNum&&!s.收件人電話}])},[Ce,r(" 收件人電話"),Ve],2),i(p,{id:"phoneNum",name:"收件人電話",type:"phoneNum",class:d(["form-control border-0 border-bottom",{"is-invalid":s.收件人電話,"is-valid":!s.收件人電話&&o.user.phoneNum}]),placeholder:"請輸入您的收件人電話",rules:g.isPhone,modelValue:o.user.phoneNum,"onUpdate:modelValue":a[2]||(a[2]=n=>o.user.phoneNum=n)},null,8,["class","rules","modelValue"]),i(b,{name:"收件人電話",class:"invalid-feedback"})]),e("div",Te,[e("label",{for:"address",class:d(["form-label text-secondary",{"text-blue":o.user.address&&!s.收件人地址}])},[qe,r(" 收件人地址"),Ie],2),i(p,{id:"address",name:"收件人地址",type:"address",class:d(["form-control border-0 border-bottom",{"is-invalid":s.收件人地址,"is-valid":!s.收件人地址&&o.user.address}]),placeholder:"請輸入您的收件人地址",rules:"required",modelValue:o.user.address,"onUpdate:modelValue":a[3]||(a[3]=n=>o.user.address=n)},null,8,["class","modelValue"]),i(b,{name:"收件人地址",class:"invalid-feedback"})]),Me,e("div",Be,[e("label",{for:"message",class:d(["form-label text-secondary",{"text-blue":o.user.message}])},[Se,r(" 留言")],2),ze,I(e("textarea",{id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":a[4]||(a[4]=n=>o.user.message=n)},null,512),[[N,o.user.message]]),De]),Fe])]),_:1},512)])])])])}const Ye=C(M,[["render",Ue]]);export{Ye as default};
