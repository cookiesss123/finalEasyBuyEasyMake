import{m as p,a as b}from"./index-f77dcddc.js";import{c as i}from"./carts-d5b2a762.js";import{n as _}from"./numberCommaMixin-e0aac39c.js";import{o as g,a as y}from"./db-143b9a4b.js";import{_ as f,a7 as a,a8 as t,aa as l,F as c,a9 as u,ad as s,N as x,ae as k,ab as d,ah as w,r as O,o as r,ag as m}from"./_plugin-vue_export-helper-e5f607bc.js";import"./vue-router-8d0a8096.js";import"./_commonjsHelpers-042e6b4d.js";const v={data(){return{userId:"",token:"",nickName:"",user:{}}},mixins:[_],methods:{...p(i,["getOrder","toastMessage"]),getMyOrder(){g(y,e=>{e?(this.uid=e.uid,this.getOrder(this.uid)):(console.log("並未登入"),this.uid=null,this.user={},this.getOrder("1"))})}},mounted(){this.toastMessage("恭喜您! 訂單建立完成"),this.token=document.cookie.replace(/(?:(?:^|.*;\s*)myToken\s*=\s*([^;]*).*$)|^.*$/,"$1"),this.userId=localStorage.getItem("userId"),this.userId=Number(this.userId),this.nickName=localStorage.getItem("nickName"),this.getMyOrder()},computed:{...b(i,["myOrder"])}},C={class:""},N=w('<section class="py-9 d-flex" style="background-image:url(&#39;https://images.unsplash.com/photo-1616968173983-cc56f09d8279?ixlib=rb-4.0.3&amp;ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&amp;auto=format&amp;fit=crop&amp;w=687&amp;q=80&#39;);background-position:center;background-size:cover;background-repeat:no-repeat;"><div class="checkoutMask mx-auto"><div class="container"><ul class="list-unstyled d-lg-flex fs-5 align-items-center"><li class="text-center" style="flex:1;"><i class="bi bi-check-circle-fill text-red fs-2"></i><p><span class="fw-bold">確認購物車品項</span></p></li><li class="bg-red d-none d-lg-block" style="width:200px;height:3px;flex:2;"></li><li class="bg-red d-lg-none my-2" style="width:3px;height:40px;margin:0 auto;"></li><li class="text-center" style="flex:1;"><i class="bi bi-check-circle-fill text-red fs-2"></i><p class=""><span class="fw-bold">填寫訂單資訊</span></p></li><li class="bg-red d-none d-lg-block" style="width:200px;height:3px;flex:2;"></li><li class="bg-red d-lg-none my-2" style="width:3px;height:40px;margin:0 auto;"></li><li class="text-center" style="flex:1;"><i class="bi bi-check-circle-fill text-red fs-2 rounded-circle" style="padding:3px 5px;border:2px dotted #d04740;"></i><p class=""><span class="text-red fw-bold">成功下訂</span></p></li></ul></div></div></section>',1),$={class:"container mt-5"},T={key:0,class:""},M=t("h1",{class:"h4 text-center text-white w-100 bg-red py-2"},"恭喜您! 訂單建立完成",-1),D={class:"d-flex align-items-center my-4"},S={class:""},A={class:"ms-auto"},I={class:"mb-2"},q={class:"row"},V={class:"col-lg-6 col-12"},B=t("h4",{class:"text-center fw-bold bg-lightPink py-2 mb-4"},"訂購商品資訊",-1),H={class:"card mb-3",style:{border:"none !important"}},L={class:"row g-0"},P={class:"col-4"},j=["src"],z={class:"col-8"},F={class:"card-body"},G={class:"card-title mb-0 d-flex subTitle"},R={class:"ms-auto"},E={class:"card-text d-flex justify-content-end"},U={class:"mt-1"},W={key:0,class:"mb-0 text-danger text-end fw-bold"},Y={key:1,class:"mb-0 text-danger text-end fw-bold"},J=t("hr",null,null,-1),K={class:""},Q={class:"table table-borderless"},X=t("th",{class:"fw-normal"},"商品總金額",-1),Z={class:"text-end fw-normal"},tt={key:0},et={class:"text-end"},st={key:0},ot=t("td",null,"優惠券折扣",-1),lt={class:"text-end"},at={class:"border-top bg-lightPink"},rt=t("td",{class:"fw-bold text-danger"},"總計金額",-1),dt={class:"text-end fw-bold text-danger"},nt={class:"col-lg-6 col-12"},it=t("h4",{class:"text-center fw-bold bg-lightPink py-2"},"收件人資訊",-1),ct={class:"card",style:{border:"none !important"}},ut={class:"card-body"},mt={class:"table table-borderless table-striped"},ht=t("th",{class:"fw-normal"},[t("i",{class:"bi bi-envelope-fill"}),l(" 信箱")],-1),pt={class:"fw-normal"},bt=t("td",null,[t("i",{class:"bi bi-person-fill"}),l(" 收件人姓名")],-1),_t=t("td",null,[t("i",{class:"bi bi-telephone-fill"}),l(" 收件人電話")],-1),gt=t("td",null,[t("i",{class:"bi bi-house-fill"}),l(" 收件人地址")],-1),yt=t("tr",null,[t("td",null,[t("i",{class:"bi bi-wallet-fill"}),l(" 付款方式")]),t("td",null,"貨到付款")],-1),ft=t("td",null,[t("i",{class:"bi bi-chat-left-text-fill"}),l(" 留言")],-1);function xt(e,kt,wt,Ot,vt,Ct){const n=O("RouterLink");return r(),a("div",C,[N,t("section",$,[e.myOrder.cart?(r(),a("div",T,[M,t("div",D,[t("span",S,[l("會員可到 "),c(n,{to:"/member",class:"link-red"},{default:u(()=>[l("會員專區")]),_:1}),l(" 查看訂單運送進度")]),t("span",A,[c(n,{to:"/products",class:"btn btn-sm btn-red"},{default:u(()=>[l("繼續購物")]),_:1})])]),t("p",I,"訂單建立時間："+s(new Date(e.myOrder.creatAt).toLocaleDateString())+" "+s(new Date(e.myOrder.creatAt).getHours())+":"+s(new Date(e.myOrder.creatAt).getMinutes()),1),t("div",q,[t("div",V,[(r(!0),a(x,null,k(e.myOrder.cart.items,(o,h)=>(r(),a("div",{class:"",key:h+756345},[B,t("div",H,[t("div",L,[t("div",P,[t("img",{src:o.product.imgUrl,class:"img-fluid",style:{"object-fit":"cover",width:"200px",height:"100px"}},null,8,j)]),t("div",z,[t("div",F,[t("h5",G,[l(s(o.product.title)+" ",1),t("span",R,"x "+s(e.numberComma(o.qty)),1)]),t("div",E,[t("del",{class:m(["me-2 text-muted mt-1",{"d-none":!o.product.isCheaper}]),style:{"font-size":"14px"}},"NT$ "+s(e.numberComma(o.product.originalPrice)),3),t("span",U,[t("span",{class:m({"text-danger":o.product.isCheaper,"fw-bold":o.product.isCheaper})},"NT$ "+s(e.numberComma(o.product.price)),3),l(" / "+s(o.product.num)+s(o.product.unit),1)])]),o.product.category!=="組合包"?(r(),a("p",W,"小計：NT$ "+s(e.numberComma(o.product.price*o.qty))+" / "+s(e.numberComma(o.product.num*o.qty))+s(o.product.unit),1)):d("",!0),o.product.category==="組合包"?(r(),a("p",Y,"小計：NT$ "+s(e.numberComma(o.product.price*o.qty))+" / "+s(e.numberComma(o.qty))+"組",1)):d("",!0)])])])]),J]))),128)),t("div",K,[t("table",Q,[t("thead",null,[t("tr",null,[X,t("th",Z,"NT$ "+s(e.numberComma(e.myOrder.cart.total)),1)])]),t("tbody",null,[t("tr",null,[t("td",null,[l("運費"),e.myOrder.cart.total>=1e3?(r(),a("span",tt,"(滿千元免運)")):d("",!0)]),t("td",et,"NT$ "+s(e.myOrder.cart.deliveryCharge),1)]),e.myOrder.cart.total+e.myOrder.cart.deliveryCharge!==e.myOrder.cart.finalTotal&&e.myOrder.cart.coupon?(r(),a("tr",st,[ot,t("td",lt,"- NT$ "+s(e.numberComma(Math.ceil(e.myOrder.cart.total*(e.myOrder.cart.coupon.discount/100)))),1)])):d("",!0),t("tr",at,[rt,t("td",dt,"NT$ "+s(e.numberComma(e.myOrder.cart.finalTotal)),1)])])])])]),t("div",nt,[it,t("div",ct,[t("div",ut,[t("table",mt,[t("thead",null,[t("tr",null,[ht,t("th",pt,s(e.myOrder.email),1)])]),t("tbody",null,[t("tr",null,[bt,t("td",null,s(e.myOrder.name),1)]),t("tr",null,[_t,t("td",null,s(e.myOrder.phoneNum),1)]),t("tr",null,[gt,t("td",null,s(e.myOrder.address),1)]),yt,t("tr",null,[ft,t("td",null,s(e.myOrder.message===""?"無":e.myOrder.message),1)])])])])])])])])):d("",!0)])])}const It=f(v,[["render",xt]]);export{It as default};
