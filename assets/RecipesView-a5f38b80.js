import{R as T}from"./vue-router-2c21c692.js";import{m as N}from"./index-655038ef.js";import{c as S}from"./carts-11f88437.js";import{n as U}from"./numberCommaMixin-e0aac39c.js";import{P as q}from"./PaginationComponent-c75be064.js";import{C as R,_ as G}from"./icon-searchMobile-fef2a013.js";import{L as Y}from"./LoadingModal-16ab9486.js";import{r as m,o as f,c as D,d as p,s as H,a as A,b as K}from"./db-64e704f5.js";import{v as z,d as F,w as W,e as u}from"./runtime-dom.esm-bundler-54ced388.js";import{_ as X}from"./image5-4fc2427e.js";import{_ as Z}from"./image4-1806383b.js";import{_ as J}from"./undraw_Page_not_found_re_e9o6-de2ef5f7.js";import{_ as Q,U as l,W as y,V as t,a4 as i,Z as a,Y as k,a0 as h,$ as g,a1 as I,a2 as x,r as C,o as c,X as O}from"./_plugin-vue_export-helper-03b40388.js";import"./_commonjsHelpers-042e6b4d.js";import"./modal-5929133b.js";import"./loadingLogo-3bb466c0.js";const L="/finalEasyBuyEasyMake/assets/gettyimages-1268940871-a28aa7f6.jpg",B="/finalEasyBuyEasyMake/assets/IMGP0051-8dc73349.jpg",M="/finalEasyBuyEasyMake/assets/popularimage4-5263c958.png",j="/finalEasyBuyEasyMake/assets/photo-1533910534207-90f31029a78e-65885375.jpg",E="/finalEasyBuyEasyMake/assets/421Cv1xH8BYP44T9V8aY241R2UYjhTsiYa7giw6d-bba1ddf7.jpeg",V="/finalEasyBuyEasyMake/assets/pastiera2-415825e7.jpg";const $={components:{RouterLink:T,PaginationComponent:q,LoadingModal:Y},mixins:[U],data(){return{costOrRateCollapse:{},highOrLowCollapse:{},recipes:[],selectCategory:"全部",selectItem:"全部",priceOrRate:"成本",highOrLow:"不拘",recipeSearchName:"",filterRecipes:[],bookMarks:[],thumbs:{},uid:"",search:!1}},methods:{...N(S,["toastMessage"]),getRecipes(){const r=m(p,"recipes/");f(r,s=>{this.recipes=s.val(),this.recipes=Object.entries(this.recipes).map(d=>(d[1].id=d[0],d[1])),console.log(this.recipes,"食譜資料");const b=m(p,"recipeThumbs/");f(b,d=>{this.thumbs=d.val(),console.log(this.thumbs,"所有讚"),this.recipes.forEach((e,n)=>{Object.keys(this.thumbs).forEach(_=>{e.id===_&&(this.recipes[n].thumbs=this.thumbs[e.id].thumbs)})}),this.recipes.forEach((e,n)=>{e.thumbs||(this.recipes[n].thumbs=0)}),console.log(this.recipes,"食譜"),this.filterRecipes=this.recipes,!this.$route.query.category&&this.$route.fullPath==="/recipes"?this.$refs.pagination.renderPage(1,this.filterRecipes):this.$route.query.category&&this.searchRecipes()})})},searchRecipes(){this.selectItem==="全部"?this.filterRecipes=this.recipes:this.selectItem!=="全部"&&(this.filterRecipes=this.recipes.filter(r=>r.category===this.selectItem)),this.priceOrRate==="成本"&&this.highOrLow!=="不拘"?this.highOrLow==="低到高"?this.filterRecipes=this.filterRecipes.sort((r,s)=>r.price-s.price):this.highOrLow==="高到低"&&(this.filterRecipes=this.filterRecipes.sort((r,s)=>s.price-r.price)):this.priceOrRate==="評價"&&this.highOrLow!=="不拘"&&(this.highOrLow==="低到高"?this.filterRecipes=this.filterRecipes.sort((r,s)=>r.thumbs-s.thumbs):this.highOrLow==="高到低"&&(this.filterRecipes=this.filterRecipes.sort((r,s)=>s.thumbs-r.thumbs))),this.filterRecipes=this.filterRecipes.filter(r=>r.title.match(this.recipeSearchName)),this.search=!0,this.$refs.pagination.renderPage(1,this.filterRecipes)},getBookmarks(){D(K,r=>{if(r){this.uid=r.uid,console.log(this.uid,"使用者已登入取得 uid");const s=m(p,"users/"+r.uid);f(s,b=>{this.user=b.val(),console.log(this.user,"讀取的資料");const d=m(p,`recipeBookmarks/${this.uid}`);f(d,e=>{this.bookMarks=e.val(),this.bookMarks&&(this.bookMarks=Object.keys(this.bookMarks)),console.log(this.bookMarks,"書籤")})})}else console.log("並未登入"),this.uid=null,this.user={}})},addBookmark(r){if(!this.uid){this.toastMessage("登入才可使用收藏功能","error");return}const s=m(p,`recipeBookmarks/${this.uid}/${r.id}`);H(s,r),this.toastMessage("收藏成功")},deleteBookmark(r){A(m(p,`recipeBookmarks/${this.uid}/${r}`)),this.toastMessage("刪除收藏")}},mounted(){this.costOrRateCollapse=new R(this.$refs.costOrRateCollapse,{toggle:!1,parent:"#myGroup"}),this.highOrLowCollapse=new R(this.$refs.highOrLowCollapse,{toggle:!1,parent:"#myGroup"}),this.$route.query.category&&(this.selectItem=this.$route.query.category,this.highOrLow=this.$route.query.valueHighOrLow,this.priceOrRate=this.$route.query.valuePriceOrRate,this.recipeSearchName=this.$route.query.searchName),this.getBookmarks(),this.getRecipes()},watch:{selectCategory(){this.recipeSearchName="",this.selectCategory==="全部"?(this.selectItem="全部",this.filterRecipes=this.recipes,this.$refs.pagination.renderPage(1,this.filterRecipes)):this.selectCategory!=="全部"&&(this.selectItem=this.selectCategory,this.filterRecipes=this.recipes.filter(r=>r.category===this.selectItem),console.log(this.filterRecipes,"篩選結果")),this.$refs.pagination.renderPage(1,this.filterRecipes)},priceOrRate(){this.costOrRateCollapse.hide()},highOrLow(){this.highOrLowCollapse.hide()},filterRecipes(){this.costOrRateCollapse.hide(),this.highOrLowCollapse.hide()}}},ee={class:"my-7"},te={class:"bg-lightYellow mb-4 py-4 px-lg-5",style:{"overflow-x":"hidden"}},se={class:"container"},oe={class:"selectProductCategory row row-cols-lg-6 row-cols-3"},re={key:0,src:L,alt:"",class:"rounded-circle",style:{"object-fit":"cover"}},ie={key:1,src:L,alt:"",class:"rounded-circle",style:{"object-fit":"cover",transform:"scale(1.2,1.2)"}},le={key:0,src:B,alt:"",class:"rounded-circle",style:{"object-fit":"cover"}},ce={key:1,src:B,alt:"",class:"rounded-circle",style:{"object-fit":"cover",transform:"scale(1.2,1.2)"}},ne={key:0,src:M,alt:"",class:"rounded-circle",style:{"object-fit":"cover"}},ae={key:1,src:M,alt:"",class:"rounded-circle",style:{"object-fit":"cover",transform:"scale(1.2,1.2)"}},de={key:0,src:j,alt:"",class:"rounded-circle",style:{"object-fit":"cover"}},he={key:1,src:j,alt:"",class:"rounded-circle",style:{"object-fit":"cover",transform:"scale(1.2,1.2)"}},me={key:0,src:E,alt:"",class:"rounded-circle",style:{"object-fit":"cover"}},pe={key:1,src:E,alt:"",class:"rounded-circle",style:{"object-fit":"cover",transform:"scale(1.2,1.2)"}},ge={key:0,src:V,alt:"",class:"rounded-circle",style:{"object-fit":"cover"}},ue={key:1,src:V,alt:"",class:"rounded-circle",style:{"object-fit":"cover",transform:"scale(1.2,1.2)"}},be={class:"d-none d-lg-block container selectProduct my-5"},fe={class:"input-group"},ye=t("i",{class:"bi bi-caret-down-fill"},null,-1),_e={class:"ms-2 fw-bold"},ke=t("i",{class:"bi bi-caret-down-fill"},null,-1),Ce={class:"ms-2 fw-bold"},ve=t("img",{src:G,style:{height:"25px"},alt:""},null,-1),we=[ve],Re={class:"row g-0",id:"myGroup"},Ie={class:"col-2"},xe={ref:"costOrRateCollapse",class:"collapse"},Oe={class:"card card-body border-0"},Le={class:"btn-group-vertical",role:"group","aria-label":"Vertical radio toggle button group"},Be=t("label",{class:"btn btn-outline-red",for:"selectprice"},"成本",-1),Me=t("label",{class:"btn btn-outline-red",for:"selectRate"},"評價",-1),je={class:"col-2"},Ee={ref:"highOrLowCollapse",class:"collapse"},Ve={class:"card card-body border-0"},Pe={class:"btn-group-vertical",role:"group","aria-label":"Vertical radio toggle button group"},Te=t("label",{class:"btn btn-outline-red",for:"noDifference"},"不拘",-1),Ne=t("label",{class:"btn btn-outline-red",for:"highToLow"},"高到低",-1),Se=t("label",{class:"btn btn-outline-red",for:"lowToHigh"},"低到高",-1),Ue={class:"container"},qe={key:0,class:"row row-cols-lg-4 row-cols-2 gy-4"},Ge={class:"card position-relative border-0 bg-transparent",style:{"border-radius":"20px"}},Ye={class:"cardImg",style:{"border-radius":"20px"}},De=["src"],He={class:"card-text"},Ae=["onClick"],Ke=t("img",{src:X},null,-1),ze=[Ke],Fe=["onClick"],We=t("img",{src:Z},null,-1),Xe=[We],Ze={style:{"pointer-events":"none"},class:"cardTextCategory badge rounded-pill bg-red mt-4 border-0 m-3 position-absolute start-0"},Je={class:"d-flex justify-content-between align-items-center fw-bold cardTextTitle"},Qe={class:"me-1"},$e=t("i",{class:"bi bi-hand-thumbs-up-fill"},null,-1),et={class:"cardTextPrice"},tt={key:1,class:"py-10"},st=t("img",{src:J,class:"mb-3",alt:"",style:{height:"250px",display:"block",margin:"auto"}},null,-1),ot=t("h2",{class:"text-center"},"查無食譜，請您重新查詢",-1),rt=[st,ot];function it(r,s,b,d,e,n){const _=C("LoadingModal"),v=C("RouterLink"),P=C("PaginationComponent");return c(),l("div",ee,[y(_,{ref:"loadingModal"},null,512),t("section",te,[t("div",se,[t("div",oe,[t("button",{type:"button",class:i(["col d-flex flex-column align-items-center btn border-0",{selectedImg:e.selectCategory==="全部"}]),onClick:s[0]||(s[0]=()=>e.selectCategory="全部")},[t("div",{class:i(["cardImg mb-2",{"opacity-100":e.selectItem==="全部"}])},[t("div",{class:i(["enlargeImg rounded-circle",{selectImgBorder:e.selectItem==="全部"}])},[e.selectCategory!=="全部"?(c(),l("img",re)):e.selectCategory==="全部"?(c(),l("img",ie)):a("",!0)],2)],2),t("span",{class:i(["text-secondary",{"text-red":e.selectItem==="全部","fw-bold":e.selectItem==="全部"}])},"全部",2)],2),t("button",{type:"button",class:i(["col d-flex flex-column align-items-center btn border-0",{selectedImg:e.selectCategory==="台式甜點"}]),onClick:s[1]||(s[1]=()=>e.selectCategory="台式甜點")},[t("div",{class:i(["cardImg mb-2",{"opacity-100":e.selectItem==="台式甜點"}])},[t("div",{class:i(["enlargeImg rounded-circle",{selectImgBorder:e.selectItem==="台式甜點"}])},[e.selectCategory!=="台式甜點"?(c(),l("img",le)):e.selectCategory==="台式甜點"?(c(),l("img",ce)):a("",!0)],2)],2),t("span",{class:i(["text-secondary",{"text-red":e.selectItem==="台式甜點","fw-bold":e.selectItem==="台式甜點"}])},"台式甜點",2)],2),t("button",{type:"button",class:i(["col d-flex flex-column align-items-center btn border-0",{selectedImg:e.selectCategory==="法式甜點"}]),onClick:s[2]||(s[2]=()=>e.selectCategory="法式甜點")},[t("div",{class:i(["cardImg mb-2",{"opacity-100":e.selectItem==="法式甜點"}])},[t("div",{class:i(["enlargeImg rounded-circle",{selectImgBorder:e.selectItem==="法式甜點"}])},[e.selectCategory!=="法式甜點"?(c(),l("img",ne)):e.selectCategory==="法式甜點"?(c(),l("img",ae)):a("",!0)],2)],2),t("span",{class:i(["text-secondary",{"text-red":e.selectItem==="法式甜點","fw-bold":e.selectItem==="法式甜點"}])},"法式甜點",2)],2),t("button",{type:"button",class:i(["col d-flex flex-column align-items-center btn border-0",{selectedImg:e.selectCategory==="美式甜點"}]),onClick:s[3]||(s[3]=()=>e.selectCategory="美式甜點")},[t("div",{class:i(["cardImg mb-2",{"opacity-100":e.selectItem==="美式甜點"}])},[t("div",{class:i(["enlargeImg rounded-circle",{selectImgBorder:e.selectItem==="美式甜點"}])},[e.selectCategory!=="美式甜點"?(c(),l("img",de)):e.selectCategory==="美式甜點"?(c(),l("img",he)):a("",!0)],2)],2),t("span",{class:i(["text-secondary",{"text-red":e.selectItem==="美式甜點","fw-bold":e.selectItem==="美式甜點"}])},"美式甜點",2)],2),t("button",{type:"button",class:i(["col d-flex flex-column align-items-center btn border-0",{selectedImg:e.selectCategory==="日式甜點"}]),onClick:s[4]||(s[4]=()=>e.selectCategory="日式甜點")},[t("div",{class:i(["cardImg mb-2",{"opacity-100":e.selectItem==="日式甜點"}])},[t("div",{class:i(["enlargeImg rounded-circle",{selectImgBorder:e.selectItem==="日式甜點"}])},[e.selectCategory!=="日式甜點"?(c(),l("img",me)):e.selectCategory==="日式甜點"?(c(),l("img",pe)):a("",!0)],2)],2),t("span",{class:i(["text-secondary",{"text-red":e.selectItem==="日式甜點","fw-bold":e.selectItem==="日式甜點"}])},"日式甜點",2)],2),t("button",{type:"button",class:i(["col d-flex flex-column align-items-center btn border-0",{selectedImg:e.selectCategory==="義式甜點"}]),onClick:s[5]||(s[5]=()=>e.selectCategory="義式甜點")},[t("div",{class:i(["cardImg mb-2",{"opacity-100":e.selectItem==="義式甜點"}])},[t("div",{class:i(["enlargeImg rounded-circle",{selectImgBorder:e.selectItem==="義式甜點"}])},[e.selectCategory!=="義式甜點"?(c(),l("img",ge)):e.selectCategory==="義式甜點"?(c(),l("img",ue)):a("",!0)],2)],2),t("span",{class:i(["text-secondary",{"text-red":e.selectItem==="義式甜點","fw-bold":e.selectItem==="義式甜點"}])},"義式甜點",2)],2)])])]),t("section",be,[t("div",fe,[t("a",{class:"btn btn-outline-red px-5",onClick:s[6]||(s[6]=()=>this.costOrRateCollapse.toggle())},[k("篩選對象 "),ye,t("span",_e,h(e.priceOrRate),1)]),t("button",{class:"btn btn-outline-red px-5",type:"button",onClick:s[7]||(s[7]=()=>this.highOrLowCollapse.toggle())},[k("篩選值 "),ke,t("span",Ce,h(e.highOrLow),1)]),g(t("input",{type:"search",class:"form-control border-red border-end-0",placeholder:"請輸入食譜名稱","aria-label":"Example text with two button addons","onUpdate:modelValue":s[8]||(s[8]=o=>e.recipeSearchName=o),onKeyup:s[9]||(s[9]=F((...o)=>n.searchRecipes&&n.searchRecipes(...o),["enter"]))},null,544),[[z,e.recipeSearchName]]),t("button",{type:"submit",class:"btn border border-red border-start-0 bg-transparent",onClick:s[10]||(s[10]=W((...o)=>n.searchRecipes&&n.searchRecipes(...o),["prevent"]))},we)]),t("div",Re,[t("div",Ie,[t("div",xe,[t("div",Oe,[t("div",Le,[g(t("input",{type:"radio",class:"btn-check",value:"成本",name:"priceOrRate",id:"selectprice",autocomplete:"off","onUpdate:modelValue":s[11]||(s[11]=o=>e.priceOrRate=o)},null,512),[[u,e.priceOrRate]]),Be,g(t("input",{type:"radio",class:"btn-check",value:"評價",name:"priceOrRate",id:"selectRate",autocomplete:"off","onUpdate:modelValue":s[12]||(s[12]=o=>e.priceOrRate=o)},null,512),[[u,e.priceOrRate]]),Me])])],512)]),t("div",je,[t("div",Ee,[t("div",Ve,[t("div",Pe,[g(t("input",{type:"radio",class:"btn-check",value:"不拘",name:"highOrLow",id:"noDifference",autocomplete:"off",checked:"","onUpdate:modelValue":s[13]||(s[13]=o=>e.highOrLow=o)},null,512),[[u,e.highOrLow]]),Te,g(t("input",{type:"radio",class:"btn-check",value:"高到低",name:"highOrLow",id:"highToLow",autocomplete:"off","onUpdate:modelValue":s[14]||(s[14]=o=>e.highOrLow=o)},null,512),[[u,e.highOrLow]]),Ne,g(t("input",{type:"radio",class:"btn-check",value:"低到高",name:"highOrLow",id:"lowToHigh",autocomplete:"off","onUpdate:modelValue":s[15]||(s[15]=o=>e.highOrLow=o)},null,512),[[u,e.highOrLow]]),Se])])],512)])])]),t("section",Ue,[e.filterRecipes.length?(c(),l("div",qe,[(c(!0),l(I,null,x(this.$refs.pagination.pageProducts,o=>(c(),l("div",{class:"col text-decoration-none",key:o.id},[t("div",Ge,[t("div",Ye,[y(v,{to:`/recipes/${o.id}`,class:"enlargeImg"},{default:O(()=>[t("img",{src:o.image,class:"card-img",style:{"border-radius":"20px","object-fit":"cover","max-width":"100%","max-height":"100%"},alt:""},null,8,De)]),_:2},1032,["to"])]),t("h5",He,[t("button",{type:"button",class:"position-absolute bookmarkBtn border-0 bg-transparent end-0 top-0 m-lg-3 m-2",onClick:()=>n.addBookmark(o)},ze,8,Ae),(c(!0),l(I,null,x(e.bookMarks,w=>(c(),l("div",{key:w+4567},[w===o.id?(c(),l("button",{key:0,type:"button",class:"position-absolute deleteBookmarkBtn border-0 bg-transparent end-0 top-0 m-lg-3 m-2",onClick:()=>n.deleteBookmark(o.id)},Xe,8,Fe)):a("",!0)]))),128)),t("span",Ze,h(o.category),1)]),y(v,{to:`/recipes/${o.id}`,class:"card-footer bg-transparent border-0 text-decoration-none link-darkBrown"},{default:O(()=>[t("h5",Je,[t("span",null,h(o.title),1),t("p",{class:i(["mb-0 badge rounded-pill border",{"border-red":o.thumbs!==0,"border-lightBrownGray":o.thumbs===0,"text-red":o.thumbs!==0,"text-lightBrownGray":o.thumbs===0}])},[t("span",Qe,h(o.thumbs),1),$e],2)]),t("div",et,[o.total?(c(),l("del",{key:0,class:i(["me-2 text-muted d-block d-lg-inline-block",{"d-none":o.price===o.total}])},"NT$ "+h(r.numberComma(o.total)),3)):a("",!0),t("span",null,[o.price?(c(),l("span",{key:0,class:i({"text-danger":o.price!==o.total,"fw-bold":o.price!==o.total})},"NT$ "+h(r.numberComma(o.price)),3)):a("",!0),k(" / "+h(o.content),1)])])]),_:2},1032,["to"])])]))),128))])):!e.filterRecipes.length&&e.search?(c(),l("div",tt,rt)):a("",!0),y(P,{ref:"pagination","price-or-rate":e.priceOrRate,"filter-recipes":e.filterRecipes},null,8,["price-or-rate","filter-recipes"])])])}const vt=Q($,[["render",it]]);export{vt as default};
