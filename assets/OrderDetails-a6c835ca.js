import{l as y}from"./loadingStore-73c40ae8.js";import{f as _}from"./index-9f8e1fb0.js";import{o as g,c as v,r as x,d as w,b as S,a as k}from"./carts-18eb5781.js";import{n as C}from"./numberCommaMixin-e0aac39c.js";import{b6 as T,av as N,aj as l,l as d,m as s,t as W,b1 as L,aJ as o,a3 as c,F as b,at as p,k as n,s as i}from"./_plugin-vue_export-helper-68081c38.js";const q={data(){return{uid:"",order:{},barWidth:0}},mixins:[C],methods:{..._(v,["goToTop"]),..._(y,["startLoading","endLoading"]),getOrder(){this.startLoading();const{id:r}=this.$route.params;g(k,a=>{if(a){this.uid=a.uid;const u=x(w,`orders/${this.uid}/${r}`);S(u,h=>{if(this.order=h.val(),!this.order){this.$router.push("/loginSignup"),this.endLoading();return}this.order.id=r,this.order.deliveryStatus==="待出貨"?this.barWidth=0:this.order.deliveryStatus==="運送中"?this.barWidth=33:this.order.deliveryStatus==="待取貨"?this.barWidth=66:this.order.deliveryStatus==="訂單完成"&&(this.barWidth=100),this.endLoading()})}else this.endLoading(),this.uid=null,this.uid||this.$router.push("/loginSignup")})}},mounted(){this.goToTop(),this.getOrder()}},V={key:0,class:"py-md-96 py-60 container no-scroll-x"},A={"aria-label":"breadcrumb"},D={class:"breadcrumb"},j={class:"breadcrumb-item"},z=s("li",{class:"breadcrumb-item"},"訂單狀況",-1),B={class:"breadcrumb-item active","aria-current":"page"},O={class:"col-lg-6"},R={class:"table"},F=s("th",{class:"fw-normal text-muted"},"訂單建立時間",-1),M={class:"fw-normal"},P=s("td",{class:"text-muted"},"訂單編號",-1),E={class:"position-relative w-100 mt-lg-5 my-5"},J=s("div",{class:"line-gray border-top position-absolute border-2 z-index-n1 top-8"},null,-1),U={class:"list-unstyled d-flex justify-content-between text-gray"},G={key:0,class:"order-dot-white rounded-circle position-relative bg-white border border-primary d-block mt-lg-n1"},H=s("i",{class:"bi bi-circle-fill fs-lg-14 fs-12 position-absolute translate-middle start-50 top-50"},null,-1),I=[H],K={key:1,class:"bi bi-circle-fill d-block fs-lg-6 fs-12"},Q={class:"fs-lg-6 fs-14"},X={class:"row gx-5 gy-5 row-cols-1 row-cols-lg-2"},Y={class:"col"},Z=s("h4",{class:"text-center fw-bold bg-secondary py-2"},"訂購商品資訊",-1),$={key:0,class:"py-3"},ss={class:"list-unstyled row mb-0"},ts={class:"card"},es={class:"row g-0"},os={class:"col-4"},rs=["src"],ls={class:"col-8"},ds={class:"card-body d-flex flex-column h-100 pb-0"},is={class:"d-flex mb-auto"},ns={class:"card-title mb-0 d-flex fs-lg-6 fs-14"},cs={class:"ms-auto"},as={class:"card-text text-end"},us={class:"mt-1"},hs=s("br",null,null,-1),_s={key:0,class:"mb-0 text-danger text-end fw-bold"},bs={key:1,class:"mb-0 text-danger text-end fw-bold"},ps=s("hr",null,null,-1),ms={class:"table table-borderless"},fs=s("th",{class:"fw-normal"},"商品總金額",-1),ys={key:0,class:"text-end fw-normal"},gs={key:0},vs={key:0,class:"text-end"},xs={key:0},ws=s("td",null,"優惠券折扣",-1),Ss={class:"text-end"},ks={class:"border-top bg-secondary"},Cs=s("td",{class:"fw-bold text-danger"},"總計金額",-1),Ts={class:"text-end fw-bold text-danger"},Ns={class:"col"},Ws=s("h4",{class:"text-center fw-bold bg-lightPurple py-2"},"收件人資訊",-1),Ls={class:"table table-borderless table-striped"},qs=s("th",{class:"fw-normal"},[s("i",{class:"bi bi-envelope-fill"}),i(" 信箱")],-1),Vs={class:"fw-normal"},As=s("td",null,[s("i",{class:"bi bi-person-fill"}),i(" 收件人姓名")],-1),Ds=s("td",null,[s("i",{class:"bi bi-telephone-fill"}),i(" 收件人電話")],-1),js=s("td",null,[s("i",{class:"bi bi-house-fill"}),i(" 收件人地址")],-1),zs=s("tr",null,[s("td",null,[s("i",{class:"bi bi-wallet-fill"}),i(" 付款方式")]),s("td",null,"貨到付款")],-1),Bs=s("td",null,[s("i",{class:"bi bi-chat-left-text-fill"}),i(" 留言")],-1);function Os(r,a,u,h,e,Rs){const m=N("RouterLink");return e.order?(l(),d("section",V,[s("nav",A,[s("ol",D,[s("li",j,[W(m,{to:"/member",href:"#",class:"link-primary"},{default:L(()=>[i("會員專區")]),_:1})]),z,s("li",B,o(e.order.deliveryStatus),1)])]),s("div",O,[s("table",R,[s("thead",null,[s("tr",null,[F,s("th",M,o(new Date(e.order.creatAt).toLocaleString().split(":")[0])+":"+o(new Date(e.order.creatAt).toLocaleString().split(":")[1]),1)])]),s("tbody",null,[s("tr",null,[P,s("td",null,o(e.order.id),1)])])])]),s("div",E,[J,s("div",{class:c(["border-top border-primary position-absolute border-2 z-index-n1 top-8",{"w-33":e.barWidth===33,"w-66":e.barWidth===66,"line-gray":e.barWidth===100}])},null,2),s("ul",U,[(l(),d(b,null,p(4,t=>s("li",{key:t+394,class:c(["d-flex flex-column align-items-center",{"text-primary":t===1&&e.barWidth>=0||t===2&&e.barWidth>=33||t===3&&e.barWidth>=66||t===4&&e.barWidth===100,"fw-bold":t===1&&e.order.deliveryStatus==="待出貨"||t===2&&e.order.deliveryStatus==="運送中"||t===3&&e.order.deliveryStatus==="待取貨"||t===4&&e.order.deliveryStatus==="訂單完成"}])},[t===1&&e.order.deliveryStatus==="待出貨"||t===2&&e.order.deliveryStatus==="運送中"||t===3&&e.order.deliveryStatus==="待取貨"||t===4&&e.order.deliveryStatus==="訂單完成"?(l(),d("div",G,I)):(l(),d("i",K)),s("div",{class:c(["mt-2 text-center rounded-circle w-lg-90-md-70",{"bg-secondary":t===1&&e.order.deliveryStatus==="待出貨"||t===2&&e.order.deliveryStatus==="運送中"||t===3&&e.order.deliveryStatus==="待取貨"||t===4&&e.order.deliveryStatus==="訂單完成"}])},[s("i",{class:c(["fs-lg-2 fs-4 bi",{"bi-box-seam":t===1,"bi-truck":t===2,"bi-house-check":t===3,"bi-clipboard-check":t===4}])},null,2),s("p",Q,o(t===1?"待出貨":t===2?"運送中":t===3?"已抵達":"訂單完成"),1)],2)],2)),64))])]),s("div",X,[s("div",Y,[Z,e.order.cart?(l(),d("div",$,[s("ul",ss,[(l(!0),d(b,null,p(e.order.cart.items,(t,f)=>(l(),d("li",{class:"col-12",key:f+756345},[s("div",ts,[s("div",es,[s("div",os,[s("img",{src:t.product.imgUrl,class:"img-fluid object-fit-cover w-100",style:{height:"130px"}},null,8,rs)]),s("div",ls,[s("div",ds,[s("div",is,[s("h5",ns,o(t.product.title),1),s("span",cs,"x "+o(r.numberComma(t.qty)),1)]),s("div",as,[s("del",{class:c(["me-2 text-muted mt-1 fs-14",{"d-none":!t.product.isCheaper}])},"NT$ "+o(r.numberComma(t.product.originalPrice)),3),s("span",us,[s("span",{class:c({"text-danger":t.product.isCheaper,"fw-bold":t.product.isCheaper})},"NT$ "+o(r.numberComma(t.product.price)),3),i(" / "+o(t.product.num)+o(t.product.unit),1)]),hs]),t.product.category!=="組合包"?(l(),d("p",_s,"小計：NT$ "+o(r.numberComma(t.product.price*t.qty))+" / "+o(r.numberComma(t.product.num*t.qty))+o(t.product.unit),1)):n("",!0),t.product.category==="組合包"?(l(),d("p",bs,"小計：NT$ "+o(r.numberComma(t.product.price*t.qty))+" / "+o(r.numberComma(t.qty))+"組",1)):n("",!0)])])])]),ps]))),128))]),s("table",ms,[s("thead",null,[s("tr",null,[fs,e.order.cart?(l(),d("th",ys,"NT$ "+o(r.numberComma(e.order.cart.total)),1)):n("",!0)])]),s("tbody",null,[s("tr",null,[s("td",null,[i("運費"),e.order.cart.total>=1e3?(l(),d("span",gs,"(滿千元免運)")):n("",!0)]),e.order.cart?(l(),d("td",vs,"NT$ "+o(e.order.cart.deliveryCharge),1)):n("",!0)]),e.order.cart.total+e.order.cart.deliveryCharge!==e.order.cart.finalTotal&&e.order.cart.coupon?(l(),d("tr",xs,[ws,s("td",Ss,"- NT$ "+o(r.numberComma(Math.ceil(e.order.cart.total*(e.order.cart.coupon.discount/100)))),1)])):n("",!0),s("tr",ks,[Cs,s("td",Ts,"NT$ "+o(r.numberComma(e.order.cart.finalTotal)),1)])])])])):n("",!0)]),s("div",Ns,[Ws,s("table",Ls,[s("thead",null,[s("tr",null,[qs,s("th",Vs,o(e.order.email),1)])]),s("tbody",null,[s("tr",null,[As,s("td",null,o(e.order.name),1)]),s("tr",null,[Ds,s("td",null,o(e.order.phoneNum),1)]),s("tr",null,[js,s("td",null,o(e.order.address),1)]),zs,s("tr",null,[Bs,s("td",null,o(e.order.message===""?"無":e.order.message),1)])])])])])])):n("",!0)}const Us=T(q,[["render",Os]]);export{Us as default};
