import{n as p}from"./numberCommaMixin-e0aac39c.js";import{o as b,r as x,d as f,b as g,a as y}from"./db-143b9a4b.js";import{_ as v}from"./loadingLogo-3bb466c0.js";import{_ as w,U as l,V as t,W as k,X as C,a0 as e,Z as d,a4 as c,a1 as W,a2 as N,Y as n,r as T,o as r,a5 as B}from"./_plugin-vue_export-helper-03b40388.js";const S={data(){return{user:{},order:{},barWidth:0,loadingItem:!0,uid:""}},mixins:[p],methods:{getOrder(){this.loadingItem=!0;const{id:i}=this.$route.params;b(y,a=>{if(a){this.uid=a.uid;const h=x(f,`orders/${this.uid}/${i}`);g(h,_=>{this.order=_.val(),this.order.id=i,console.log(this.order,"取得我的訂單"),this.order.deliveryStatus==="待出貨"?this.barWidth=0:this.order.deliveryStatus==="運送中"?this.barWidth=33:this.order.deliveryStatus==="待取貨"?this.barWidth=66:this.order.deliveryStatus==="訂單完成"&&(this.barWidth=100),this.loadingItem=!1})}else console.log("並未登入"),this.uid=null,this.user={},this.uid||(this.toastMessage("請先登入","error"),this.$router.push("/login"))})}},mounted(){this.getOrder()}},V={class:"mt-10 container"},L={key:0},q={"aria-label":"breadcrumb"},A={class:"breadcrumb"},D={class:"breadcrumb-item"},I=t("li",{class:"breadcrumb-item"},"訂單狀況",-1),E={class:"breadcrumb-item active","aria-current":"page"},O={class:"ms-4"},M={class:"d-flex flex-column align-items-center mt-5"},R={class:"col-12 col-lg-10 d-flex text-lightBrown",id:"orderProcess"},j=t("div",{class:"d-flex flex-column align-items-center"},[t("i",{class:"fs-1 bi bi-box-seam text-red"}),t("h5",{class:"fw-bold text-red",style:{"white-space":"nowrap"}},"待出貨")],-1),z={key:0,class:"mt-4 mt-lg-5 mx-2",style:{"border-top":"2px dashed #C0AB8E",width:"33%"}},P={key:1,class:"mt-4 mt-lg-5 mx-2",style:{"border-top":"2px solid #815B15",width:"33%"}},U={class:"d-flex flex-column align-items-center"},F={key:2,class:"mt-4 mt-lg-5 mx-2",style:{"border-top":"2px dashed #C0AB8E",width:"33%"}},X={key:3,class:"mt-4 mt-lg-5 mx-2",style:{"border-top":"2px solid #815B15",width:"33%"}},Y={class:"d-flex flex-column align-items-center"},Z={key:4,class:"mt-4 mt-lg-5 mx-2",style:{"border-top":"2px dashed #C0AB8E",width:"33%"}},G={key:5,class:"mt-4 mt-lg-5 mx-2",style:{"border-top":"2px solid #815B15",width:"33%"}},H={class:"d-flex flex-column align-items-center"},J={class:"row gx-5 row-cols-1 row-cols-lg-2 my-5"},K={class:"col"},Q=t("h4",{class:"text-center"},"訂購商品資訊",-1),$={key:0,class:"row py-3"},tt={class:"col-12"},st={class:"row"},et={class:"card mb-3 border-0"},ot={class:"row g-0"},lt={class:"col-4"},rt=["src"],it={class:"col-8"},dt={class:"card-body"},nt={class:"card-title mb-0 d-flex subTitle"},ct={class:"ms-auto"},at={class:"card-text d-flex justify-content-end"},ht={class:"mt-1"},_t=t("br",null,null,-1),ut={key:0,class:"mb-0 text-danger text-end fw-bold"},mt={key:1,class:"mb-0 text-danger text-end fw-bold"},pt=t("hr",null,null,-1),bt={class:"col-12"},xt={class:"table table-borderless"},ft=t("th",{class:"fw-normal"},"商品總金額",-1),gt={key:0,class:"text-end fw-normal"},yt={key:0},vt={key:0,class:"text-end"},wt={key:0},kt=t("td",null,"優惠券折扣",-1),Ct={class:"text-end"},Wt={class:"border-top"},Nt=t("td",{class:"fw-bold text-danger"},"總計金額",-1),Tt={class:"text-end fw-bold text-danger"},Bt={class:"col"},St=t("h4",{class:"text-center"},"收件人資訊",-1),Vt={class:"table table-borderless text-red"},Lt=t("th",{class:"fw-normal"},[t("i",{class:"bi bi-envelope-fill"}),n(" 信箱")],-1),qt={class:"fw-normal"},At=t("td",null,[t("i",{class:"bi bi-person-fill"}),n(" 收件人姓名")],-1),Dt=t("td",null,[t("i",{class:"bi bi-telephone-fill"}),n(" 收件人電話")],-1),It=t("td",null,[t("i",{class:"bi bi-house-fill"}),n(" 收件人地址")],-1),Et=t("tr",null,[t("td",null,[t("i",{class:"bi bi-wallet-fill"}),n(" 付款方式")]),t("td",null,"貨到付款")],-1),Ot=t("td",null,[t("i",{class:"bi bi-chat-left-text-fill"}),n(" 留言")],-1),Mt={key:1,class:"d-flex flex-column align-items-center py-10"},Rt=B('<img src="'+v+'" class="loadingLogo mb-3" style="width:150px;" alt=""><h1 class="text-center fw-bold text-lightBrown"><span class="me-1 animate-text">L</span><span class="mx-1 animate-text">o</span><span class="mx-1 animate-text">a</span><span class="mx-1 animate-text">d</span><span class="mx-1 animate-text">i</span><span class="mx-1 animate-text">n</span><span class="mx-1 animate-text">g</span><span class="mx-2 animate-text">.</span><span class="me-2 animate-text">.</span><span class="animate-text">.</span></h1>',2),jt=[Rt];function zt(i,a,h,_,s,Pt){const u=T("RouterLink");return r(),l("div",V,[s.loadingItem?s.loadingItem?(r(),l("div",Mt,jt)):d("",!0):(r(),l("div",L,[t("nav",q,[t("ol",A,[t("li",D,[k(u,{to:"/member",href:"#",class:"link-orange"},{default:C(()=>[n("會員專區")]),_:1})]),I,t("li",E,e(s.order.deliveryStatus),1)])]),t("span",null,"訂單建立時間："+e(new Date(s.order.creatAt).toLocaleDateString()),1),t("span",O,"訂單編號："+e(s.order.id),1),t("div",M,[t("section",R,[j,s.barWidth<33?(r(),l("div",z)):s.barWidth>=33?(r(),l("div",P)):d("",!0),t("div",U,[t("i",{class:c(["bi bi-truck fs-1",{"text-red":s.barWidth>=33}])},null,2),t("h5",{class:c(["fw-bold",{"text-red":s.barWidth>=33}]),style:{"white-space":"nowrap"}},"運送中",2)]),s.barWidth<66?(r(),l("div",F)):s.barWidth>=66?(r(),l("div",X)):d("",!0),t("div",Y,[t("i",{class:c(["bi bi-house-check fs-1",{"text-red":s.barWidth>=66}])},null,2),t("h5",{class:c(["fw-bold",{"text-red":s.barWidth>=66}]),style:{"white-space":"nowrap"}},"已抵達",2)]),s.barWidth<100?(r(),l("div",Z)):s.barWidth===100?(r(),l("div",G)):d("",!0),t("div",H,[t("i",{class:c(["bi bi-clipboard-check fs-1",{"text-red":s.barWidth===100}])},null,2),t("h5",{class:c(["fw-bold",{"text-red":s.barWidth===100}]),style:{"white-space":"nowrap"}},"訂單完成",2)])]),t("div",J,[t("div",K,[Q,s.order.cart?(r(),l("div",$,[t("div",tt,[t("div",st,[(r(!0),l(W,null,N(s.order.cart.items,(o,m)=>(r(),l("div",{class:"col-12",key:m+756345},[t("div",et,[t("div",ot,[t("div",lt,[t("img",{src:o.product.imgUrl,class:"img-fluid rounded-start",style:{"object-fit":"cover",height:"100px",width:"200px"}},null,8,rt)]),t("div",it,[t("div",dt,[t("h5",nt,[n(e(o.product.title)+" ",1),t("span",ct,"x "+e(i.numberComma(o.qty)),1)]),t("div",at,[t("del",{class:c(["me-2 text-muted mt-1",{"d-none":!o.product.isCheaper}]),style:{"font-size":"14px"}},"NT$ "+e(i.numberComma(o.product.originalPrice)),3),t("span",ht,[t("span",{class:c({"text-danger":o.product.isCheaper,"fw-bold":o.product.isCheaper})},"NT$ "+e(i.numberComma(o.product.price)),3),n(" / "+e(o.product.num)+e(o.product.unit),1)]),_t]),o.product.category!=="組合包"?(r(),l("p",ut,"小計：NT$ "+e(i.numberComma(o.product.price*o.qty))+" / "+e(i.numberComma(o.product.num*o.qty))+e(o.product.unit),1)):d("",!0),o.product.category==="組合包"?(r(),l("p",mt,"小計：NT$ "+e(i.numberComma(o.product.price*o.qty))+" / "+e(i.numberComma(o.qty))+"組",1)):d("",!0)])])])]),pt]))),128))])]),t("div",bt,[t("table",xt,[t("thead",null,[t("tr",null,[ft,s.order.cart?(r(),l("th",gt,"NT$ "+e(i.numberComma(s.order.cart.total)),1)):d("",!0)])]),t("tbody",null,[t("tr",null,[t("td",null,[n("運費"),s.order.cart.total>=1e3?(r(),l("span",yt,"(滿千元免運)")):d("",!0)]),s.order.cart?(r(),l("td",vt,"NT$ "+e(s.order.cart.deliveryCharge),1)):d("",!0)]),s.order.cart.total+s.order.cart.deliveryCharge!==s.order.cart.finalTotal&&s.order.cart.coupon?(r(),l("tr",wt,[kt,t("td",Ct,"- NT$ "+e(i.numberComma(Math.ceil(s.order.cart.total*(s.order.cart.coupon.discount/100)))),1)])):d("",!0),t("tr",Wt,[Nt,t("td",Tt,"NT$ "+e(i.numberComma(s.order.cart.finalTotal)),1)])])])])])):d("",!0)]),t("div",Bt,[St,t("table",Vt,[t("thead",null,[t("tr",null,[Lt,t("th",qt,e(s.order.email),1)])]),t("tbody",null,[t("tr",null,[At,t("td",null,e(s.order.name),1)]),t("tr",null,[Dt,t("td",null,e(s.order.phoneNum),1)]),t("tr",null,[It,t("td",null,e(s.order.address),1)]),Et,t("tr",null,[Ot,t("td",null,e(s.order.message),1)])])])])])])]))])}const Zt=w(S,[["render",zt]]);export{Zt as default};
