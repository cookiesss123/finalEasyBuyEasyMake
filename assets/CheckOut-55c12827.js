import{m as x,a as N}from"./index-c6d50911.js";import{c as v}from"./carts-3e98ce4a.js";import{n as k}from"./numberCommaMixin-e0aac39c.js";import{v as C}from"./runtime-dom.esm-bundler-54ced388.js";import{_ as V,U as i,V as s,a1 as w,a2 as T,a0 as l,Y as c,Z as u,W as n,X as _,a5 as I,r as h,o as m,a4 as d,$ as q}from"./_plugin-vue_export-helper-03b40388.js";import"./vue-router-2c21c692.js";import"./_commonjsHelpers-042e6b4d.js";import"./db-64e704f5.js";const S={data(){return{userId:"",token:"",nickName:"",user:{email:"",name:"",phoneNum:"",address:"",message:""}}},mixins:[k],methods:{...x(v,["getCart","addOrder"]),isPhone(o){return/^(09)[0-9]{8}$/.test(o)?!0:"需要正確的電話號碼"}},mounted(){this.token=document.cookie.replace(/(?:(?:^|.*;\s*)myToken\s*=\s*([^;]*).*$)|^.*$/,"$1"),this.userId=localStorage.getItem("userId"),this.userId=Number(this.userId),this.nickName=localStorage.getItem("nickName")},computed:{...N(v,["cart","cartItems"])}},U={class:"my-10"},z=I('<div class="container"><nav aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item fs-5"> 購物車 </li><li class="breadcrumb-item active fs-5" aria-current="page">填寫訂單資訊</li></ol></nav></div>',1),F={class:"container mt-5"},M={class:"row row-cols-1 row-cols-lg-2 g-5"},B={class:"col"},E={class:"row"},L={class:"card mb-3 border-0"},O={class:"row g-0"},P=["src"],W={class:"col-8"},j={class:"card-body d-flex flex-column h-100"},D={class:"card-title d-flex mb-auto subTitle"},R={class:"ms-auto"},A={class:"card-text d-flex justify-content-end"},X={class:"mt-1"},Y={key:0,class:"mb-0 text-danger text-end fw-bold"},Z={key:1,class:"mb-0 text-danger text-end fw-bold"},G=s("hr",null,null,-1),H={class:"col-12"},J={class:"card border-0"},K={class:"card-body"},Q={class:"table table-borderless"},$=s("th",{class:"fw-normal"},"商品總金額",-1),ss={class:"text-end fw-normal"},es={key:0},os={class:"text-end"},ts={key:0},ls=s("td",null,"優惠券折扣",-1),as={class:"text-end"},rs={class:"border-top"},ns=s("td",{class:"fw-bold text-danger"},"總計金額",-1),ds={class:"text-end fw-bold text-danger"},cs={key:0},is={key:1},ms={class:"col-12"},us=s("i",{class:"bi bi-arrow-left"},null,-1),ps={class:"col"},bs={class:"row gy-4 d-flex"},hs={class:"col-12 fs-5"},_s=s("i",{class:"bi bi-envelope-fill"},null,-1),fs=s("span",{class:"text-danger h4 ms-2"},"*",-1),vs={class:"col-12 fs-5"},ys=s("i",{class:"bi bi-person-fill"},null,-1),gs=s("span",{class:"text-danger h4 ms-2"},"*",-1),xs={class:"col-12 fs-5"},Ns=s("i",{class:"bi bi-telephone-fill"},null,-1),ks=s("span",{class:"text-danger h4 ms-2"},"*",-1),Cs={class:"col-12 fs-5"},Vs=s("i",{class:"bi bi-house-fill"},null,-1),ws=s("span",{class:"text-danger h4 ms-2"},"*",-1),Ts=s("div",{class:"col-12 fs-5 position-relative"},[s("label",{for:"payWay",class:"form-label text-red"},[s("i",{class:"bi bi-wallet-fill"}),c(" 付款方式"),s("span",{class:"text-danger h4 ms-2"},"*")]),s("input",{type:"text",class:"form-control",id:"payWay",value:"貨到付款",disabled:""}),s("i",{class:"fs-4 text-success bi bi-check-lg position-absolute",style:{top:"40px",right:"20px"}}),s("p",{class:"text-muted",style:{"font-size":"14px"}},"注意：本店一律採貨到付款的方式喔!")],-1),Is={class:"col-12 fs-5"},qs=s("i",{class:"bi bi-chat-left-text-fill"},null,-1),Ss=s("span",{class:"text-muted ms-2",style:{"font-size":"14px"}},"(可不填寫)",-1),Us=s("p",{class:"text-muted",style:{"font-size":"14px"}},"有任何問題或是貨品相關注意事項都歡迎與我們聯繫~",-1),zs=s("div",{class:"col-12 mt-4"},[s("button",{type:"submit",class:"btn btn-red w-100"},"確認建立訂單")],-1);function Fs(o,a,Ms,Bs,t,y){const f=h("RouterLink"),p=h("VField"),b=h("ErrorMessage"),g=h("VForm");return m(),i("div",U,[z,s("section",F,[s("div",M,[s("div",B,[s("div",E,[(m(!0),i(w,null,T(o.cartItems,(e,r)=>(m(),i("div",{class:"col-12",key:r+756345},[s("div",L,[s("div",O,[n(f,{to:`/products/${e.product.id}`,class:"col-4"},{default:_(()=>[s("img",{src:e.product.imgUrl,class:"img-fluid rounded-start w-100",style:{"object-fit":"cover",height:"150px"}},null,8,P)]),_:2},1032,["to"]),s("div",W,[s("div",j,[s("h5",D,[c(l(e.product.title)+" ",1),s("span",R,"x "+l(o.numberComma(e.qty)),1)]),s("div",A,[s("del",{class:d(["me-2 text-muted mt-1",{"d-none":!e.product.isCheaper}]),style:{"font-size":"14px"}},"NT$ "+l(o.numberComma(e.product.originalPrice)),3),s("span",X,[s("span",{class:d({"text-danger":e.product.isCheaper,"fw-bold":e.product.isCheaper})},"NT$ "+l(o.numberComma(e.product.price)),3),c(" / "+l(e.product.num)+l(e.product.unit),1)])]),e.product.category!=="組合包"?(m(),i("p",Y,"小計：NT$ "+l(o.numberComma(e.product.price*e.qty))+" / "+l(o.numberComma(e.product.num*e.qty))+l(e.product.unit),1)):u("",!0),e.product.category==="組合包"?(m(),i("p",Z,"小計：NT$ "+l(o.numberComma(e.product.price*e.qty))+" / "+l(o.numberComma(e.qty))+"組",1)):u("",!0)])])])]),G]))),128)),s("div",H,[s("div",J,[s("div",K,[s("table",Q,[s("thead",null,[s("tr",null,[$,s("th",ss,"NT$ "+l(o.numberComma(o.cart.total)),1)])]),s("tbody",null,[s("tr",null,[s("td",null,[c("運費"),o.cart.total>=1e3?(m(),i("span",es,"(滿千元免運)")):u("",!0)]),s("td",os," NT$ "+l(o.cart.total>=1e3?0:o.cart.deliveryCharge),1)]),o.cart.total+o.cart.deliveryCharge!==o.cart.finalTotal&&o.cart.coupon?(m(),i("tr",ts,[ls,s("td",as,"- NT$ "+l(o.numberComma(Math.ceil(o.cart.total*(o.cart.coupon.discount/100)))),1)])):u("",!0),s("tr",rs,[ns,s("td",ds,[o.cart.total<1e3?(m(),i("span",cs,"NT$ "+l(o.numberComma(o.cart.finalTotal)),1)):o.cart.total>=1e3?(m(),i("span",is,"NT$ "+l(o.numberComma(o.cart.finalTotal-o.cart.deliveryCharge)),1)):u("",!0)])])])])])])]),s("div",ms,[n(f,{to:"/products",class:"btn btn-outline-red mb-4 ms-3"},{default:_(()=>[us,c(" 繼續選購")]),_:1})])])]),s("div",ps,[n(g,{ref:"form",class:"",onSubmit:a[5]||(a[5]=()=>o.addOrder(t.user.email,t.user.name,t.user.phoneNum,t.user.address,t.user.message))},{default:_(({errors:e})=>[s("div",bs,[s("div",hs,[s("label",{for:"email",class:d(["form-label text-secondary",{"text-red":t.user.email&&!e.信箱}])},[_s,c(" 信箱"),fs],2),n(p,{id:"email",name:"信箱",type:"email",class:d(["form-control border-0 border-bottom",{"is-invalid":e.信箱,"is-valid":t.user.email&&!e.信箱}]),placeholder:"請輸入您的信箱",rules:"email|required",modelValue:t.user.email,"onUpdate:modelValue":a[0]||(a[0]=r=>t.user.email=r)},null,8,["class","modelValue"]),n(b,{name:"信箱",class:"invalid-feedback"})]),s("div",vs,[s("label",{for:"name",class:d(["form-label text-secondary",{"text-red":t.user.name&&!e.收件人姓名}])},[ys,c(" 收件人姓名"),gs],2),n(p,{id:"name",name:"收件人姓名",type:"name",class:d(["form-control border-0 border-bottom",{"is-invalid":e.收件人姓名,"is-valid":!e.收件人姓名&&t.user.name}]),placeholder:"請輸入您的收件人姓名",rules:"required",modelValue:t.user.name,"onUpdate:modelValue":a[1]||(a[1]=r=>t.user.name=r)},null,8,["class","modelValue"]),n(b,{name:"收件人姓名",class:"invalid-feedback"})]),s("div",xs,[s("label",{for:"phoneNum",class:d(["form-label text-secondary",{"text-red":t.user.phoneNum&&!e.收件人電話}])},[Ns,c(" 收件人電話"),ks],2),n(p,{id:"phoneNum",name:"收件人電話",type:"phoneNum",class:d(["form-control border-0 border-bottom",{"is-invalid":e.收件人電話,"is-valid":!e.收件人電話&&t.user.phoneNum}]),placeholder:"請輸入您的收件人電話",rules:y.isPhone,modelValue:t.user.phoneNum,"onUpdate:modelValue":a[2]||(a[2]=r=>t.user.phoneNum=r)},null,8,["class","rules","modelValue"]),n(b,{name:"收件人電話",class:"invalid-feedback"})]),s("div",Cs,[s("label",{for:"address",class:d(["form-label text-secondary",{"text-red":t.user.address&&!e.收件人地址}])},[Vs,c(" 收件人地址"),ws],2),n(p,{id:"address",name:"收件人地址",type:"address",class:d(["form-control border-0 border-bottom",{"is-invalid":e.收件人地址,"is-valid":!e.收件人地址&&t.user.address}]),placeholder:"請輸入您的收件人地址",rules:"required",modelValue:t.user.address,"onUpdate:modelValue":a[3]||(a[3]=r=>t.user.address=r)},null,8,["class","modelValue"]),n(b,{name:"收件人地址",class:"invalid-feedback"})]),Ts,s("div",Is,[s("label",{for:"message",class:d(["form-label text-secondary",{"text-red":t.user.message}])},[qs,c(" 留言")],2),Ss,q(s("textarea",{id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":a[4]||(a[4]=r=>t.user.message=r)},null,512),[[C,t.user.message]]),Us]),zs])]),_:1},512)])])])])}const As=V(S,[["render",Fs]]);export{As as default};
