import{d as n}from"./index-9f8e1fb0.js";import{r as i,d as c,b as h}from"./carts-18eb5781.js";const g=n("mainData",{state:()=>({thumbs:{},highThumbs:{},rates:{},highRates:{}}),actions:{getRecipes(){return new Promise((t,a)=>{const s=i(c,"recipes/");h(s,r=>{const e=r.val();for(const o in e)e[o].id=o;t(e)})})},getProducts(){return new Promise((t,a)=>{const s=i(c,"products/");h(s,r=>{const e=r.val();for(const o in e)e[o].id=o;t(e)})})},getThumbs(){const t=i(c,"recipeThumbs/");h(t,a=>{const s=a.val();this.thumbs=s,Object.entries(this.thumbs).forEach(r=>{r[1].thumbs>2&&(this.highThumbs[r[0]]=r[1].thumbs)})})},getRates(){const t=i(c,"productRates/");h(t,a=>{const s=a.val(),r={};Object.values(s).forEach(e=>{r[e.productId]?r[e.productId]&&(r[e.productId].score+=e.score,r[e.productId].ratePeople+=1,r[e.productId].averageRate=Number((r[e.productId].score/r[e.productId].ratePeople).toFixed(1))):r[e.productId]={score:e.score,ratePeople:1,averageRate:e.score}}),this.rates=r,this.highRates={},Object.keys(this.rates).forEach(e=>{this.rates[e].averageRate>=4&&(this.highRates[e]=this.rates[e])})})}},getters:{discount(){return t=>(100-((t.originalPrice-t.price)/t.originalPrice*100).toFixed(0))%10===0?(100-((t.originalPrice-t.price)/t.originalPrice*100).toFixed(0)).toString().charAt(0):100-((t.originalPrice-t.price)/t.originalPrice*100).toFixed(0)}}});export{g as d};
