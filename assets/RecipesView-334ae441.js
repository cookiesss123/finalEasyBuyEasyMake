import{l as x}from"./loadingStore-73c40ae8.js";import{R as N,f as u,m as w}from"./index-9f8e1fb0.js";import{c as S}from"./carts-18eb5781.js";import{m as R}from"./bookmark-53538cba.js";import{d as O}from"./mainData-f772ca38.js";import{n as V}from"./numberCommaMixin-e0aac39c.js";import{P}from"./PaginationComponent-737fcd4b.js";import{C as v}from"./collapse-56154a75.js";import{s as T}from"./publicData-f4e8600e.js";import{B as q}from"./BannerComponent-882e3d71.js";import{l as D,w as U,n as C,j as d}from"./runtime-dom.esm-bundler-eb0e3820.js";import{_ as j}from"./image5-4fc2427e.js";import{_ as G}from"./image4-1806383b.js";import{_ as M}from"./undraw_Page_not_found_re_e9o6-993b7155.js";import{b6 as E,av as g,aj as r,l,t as b,m as t,F as f,at as _,a3 as n,s as c,aJ as a,b3 as h,k as p,b1 as L}from"./_plugin-vue_export-helper-68081c38.js";import"./base-component-9dfae801.js";const H={components:{RouterLink:N,PaginationComponent:P,BannerComponent:q},mixins:[V],data(){return{selections:T,costOrRateCollapse:{},highOrLowCollapse:{},selectCategory:"全部",selectItem:"全部",priceOrRate:"成本",highOrLow:"不拘",recipeSearchName:"",recipes:[],filterRecipes:[],search:!1}},methods:{...u(S,["toastMessage"]),...u(R,["addBookmark","deleteBookmark","getBookmarks"]),...u(O,["getRecipes","getThumbs"]),...u(x,["startLoading"]),searchRecipes(){this.filterRecipes.forEach((s,o)=>{this.thumbs[s.id]?this.filterRecipes[o].thumbs=this.thumbs[s.id].thumbs:this.thumbs[s.id]||(this.filterRecipes[o].thumbs=0)}),this.selectItem==="全部"?this.filterRecipes=this.recipes:this.selectItem!=="全部"&&(this.filterRecipes=this.recipes.filter(s=>s.category===this.selectItem)),this.priceOrRate==="成本"&&this.highOrLow!=="不拘"?this.highOrLow==="低到高"?this.filterRecipes=this.filterRecipes.sort((s,o)=>s.price-o.price):this.highOrLow==="高到低"&&(this.filterRecipes=this.filterRecipes.sort((s,o)=>o.price-s.price)):this.priceOrRate==="評價"&&this.highOrLow!=="不拘"&&(this.highOrLow==="低到高"?this.filterRecipes=this.filterRecipes.sort((s,o)=>s.thumbs-o.thumbs):this.highOrLow==="高到低"&&(this.filterRecipes=this.filterRecipes.sort((s,o)=>o.thumbs-s.thumbs))),this.filterRecipes=this.filterRecipes.filter(s=>s.title.match(this.recipeSearchName)),this.search=!0,this.$refs.pagination.renderPage(1,this.filterRecipes)},async getData(){this.recipes=await this.getRecipes(),this.recipes=Object.values(this.recipes),this.filterRecipes=this.recipes,!this.$route.query.category&&this.$route.fullPath==="/recipes"?this.$refs.pagination.renderPage(1,this.filterRecipes):this.$route.query.category&&this.searchRecipes(),this.getBookmarks("recipeBookmarks")},select(s){this.selectCategory=s,this.recipeSearchName="",this.highOrLow="不拘"}},mounted(){this.startLoading(),this.costOrRateCollapse=new v(this.$refs.costOrRateCollapse,{toggle:!1,parent:"#myGroup"}),this.highOrLowCollapse=new v(this.$refs.highOrLowCollapse,{toggle:!1,parent:"#myGroup"}),this.$route.query.category&&(this.selectItem=this.$route.query.category,this.selectCategory=this.selectItem,this.highOrLow=this.$route.query.valueHighOrLow,this.priceOrRate=this.$route.query.valuePriceOrRate,this.recipeSearchName=this.$route.query.searchName),this.getThumbs(),this.getData()},watch:{selectCategory(){this.selectItem=this.selectCategory,this.selectCategory==="全部"?this.filterRecipes=this.recipes:this.selectCategory!=="全部"&&(this.filterRecipes=this.recipes.filter(s=>s.category===this.selectCategory)),this.$refs.pagination.renderPage(1,this.filterRecipes)},priceOrRate(){this.costOrRateCollapse.hide()},highOrLow(){this.highOrLowCollapse.hide()},filterRecipes(){this.costOrRateCollapse.hide(),this.highOrLowCollapse.hide()}},computed:{...w(R,["recipeBookmarks","uid"]),...w(O,["thumbs"])}},F={class:"container"},K={class:"pt-lg-4 pt-3 position-relative","data-aos":"fade-up"},z={class:"category-selector row row-cols-6 list-unstyled border-bottom"},A=["onClick"],J={class:"fs-12 fs-md-5 d-block pb-2"},Q=t("br",{class:"d-lg-none"},null,-1),W={class:"d-none d-lg-block my-5","data-aos":"fade-up"},X={class:"input-group"},Y=t("i",{class:"bi bi-caret-down-fill"},null,-1),Z={class:"ms-2 fw-bold"},$=t("i",{class:"bi bi-caret-down-fill"},null,-1),ee={class:"ms-2 fw-bold"},te=t("span",{class:"material-icons-outlined text-primary"},"search",-1),se=[te],oe={class:"row g-0",id:"myGroup"},ie={class:"col-2"},re={ref:"costOrRateCollapse",class:"collapse"},le={class:"card card-body"},ae={class:"btn-group-vertical",role:"group","aria-label":"Vertical radio toggle button group"},ne=t("label",{class:"btn btn-outline-primary",for:"selectprice"},"成本",-1),ce=t("label",{class:"btn btn-outline-primary",for:"selectRate"},"評價",-1),he={class:"col-2"},pe={ref:"highOrLowCollapse",class:"collapse"},me={class:"card card-body"},de={class:"btn-group-vertical",role:"group","aria-label":"Vertical radio toggle button group"},ue=t("label",{class:"btn btn-outline-primary",for:"noDifference"},"不拘",-1),be=t("label",{class:"btn btn-outline-primary",for:"highToLow"},"高到低",-1),ge=t("label",{class:"btn btn-outline-primary",for:"lowToHigh"},"低到高",-1),fe={key:0,class:"row row-cols-xl-4 row-cols-lg-3 row-cols-2 gy-4","data-aos":"fade-up"},_e={class:"card position-relative"},ye=["src","alt"],ke={class:"badge rounded-pill bg-primary position-absolute start-0 bottom-0 m-3"},we=t("p",{class:"detail position-absolute top-50 start-50 translate-middle fw-bold letter-spacing-5 link-darkBrown fs-xl-5 text-center"},[c("查看"),t("br",{class:"d-xl-none d-lg-block"}),c("詳細食譜")],-1),Re=["onClick"],Oe=t("img",{src:j,alt:"收藏按鈕-未收藏"},null,-1),ve=[Oe],Ce=["onClick"],Le=t("img",{src:G,alt:"收藏按鈕-已收藏"},null,-1),Be=[Le],Ie={class:"fw-bold fs-md-5 fs-6"},xe={class:"d-flex align-items-center flex-wrap fs-md-6 fs-12"},Ne=t("i",{class:"bi bi-hand-thumbs-up-fill"},null,-1),Se={key:2,class:"badge rounded-pill ms-auto border mt-1 mt-md-0 border-gray bg-whiteGray text-gray"},Ve=t("i",{class:"bi bi-hand-thumbs-up-fill"},null,-1),Pe={key:1,class:"py-lg-4 text-center"},Te=t("img",{src:M,class:"mb-lg-3 mb-2 img-md-200-sm-150",alt:"查無資訊"},null,-1),qe=t("h3",{class:"fs-lg-3 fs-6"},"查無食譜，請您重新查詢",-1),De=[Te,qe];function Ue(s,o,je,Ge,i,m){const B=g("BannerComponent"),y=g("RouterLink"),I=g("PaginationComponent");return r(),l("div",null,[b(B),t("section",F,[t("div",K,[t("ul",z,[(r(!0),l(f,null,_(i.selections.dessertCategory,e=>(r(),l("li",{key:e.icon,class:n(["col text-center",{"pointer-events-none":i.selectItem===e.title}])},[t("a",{href:"#",onClick:C(()=>m.select(e.title),["prevent"]),class:n(["text-decoration-none d-inline-block",{"fw-bold":i.selectItem===e.title,"link-primary":i.selectItem===e.title}])},[i.selectItem!==e.title?(r(),l("i",{key:0,class:n([e.icon,"text-gray"])},null,2)):p("",!0),i.selectItem===e.title?(r(),l("i",{key:1,class:n([e.iconSelected,"text-primary"])},null,2)):p("",!0),t("span",J,[c(a(e.title==="全部"?"所有":e.title.slice(0,2)),1),Q,c(a(e.title==="全部"?"甜點":e.title.slice(2,4)),1)])],10,A)],2))),128))]),t("div",{class:n(["blue-line bg-primary position-absolute",{"active-all-recipe":i.selectItem==="全部","active-taiwan":i.selectItem==="台式甜點","active-france":i.selectItem==="法式甜點","active-usa":i.selectItem==="美式甜點","active-japan":i.selectItem==="日式甜點","active-italy":i.selectItem==="義式甜點"}])},null,2)]),t("div",W,[t("div",X,[t("a",{class:"btn btn-outline-primary px-5",onClick:o[0]||(o[0]=()=>this.costOrRateCollapse.toggle())},[c("篩選對象 "),Y,t("span",Z,a(i.priceOrRate),1)]),t("button",{class:"btn btn-outline-primary px-5",type:"button",onClick:o[1]||(o[1]=()=>this.highOrLowCollapse.toggle())},[c("篩選值 "),$,t("span",ee,a(i.highOrLow),1)]),h(t("input",{type:"search",class:"form-control border-primary border-end-0",placeholder:"請輸入食譜名稱","aria-label":"Example text with two button addons","onUpdate:modelValue":o[2]||(o[2]=e=>i.recipeSearchName=e),onKeyup:o[3]||(o[3]=U((...e)=>m.searchRecipes&&m.searchRecipes(...e),["enter"]))},null,544),[[D,i.recipeSearchName]]),t("button",{type:"submit",class:"btn border border-primary border-start-0 bg-transparent d-flex",onClick:o[4]||(o[4]=C((...e)=>m.searchRecipes&&m.searchRecipes(...e),["prevent"]))},se)]),t("div",oe,[t("div",ie,[t("div",re,[t("div",le,[t("div",ae,[h(t("input",{type:"radio",class:"btn-check",value:"成本",name:"priceOrRate",id:"selectprice",autocomplete:"off","onUpdate:modelValue":o[5]||(o[5]=e=>i.priceOrRate=e)},null,512),[[d,i.priceOrRate]]),ne,h(t("input",{type:"radio",class:"btn-check",value:"評價",name:"priceOrRate",id:"selectRate",autocomplete:"off","onUpdate:modelValue":o[6]||(o[6]=e=>i.priceOrRate=e)},null,512),[[d,i.priceOrRate]]),ce])])],512)]),t("div",he,[t("div",pe,[t("div",me,[t("div",de,[h(t("input",{type:"radio",class:"btn-check",value:"不拘",name:"highOrLow",id:"noDifference",autocomplete:"off",checked:"","onUpdate:modelValue":o[7]||(o[7]=e=>i.highOrLow=e)},null,512),[[d,i.highOrLow]]),ue,h(t("input",{type:"radio",class:"btn-check",value:"高到低",name:"highOrLow",id:"highToLow",autocomplete:"off","onUpdate:modelValue":o[8]||(o[8]=e=>i.highOrLow=e)},null,512),[[d,i.highOrLow]]),be,h(t("input",{type:"radio",class:"btn-check",value:"低到高",name:"highOrLow",id:"lowToHigh",autocomplete:"off","onUpdate:modelValue":o[9]||(o[9]=e=>i.highOrLow=e)},null,512),[[d,i.highOrLow]]),ge])])],512)])])]),i.filterRecipes.length?(r(),l("div",fe,[(r(!0),l(f,null,_(this.$refs.pagination.pageProducts,e=>(r(),l("div",{class:"col",key:e.id},[t("div",_e,[b(y,{to:`/recipes/${e.id}`,class:"card-img-hover position-relative"},{default:L(()=>[t("img",{src:e.image,class:"object-fit-cover card-img",alt:e.title},null,8,ye),t("span",ke,a(e.category),1),we]),_:2},1032,["to"]),t("button",{type:"button",class:"position-absolute btn-bookmark border-0 bg-transparent top-0 end-0 m-2 m-md-3",onClick:()=>s.addBookmark("recipeBookmarks",e)},ve,8,Re),(r(!0),l(f,null,_(s.recipeBookmarks,(Me,k)=>(r(),l("div",{key:k},[k===e.id?(r(),l("button",{key:0,type:"button",class:"position-absolute btn-bookmark-delete border-0 bg-transparent top-0 end-0 m-2 m-md-3",onClick:()=>s.deleteBookmark("recipeBookmarks",e.id)},Be,8,Ce)):p("",!0)]))),128)),b(y,{to:`/recipes/${e.id}`,class:"card-body px-0 text-decoration-none link-darkBrown"},{default:L(()=>[t("h3",Ie,a(e.title),1),t("div",xe,[e.total?(r(),l("del",{key:0,class:n(["me-2 text-muted",{"d-none":e.price===e.total}])},"NT$ "+a(s.numberComma(e.total)),3)):p("",!0),t("span",{class:n(["me-1",{"text-danger":e.price!==e.total,"fw-bold":e.price!==e.total}])},"NT$ "+a(s.numberComma(e.price)),3),t("span",null," / "+a(e.content),1),s.thumbs[e.id]?(r(),l("span",{key:1,class:n(["badge rounded-pill ms-auto border mt-1 mt-md-0",{"border-primary":s.thumbs[e.id].thumbs!==0,"border-gray":s.thumbs[e.id].thumbs===0,"text-primary":s.thumbs[e.id].thumbs!==0,"text-gray":s.thumbs[e.id].thumbs===0,"bg-secondary":s.thumbs[e.id].thumbs!==0,"bg-whiteGray":s.thumbs[e.id].thumbs===0}])},[c(a(s.thumbs[e.id].thumbs)+" ",1),Ne],2)):s.thumbs[e.id]?p("",!0):(r(),l("span",Se,[c(" 0 "),Ve]))])]),_:2},1032,["to"])])]))),128))])):!i.filterRecipes.length&&i.search?(r(),l("div",Pe,De)):p("",!0)]),b(I,{ref:"pagination","price-or-rate":i.priceOrRate,"filter-recipes":i.filterRecipes,class:"mb-5"},null,8,["price-or-rate","filter-recipes"])])}const ot=E(H,[["render",Ue]]);export{ot as default};
