import{m as f,b as g}from"./axios-199d4453.js";import{c as b}from"./carts-07168e92.js";import{e as k}from"./undraw_shopping_app_flsj-4ac8a86c.js";import{l as m}from"./runtime-dom.esm-bundler-226b1721.js";import{_ as w}from"./4771632-6f97335a.js";import{b6 as v,l,m as t,F as N,at as T,b3 as y,k as i,aJ as s,t as u,b1 as p,s as r,av as $,aj as a,a3 as h}from"./_plugin-vue_export-helper-31c7975b.js";import"./vue-router-495964e8.js";import"./_commonjsHelpers-042e6b4d.js";const q={data(){return{emptyCartImg:k}},methods:{...f(b,["checkLogin","logout","getCart","updateCartNum","changeCartNum","handleKeyDown","deleteCart","deleteAllCarts","getCoupons","checkCoupon","reUseCoupon"])},mounted(){this.checkLogin(),console.log(this.token,this.userId,"金鑰")},computed:{...g(b,["token","userId","nickName","admin","cart","cartItems","cartNum"])}},x={class:"mt-10"},I=t("h5",{class:"text-center text-brown mb-3 fw-bold"},[t("img",{src:w,class:"me-2",width:"30",alt:""}),r("我的購物車")],-1),U={key:0,class:"row gy-3 row-cols-1 px-3"},V={class:"col-12 d-flex"},D={class:"card mb-3",style:{"max-width":"540px"}},L={class:"row g-0"},j=["src"],A={class:"col-8"},K={class:"card-body"},B={class:"card-title d-flex"},M=["onClick"],S={class:"card-text d-flex justify-content-end"},z={class:"mt-1"},F=t("br",null,null,-1),R={class:"d-flex justify-content-center align-items-center mb-2"},E=["onClick"],J=["onUpdate:modelValue","onChange"],P=["onClick"],G={class:"mb-0 text-danger text-end"},H=t("hr",null,null,-1),O={class:"col-12"},Q=t("label",{for:"code",class:"col-3 form-label"},"優惠碼",-1),W={key:0,class:"input-group mb-3"},X={key:1,class:"input-group mb-3"},Y=["value"],Z={class:"table table-borderless"},tt=t("th",{class:"fw-normal"},"商品總金額",-1),ot={class:"text-end fw-normal"},et=t("td",null,"運費",-1),st={class:"text-end"},nt={key:0},lt={class:"text-end"},at={class:"border-top"},dt=t("td",{class:"fw-bold text-danger"},"總計金額",-1),rt={class:"text-end fw-bold text-danger"},ct={key:1,class:"mt-6 d-flex flex-column align-items-center"},it=t("h5",{class:"text-center"},"您的購物車是空的",-1),ut=["src"];function pt(o,n,ht,bt,_,mt){const c=$("RouterLink");return a(),l("div",x,[I,o.cartItems.length!==0?(a(),l("div",U,[t("div",V,[t("button",{type:"button",class:"ms-auto btn btn-danger",onClick:n[0]||(n[0]=(...e)=>o.deleteAllCarts&&o.deleteAllCarts(...e))},"清空購物車")]),(a(!0),l(N,null,T(o.cartItems,(e,C)=>(a(),l("div",{class:"col-12",key:C+756345},[t("div",D,[t("div",L,[u(c,{to:`/products/${e.product.id}`,class:"col-4"},{default:p(()=>[t("img",{src:e.product.imgUrl,class:"img-fluid rounded-start h-100",style:{"object-fit":"cover","max-width":"100%","max-height":"100%"}},null,8,j)]),_:2},1032,["to"]),t("div",A,[t("div",K,[t("h5",B,[r(s(e.product.title)+" ",1),t("button",{onClick:()=>o.deleteCart(e.product),type:"button",class:"p-0 ms-auto btn-close m-0","aria-label":"Close",style:{width:"15px"}},null,8,M)]),t("div",S,[t("del",{class:h(["me-2 text-muted mt-1",{"d-none":!e.product.isCheaper}]),style:{"font-size":"14px"}},"NT$ "+s(e.product.originalPrice),3),t("span",z,[t("span",{class:h({"text-danger":e.product.isCheaper,"fw-bold":e.product.isCheaper})},"NT$ "+s(e.product.price),3),r(" / "+s(e.product.num)+s(e.product.unit),1)]),F]),t("div",R,[t("button",{class:h(["btn btn-sm btn-brown rounded-circle",{disabled:e.qty===1}]),style:{width:"30px",height:"30px"},type:"button",id:"button-addon2",onClick:()=>o.updateCartNum("reduce",e.product,e.qty)},"-",10,E),y(t("input",{type:"number",class:"form-control border-0 text-center","onUpdate:modelValue":d=>e.qty=d,onChange:d=>o.changeCartNum(e.id,e.product,e.qty,d),style:{width:"70px"},onKeydown:n[1]||(n[1]=(...d)=>o.handleKeyDown&&o.handleKeyDown(...d))},null,40,J),[[m,e.qty,void 0,{number:!0}]]),t("button",{class:"btn btn-sm btn-brown rounded-circle",style:{width:"30px",height:"30px"},type:"button",id:"button-addon2",onClick:()=>o.updateCartNum("add",e.product,e.qty)},"+",8,P)]),t("p",G,"小計：NT$ "+s(e.product.price*e.qty)+" / "+s(e.product.num*e.qty)+s(e.product.unit),1)])])])])]))),128)),H,t("div",O,[Q,o.cart.total+o.cart.deliveryCharge===o.cart.finalTotal?(a(),l("div",W,[y(t("input",{id:"code",type:"text",class:"form-control","onUpdate:modelValue":n[2]||(n[2]=e=>o.code=e)},null,512),[[m,o.code]]),t("button",{class:"btn btn-outline-secondary",type:"button",id:"button-addon2",onClick:n[3]||(n[3]=()=>o.checkCoupon(o.code))},"套用優惠碼")])):o.cart.total+o.cart.deliveryCharge!==o.cart.finalTotal?(a(),l("div",X,[t("input",{id:"code",type:"text",class:"form-control",value:o.cart.coupon.code,disabled:""},null,8,Y),t("button",{class:"btn btn-outline-secondary",type:"button",id:"button-addon2",onClick:n[4]||(n[4]=(...e)=>o.reUseCoupon&&o.reUseCoupon(...e))},"取消")])):i("",!0),t("table",Z,[t("thead",null,[t("tr",null,[tt,t("th",ot,"NT$ "+s(o.cart.total),1)])]),t("tbody",null,[t("tr",null,[et,t("td",st,"NT$ "+s(o.cart.deliveryCharge),1)]),o.cart.total+o.cart.deliveryCharge!==o.cart.finalTotal?(a(),l("tr",nt,[t("td",null,"優惠券折扣 - "+s(o.cart.coupon.title),1),t("td",lt,"- NT$ "+s(Math.ceil(o.cart.total*(o.cart.coupon.discount/100))),1)])):i("",!0),t("tr",at,[dt,t("td",rt,"NT$ "+s(o.cart.finalTotal),1)])])])]),u(c,{to:"/checkout",type:"button",class:"btn btn-brown"},{default:p(()=>[r("前往結帳")]),_:1})])):o.cartNum===0?(a(),l("div",ct,[it,t("img",{src:_.emptyCartImg,width:"300",class:"mb-3",alt:""},null,8,ut),u(c,{class:"link-orange h5",to:"/products"},{default:p(()=>[r("前往選購商品")]),_:1})])):i("",!0)])}const Nt=v(q,[["render",pt]]);export{Nt as default};
