import{f as v}from"./index-ef229fde.js";import{o as w,c as k,r as S,d as C,b as T,a as L}from"./carts-683259c2.js";import{n as N}from"./numberCommaMixin-e0aac39c.js";import{L as W}from"./index-464b61b4.js";import{_ as q}from"./loadingLogo-ea15f612.js";import{_ as V,r as _,o as l,c as i,a as b,w as p,b as s,b7 as o,aH as c,F as m,aY as f,ak as d,ao as n}from"./_plugin-vue_export-helper-f96b5234.js";import"./runtime-dom.esm-bundler-5f84711a.js";const A={data(){return{uid:"",order:{},barWidth:0,isLoading:!1}},components:{Loading:W},mixins:[N],methods:{...v(k,["goToTop"]),getOrder(){this.isLoading=!0;const{id:r}=this.$route.params;w(L,a=>{if(a){this.uid=a.uid;const u=S(C,`orders/${this.uid}/${r}`);T(u,h=>{if(this.order=h.val(),!this.order){this.$router.push("/loginSignup");return}this.order.id=r,this.order.deliveryStatus==="待出貨"?this.barWidth=0:this.order.deliveryStatus==="運送中"?this.barWidth=33:this.order.deliveryStatus==="待取貨"?this.barWidth=66:this.order.deliveryStatus==="訂單完成"&&(this.barWidth=100),this.isLoading=!1})}else this.uid=null,this.uid||this.$router.push("/loginSignup")})}},mounted(){this.goToTop(),this.getOrder()}},D={key:0,class:"py-md-96 py-60 container no-scroll-x"},z=s("div",{class:"d-flex flex-column align-items-center py-96"},[s("img",{src:q,class:"loading-logo mb-3",alt:"logo"}),s("p",{class:"text-center fw-bold text-purple fs-md-2 fs-5"},[s("span",{class:"me-1 animate-text"},"L"),s("span",{class:"mx-1 animate-text"},"o"),s("span",{class:"mx-1 animate-text"},"a"),s("span",{class:"mx-1 animate-text"},"d"),s("span",{class:"mx-1 animate-text"},"i"),s("span",{class:"mx-1 animate-text"},"n"),s("span",{class:"mx-1 animate-text"},"g"),s("span",{class:"mx-2 animate-text"},"."),s("span",{class:"me-2 animate-text"},"."),s("span",{class:"animate-text"},".")])],-1),B={"aria-label":"breadcrumb"},O={class:"breadcrumb"},R={class:"breadcrumb-item"},j=s("li",{class:"breadcrumb-item"},"訂單狀況",-1),F={class:"breadcrumb-item active","aria-current":"page"},M={class:"col-lg-6"},P={class:"table"},U=s("th",{class:"fw-normal text-muted"},"訂單建立時間",-1),E={class:"fw-normal"},H=s("td",{class:"text-muted"},"訂單編號",-1),Y={class:"position-relative w-100 mt-lg-5 my-5"},G=s("div",{class:"line-gray border-top position-absolute border-2 z-index-n1 top-8"},null,-1),I={class:"list-unstyled d-flex justify-content-between text-gray"},J={key:0,class:"order-dot-white rounded-circle position-relative bg-white border border-primary d-block mt-lg-n1"},K=s("i",{class:"bi bi-circle-fill fs-lg-14 fs-12 position-absolute translate-middle start-50 top-50"},null,-1),Q=[K],X={key:1,class:"bi bi-circle-fill d-block fs-lg-6 fs-12"},Z={class:"fs-lg-6 fs-14"},$={class:"row gx-5 gy-5 row-cols-1 row-cols-lg-2"},ss={class:"col"},ts=s("h4",{class:"text-center fw-bold bg-secondary py-2"},"訂購商品資訊",-1),es={key:0,class:"py-3"},os={class:"list-unstyled row mb-0"},rs={class:"card"},ls={class:"row g-0"},is={class:"col-4"},ns=["src"],ds={class:"col-8"},cs={class:"card-body d-flex flex-column h-100 pb-0"},as={class:"d-flex mb-auto"},us={class:"card-title mb-0 d-flex fs-lg-6 fs-14"},hs={class:"ms-auto"},_s={class:"card-text text-end"},bs={class:"mt-1"},ps=s("br",null,null,-1),ms={key:0,class:"mb-0 text-danger text-end fw-bold"},fs={key:1,class:"mb-0 text-danger text-end fw-bold"},gs=s("hr",null,null,-1),ys={class:"table table-borderless"},xs=s("th",{class:"fw-normal"},"商品總金額",-1),vs={key:0,class:"text-end fw-normal"},ws={key:0},ks={key:0,class:"text-end"},Ss={key:0},Cs=s("td",null,"優惠券折扣",-1),Ts={class:"text-end"},Ls={class:"border-top bg-secondary"},Ns=s("td",{class:"fw-bold text-danger"},"總計金額",-1),Ws={class:"text-end fw-bold text-danger"},qs={class:"col"},Vs=s("h4",{class:"text-center fw-bold bg-lightPurple py-2"},"收件人資訊",-1),As={class:"table table-borderless table-striped"},Ds=s("th",{class:"fw-normal"},[s("i",{class:"bi bi-envelope-fill"}),n(" 信箱")],-1),zs={class:"fw-normal"},Bs=s("td",null,[s("i",{class:"bi bi-person-fill"}),n(" 收件人姓名")],-1),Os=s("td",null,[s("i",{class:"bi bi-telephone-fill"}),n(" 收件人電話")],-1),Rs=s("td",null,[s("i",{class:"bi bi-house-fill"}),n(" 收件人地址")],-1),js=s("tr",null,[s("td",null,[s("i",{class:"bi bi-wallet-fill"}),n(" 付款方式")]),s("td",null,"貨到付款")],-1),Fs=s("td",null,[s("i",{class:"bi bi-chat-left-text-fill"}),n(" 留言")],-1);function Ms(r,a,u,h,e,Ps){const g=_("loading"),y=_("RouterLink");return e.order?(l(),i("section",D,[b(g,{active:e.isLoading,"onUpdate:active":a[0]||(a[0]=t=>e.isLoading=t),"lock-scroll":!0},{default:p(()=>[z]),_:1},8,["active"]),s("nav",B,[s("ol",O,[s("li",R,[b(y,{to:"/member",href:"#",class:"link-primary"},{default:p(()=>[n("會員專區")]),_:1})]),j,s("li",F,o(e.order.deliveryStatus),1)])]),s("div",M,[s("table",P,[s("thead",null,[s("tr",null,[U,s("th",E,o(new Date(e.order.creatAt).toLocaleString().split(":")[0])+":"+o(new Date(e.order.creatAt).toLocaleString().split(":")[1]),1)])]),s("tbody",null,[s("tr",null,[H,s("td",null,o(e.order.id),1)])])])]),s("div",Y,[G,s("div",{class:c(["border-top border-primary position-absolute border-2 z-index-n1 top-8",{"w-33":e.barWidth===33,"w-66":e.barWidth===66,"line-gray":e.barWidth===100}])},null,2),s("ul",I,[(l(),i(m,null,f(4,t=>s("li",{key:t+394,class:c(["d-flex flex-column align-items-center",{"text-primary":t===1&&e.barWidth>=0||t===2&&e.barWidth>=33||t===3&&e.barWidth>=66||t===4&&e.barWidth===100,"fw-bold":t===1&&e.order.deliveryStatus==="待出貨"||t===2&&e.order.deliveryStatus==="運送中"||t===3&&e.order.deliveryStatus==="待取貨"||t===4&&e.order.deliveryStatus==="訂單完成"}])},[t===1&&e.order.deliveryStatus==="待出貨"||t===2&&e.order.deliveryStatus==="運送中"||t===3&&e.order.deliveryStatus==="待取貨"||t===4&&e.order.deliveryStatus==="訂單完成"?(l(),i("div",J,Q)):(l(),i("i",X)),s("div",{class:c(["mt-2 text-center rounded-circle w-lg-90-md-70",{"bg-secondary":t===1&&e.order.deliveryStatus==="待出貨"||t===2&&e.order.deliveryStatus==="運送中"||t===3&&e.order.deliveryStatus==="待取貨"||t===4&&e.order.deliveryStatus==="訂單完成"}])},[s("i",{class:c(["fs-lg-2 fs-4 bi",{"bi-box-seam":t===1,"bi-truck":t===2,"bi-house-check":t===3,"bi-clipboard-check":t===4}])},null,2),s("p",Z,o(t===1?"待出貨":t===2?"運送中":t===3?"已抵達":"訂單完成"),1)],2)],2)),64))])]),s("div",$,[s("div",ss,[ts,e.order.cart?(l(),i("div",es,[s("ul",os,[(l(!0),i(m,null,f(e.order.cart.items,(t,x)=>(l(),i("li",{class:"col-12",key:x+756345},[s("div",rs,[s("div",ls,[s("div",is,[s("img",{src:t.product.imgUrl,class:"img-fluid object-fit-cover w-100",style:{height:"130px"}},null,8,ns)]),s("div",ds,[s("div",cs,[s("div",as,[s("h5",us,o(t.product.title),1),s("span",hs,"x "+o(r.numberComma(t.qty)),1)]),s("div",_s,[s("del",{class:c(["me-2 text-muted mt-1 fs-14",{"d-none":!t.product.isCheaper}])},"NT$ "+o(r.numberComma(t.product.originalPrice)),3),s("span",bs,[s("span",{class:c({"text-danger":t.product.isCheaper,"fw-bold":t.product.isCheaper})},"NT$ "+o(r.numberComma(t.product.price)),3),n(" / "+o(t.product.num)+o(t.product.unit),1)]),ps]),t.product.category!=="組合包"?(l(),i("p",ms,"小計：NT$ "+o(r.numberComma(t.product.price*t.qty))+" / "+o(r.numberComma(t.product.num*t.qty))+o(t.product.unit),1)):d("",!0),t.product.category==="組合包"?(l(),i("p",fs,"小計：NT$ "+o(r.numberComma(t.product.price*t.qty))+" / "+o(r.numberComma(t.qty))+"組",1)):d("",!0)])])])]),gs]))),128))]),s("table",ys,[s("thead",null,[s("tr",null,[xs,e.order.cart?(l(),i("th",vs,"NT$ "+o(r.numberComma(e.order.cart.total)),1)):d("",!0)])]),s("tbody",null,[s("tr",null,[s("td",null,[n("運費"),e.order.cart.total>=1e3?(l(),i("span",ws,"(滿千元免運)")):d("",!0)]),e.order.cart?(l(),i("td",ks,"NT$ "+o(e.order.cart.deliveryCharge),1)):d("",!0)]),e.order.cart.total+e.order.cart.deliveryCharge!==e.order.cart.finalTotal&&e.order.cart.coupon?(l(),i("tr",Ss,[Cs,s("td",Ts,"- NT$ "+o(r.numberComma(Math.ceil(e.order.cart.total*(e.order.cart.coupon.discount/100)))),1)])):d("",!0),s("tr",Ls,[Ns,s("td",Ws,"NT$ "+o(r.numberComma(e.order.cart.finalTotal)),1)])])])])):d("",!0)]),s("div",qs,[Vs,s("table",As,[s("thead",null,[s("tr",null,[Ds,s("th",zs,o(e.order.email),1)])]),s("tbody",null,[s("tr",null,[Bs,s("td",null,o(e.order.name),1)]),s("tr",null,[Os,s("td",null,o(e.order.phoneNum),1)]),s("tr",null,[Rs,s("td",null,o(e.order.address),1)]),js,s("tr",null,[Fs,s("td",null,o(e.order.message===""?"無":e.order.message),1)])])])])])])):d("",!0)}const Ks=V(A,[["render",Ms]]);export{Ks as default};
