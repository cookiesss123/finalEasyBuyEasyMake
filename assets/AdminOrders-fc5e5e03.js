import{m as x}from"./modalMixin-c1848f69.js";import{b as w,a as D}from"./runtime-dom.esm-bundler-bb3e8e23.js";import{_ as b,o as r,U as i,V as t,Y as c,a0 as s,$ as _,Z as f,a1 as p,a2 as m,W as O,r as v}from"./_plugin-vue_export-helper-cbb9d8af.js";import"./modal-838a1639.js";import"./_commonjsHelpers-042e6b4d.js";import"./base-component-5a126788.js";const{VITE_PATH:g}={VITE_PATH:"https://vue-final-dbjson-1aoj4rvyf-cookiesss123.vercel.app",BASE_URL:"/finalEasyMakeEasyBuy/",MODE:"production",DEV:!1,PROD:!0},E={data(){return{tempOrder:{}}},mixins:[x],props:["id","openModal","getOrders"],methods:{updateOrder(){this.$http.put(`${g}/orders/${this.tempOrder.id}`,this.tempOrder).then(e=>{console.log(e.data),this.getOrders(),this.hide()}).catch(e=>{console.log(e)})}},mounted(){},watch:{id(){this.id&&this.$http.get(`${g}/orders/${this.id}`).then(e=>{this.tempOrder=e.data,console.log(e.data,this.tempOrder,"暫存訂單"),this.show(),this.openModal("")}).catch(e=>{console.log(e)})}}},S={class:"modal fade",ref:"modal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},T={class:"modal-dialog modal-xl"},V={class:"modal-content"},A=t("div",{class:"modal-header bg-dark"},[t("h5",{class:"modal-title text-white",id:"exampleModalLabel"},[t("span",null,"編輯訂單內容")]),t("button",{type:"button",class:"btn-close btn-close-white","data-bs-dismiss":"modal","aria-label":"Close"})],-1),I={class:"modal-body"},C={class:"row"},P={class:"col-4"},L={class:"row gy-3"},B={class:"col-12"},H={class:"mb-0"},U={class:"col-12"},N=t("h3",null,"訂購人資訊",-1),j={class:"table table-borderless text-brown"},R=t("th",{class:"fw-normal"},[t("i",{class:"bi bi-envelope-fill"}),c(" 信箱")],-1),q={class:"fw-normal"},F=t("td",null,[t("i",{class:"bi bi-person-fill"}),c(" 收件人姓名")],-1),W=t("td",null,[t("i",{class:"bi bi-telephone-fill"}),c(" 收件人電話")],-1),Y=t("td",null,[t("i",{class:"bi bi-house-fill"}),c(" 收件人地址")],-1),Z=t("tr",null,[t("td",null,[t("i",{class:"bi bi-wallet-fill"}),c(" 付款方式")]),t("td",null,"貨到付款")],-1),z=t("td",null,[t("i",{class:"bi bi-chat-left-text-fill"}),c(" 留言")],-1),G={class:"col-8"},J={class:"row"},K={class:"col-12"},Q=t("h3",null,"訂單資訊",-1),X={class:"table table-borderless"},tt=t("th",{class:"fw-normal"},"訂單建立時間 ",-1),et={class:"fw-normal"},st=t("td",null,"運送狀態",-1),lt=t("option",{value:"待出貨"},"待出貨",-1),ot=t("option",{value:"運送中"},"運送中",-1),dt=t("option",{value:"待取貨"},"待取貨",-1),nt=t("option",{value:"訂單完成"},"訂單完成",-1),at=[lt,ot,dt,nt],rt=t("td",null,"付款金額",-1),it={key:0},ct=t("td",null,"付款狀態",-1),ht={class:"form-check"},ut=t("label",{class:"form-check-label",for:"paymentStatus"}," 是否付款 ",-1),_t=t("td",null,"付款時間",-1),pt={class:"col-12"},mt=t("h3",null,"選購商品",-1),bt={class:"table table-borderless text-brown"},yt={key:0},ft={class:"modal-footer"},Ot=t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"關閉",-1),vt=t("span",null,"確認編輯",-1),gt=[vt];function Mt(e,a,u,y,l,n){return r(),i("div",S,[t("div",T,[t("div",V,[A,t("div",I,[c(s()+" ",1),t("div",C,[t("div",P,[t("div",L,[t("div",B,[t("p",H,"編號（id）："+s(l.tempOrder.id),1)]),t("div",U,[N,t("table",j,[t("thead",null,[t("tr",null,[R,t("th",q,s(l.tempOrder.email),1)])]),t("tbody",null,[t("tr",null,[F,t("td",null,s(l.tempOrder.name),1)]),t("tr",null,[W,t("td",null,s(l.tempOrder.phoneNum),1)]),t("tr",null,[Y,t("td",null,s(l.tempOrder.address),1)]),Z,t("tr",null,[z,t("td",null,s(l.tempOrder.message),1)])])])])])]),t("div",G,[t("div",J,[t("div",K,[Q,t("table",X,[t("thead",null,[t("tr",null,[tt,t("th",et,s(new Date(l.tempOrder.creatAt).toLocaleDateString()),1)])]),t("tbody",null,[t("tr",null,[st,t("td",null,[_(t("select",{name:"",id:"",class:"form-select","onUpdate:modelValue":a[0]||(a[0]=d=>l.tempOrder.deliveryStatus=d)},at,512),[[w,l.tempOrder.deliveryStatus]])])]),t("tr",null,[rt,l.tempOrder.cart?(r(),i("td",it,"NT$ "+s(l.tempOrder.cart.finalTotal),1)):f("",!0)]),t("tr",null,[ct,t("td",null,[t("div",ht,[_(t("input",{class:"form-check-input",type:"checkbox",id:"paymentStatus","onUpdate:modelValue":a[1]||(a[1]=d=>l.tempOrder.paymentStatus=d)},null,512),[[D,l.tempOrder.paymentStatus]]),ut])])]),t("tr",null,[_t,t("td",null,s(l.tempOrder.payDate),1)])])])]),t("div",pt,[mt,t("table",bt,[l.tempOrder.cart?(r(),i("tbody",yt,[(r(!0),i(p,null,m(l.tempOrder.cart.items,d=>(r(),i("tr",{key:d+986},[t("td",null,s(d.product.title),1),t("td",null,"NT$ "+s(d.product.price),1),t("td",null,s(d.qty)+" 份",1)]))),128))])):f("",!0)])])])])])]),t("div",ft,[Ot,t("button",{type:"button",class:"btn btn-primary",onClick:a[2]||(a[2]=(...d)=>n.updateOrder&&n.updateOrder(...d))},gt)])])])],512)}const kt=b(E,[["render",Mt]]),{VITE_PATH:M}={VITE_PATH:"https://vue-final-dbjson-1aoj4rvyf-cookiesss123.vercel.app",BASE_URL:"/finalEasyMakeEasyBuy/",MODE:"production",DEV:!1,PROD:!0},xt={data(){return{tempOrder:{}}},mixins:[x],props:["id","openDeleteModal","getOrders"],methods:{deleteOrder(){this.$http.delete(`${M}/orders/${this.tempOrder.id}`).then(e=>{console.log(e.data),this.getOrders(),this.hide()}).catch(e=>{console.log(e)})}},watch:{id(){this.id&&(console.log(this.id,"改變了"),this.$http.get(`${M}/orders/${this.id}`).then(e=>{this.tempOrder=e.data,console.log(this.tempOrder),this.show(),this.openDeleteModal("")}).catch(e=>{console.log(e)}))}}},Dt={class:"modal fade",ref:"modal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},$t={class:"modal-dialog"},wt={class:"modal-content"},Et=t("div",{class:"modal-header bg-dark"},[t("h5",{class:"modal-title text-white",id:"exampleModalLabel"}," 刪除訂單 "),t("button",{type:"button",class:"btn-close btn-close-white","data-bs-dismiss":"modal","aria-label":"Close"})],-1),St={class:"modal-body"},Tt={class:"text-danger fw-bold"},Vt={class:"modal-footer"},At=t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"關閉",-1);function It(e,a,u,y,l,n){return r(),i("div",Dt,[t("div",$t,[t("div",wt,[Et,t("div",St,[t("p",null,[c("確定要刪除此筆訂單 "),t("span",Tt," 【"+s(l.tempOrder.id)+"】 ",1),c(" 嗎? ")])]),t("div",Vt,[At,t("button",{type:"button",class:"btn btn-danger",onClick:a[0]||(a[0]=(...d)=>n.deleteOrder&&n.deleteOrder(...d))}," 確認刪除 ")])])])],512)}const Ct=b(xt,[["render",It]]),{VITE_PATH:k}={VITE_PATH:"https://vue-final-dbjson-1aoj4rvyf-cookiesss123.vercel.app",BASE_URL:"/finalEasyMakeEasyBuy/",MODE:"production",DEV:!1,PROD:!0},Pt={components:{OrderModal:kt,DeleteOrderModal:Ct},data(){return{orders:[],orderId:"",orderDeleteId:""}},methods:{getOrders(){this.$http.get(`${k}/orders`).then(e=>{console.log(e.data),this.orders=e.data}).catch(e=>{console.log(e)})},openModal(e){this.orderId=e},openDeleteModal(e){this.orderDeleteId=e},updatePaymentStatus(e,a){this.$http.patch(`${k}/orders/${e}`,{paymentStatus:a}).then(u=>{console.log(u.data),this.getOrders()}).catch(u=>{console.log(u)})}},mounted(){this.getOrders()}},Lt={class:"container"},Bt={class:"table text-center mt-4",style:{"vertical-align":"middle"}},Ht=t("thead",null,[t("tr",null,[t("th",null,"訂單編號"),t("th",null,"購買時間"),t("th",null,"收貨人"),t("th",null,"信箱"),t("th",null,"購買產品"),t("th",null,"應付金額"),t("th",null,"訂單狀態"),t("th",null,"是否付款"),t("th",null,"編輯")])],-1),Ut={class:"form-check form-switch"},Nt=["onUpdate:modelValue","onChange"],jt={class:"form-check-label",for:"pay"},Rt={class:"btn-group"},qt=["onClick"],Ft=["onClick"];function Wt(e,a,u,y,l,n){const d=v("OrderModal"),$=v("DeleteOrderModal");return r(),i("div",Lt,[t("table",Bt,[Ht,t("tbody",null,[(r(!0),i(p,null,m(l.orders,o=>(r(),i("tr",{key:o.id+34564},[t("td",null,s(o.id),1),t("td",null,s(new Date(o.creatAt).toLocaleDateString()),1),t("td",null,s(o.name),1),t("td",null,s(o.email),1),t("td",null,[(r(!0),i(p,null,m(o.cart.items,h=>(r(),i("p",{key:h+366},s(h.product.title)+" x "+s(h.qty),1))),128))]),t("td",null,s(o.cart.finalTotal),1),t("td",null,s(o.deliveryStatus),1),t("td",null,[t("div",Ut,[_(t("input",{class:"form-check-input",type:"checkbox",role:"switch",id:"pay","onUpdate:modelValue":h=>o.paymentStatus=h,onChange:()=>n.updatePaymentStatus(o.id,o.paymentStatus)},null,40,Nt),[[D,o.paymentStatus]]),t("label",jt,s(o.paymentStatus?"已付款":"未付款"),1)])]),t("td",null,[t("div",Rt,[t("button",{type:"button",class:"btn btn-sm btn-outline-primary",onClick:h=>n.openModal(o.id)},"編輯",8,qt),t("button",{type:"button",class:"btn btn-sm btn-outline-danger",onClick:h=>n.openDeleteModal(o.id)},"刪除",8,Ft)])])]))),128))])]),O(d,{ref:"orderModal",id:l.orderId,"open-modal":n.openModal,"get-orders":n.getOrders},null,8,["id","open-modal","get-orders"]),O($,{ref:"deleteOrderModal",id:l.orderDeleteId,"get-orders":n.getOrders,"open-delete-modal":n.openDeleteModal},null,8,["id","get-orders","open-delete-modal"])])}const Qt=b(Pt,[["render",Wt]]);export{Qt as default};
