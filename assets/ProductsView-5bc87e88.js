import{l as N}from"./loadingStore-73c40ae8.js";import{R as V,f as g,m as f,h as x}from"./index-9f8e1fb0.js";import{c as P}from"./carts-18eb5781.js";import{m as R}from"./bookmark-53538cba.js";import{d as b}from"./mainData-f772ca38.js";import{n as q}from"./numberCommaMixin-e0aac39c.js";import{P as G}from"./PaginationComponent-737fcd4b.js";import{C as O}from"./collapse-56154a75.js";import{s as T}from"./publicData-f4e8600e.js";import{B as U}from"./BannerComponent-882e3d71.js";import{l as D,w as M,n as C,j as u}from"./runtime-dom.esm-bundler-eb0e3820.js";import{_ as j}from"./image5-4fc2427e.js";import{_ as E}from"./image4-1806383b.js";import{_ as H}from"./icon-cart-796adfb7.js";import{_ as F}from"./undraw_Page_not_found_re_e9o6-993b7155.js";import{b6 as I,av as _,aj as i,l as a,t as m,m as t,F as y,at as k,a3 as d,s as n,aJ as l,b3 as h,k as c,b1 as S}from"./_plugin-vue_export-helper-68081c38.js";import"./base-component-9dfae801.js";const K={components:{RouterLink:V,PaginationComponent:G,BannerComponent:U},data(){return{selections:T,priceOrRateCollapse:{},highOrLowCollapse:{},products:[],priceOrRate:"價格",highOrLow:"不拘",productSearchName:"",filterProducts:[],pageStatus:"全部",selectPage:"全部",search:!1}},mixins:[q],methods:{...g(P,["addCart","toastMessage"]),...g(R,["addBookmark","deleteBookmark","getBookmarks"]),...g(b,["getProducts","getRates"]),...g(N,["startLoading"]),async getData(){this.products=await this.getProducts(),this.products=Object.values(this.products),this.filterProducts=this.products,!this.$route.query.pageStatus&&this.$route.fullPath==="/products"?this.$refs.pagination.renderPage(1,this.filterProducts):this.$route.query.pageStatus&&this.searchProducts(),this.getBookmarks("productBookmarks")},searchProducts(){this.filterProducts.forEach((s,o)=>{this.rates[s.id]?this.filterProducts[o].averageRate=this.rates[s.id].averageRate:this.rates[s.id]||(this.filterProducts[o].averageRate=0)}),this.pageStatus==="全部"?this.filterProducts=this.products:this.pageStatus==="食材組合包"?this.filterProducts=this.products.filter(s=>s.category==="組合包"):this.pageStatus==="熱銷單品"?this.filterProducts=this.products.filter(s=>s.category==="單一產品"):this.pageStatus==="特價商品"&&(this.filterProducts=this.products.filter(s=>s.isCheaper===!0)),this.priceOrRate==="價格"&&this.highOrLow!=="不拘"?this.highOrLow==="低到高"?this.filterProducts=this.filterProducts.sort((s,o)=>s.price-o.price):this.highOrLow==="高到低"&&(this.filterProducts=this.filterProducts.sort((s,o)=>o.price-s.price)):this.priceOrRate==="評價"&&this.highOrLow!=="不拘"&&(this.highOrLow==="低到高"?this.filterProducts=this.filterProducts.sort((s,o)=>s.averageRate-o.averageRate):this.highOrLow==="高到低"&&(this.filterProducts=this.filterProducts.sort((s,o)=>o.averageRate-s.averageRate))),this.filterProducts=this.filterProducts.filter(s=>s.title.match(this.productSearchName)),this.search=!0,this.$refs.pagination.renderPage(1,this.filterProducts)},select(s){this.selectPage=s,this.productSearchName="",this.highOrLow="不拘"}},mounted(){this.startLoading(),this.priceOrRateCollapse=new O(this.$refs.priceOrRateCollapse,{toggle:!1,parent:"#myGroup"}),this.highOrLowCollapse=new O(this.$refs.highOrLowCollapse,{toggle:!1,parent:"#myGroup"}),this.$route.query.pageStatus&&(this.pageStatus=this.$route.query.pageStatus,this.selectPage=this.$route.query.pageStatus,this.priceOrRate=this.$route.query.valuePriceOrRate,this.highOrLow=this.$route.query.valueHighOrLow,this.productSearchName=this.$route.query.searchName),this.getRates(),this.getData()},watch:{selectPage(){this.pageStatus=this.selectPage,this.pageStatus==="全部"?this.filterProducts=this.products:this.pageStatus==="食材組合包"?this.filterProducts=this.products.filter(s=>s.category==="組合包"):this.pageStatus==="熱銷單品"?this.filterProducts=this.products.filter(s=>s.category==="單一產品"):this.pageStatus==="特價商品"&&(this.filterProducts=this.products.filter(s=>s.isCheaper===!0)),this.$refs.pagination.renderPage(1,this.filterProducts)},priceOrRate(){this.priceOrRateCollapse.hide()},highOrLow(){this.highOrLowCollapse.hide()},filterProducts(){this.priceOrRateCollapse.hide(),this.highOrLowCollapse.hide()}},computed:{...f(P,["loadingItem"]),...f(R,["productBookmarks","uid"]),...f(b,["rates"]),...x(b,["discount"])}},Y={class:"container","data-aos":"fade-up"},z={class:"pt-lg-4 pt-3 position-relative"},A={class:"category-selector row row-cols-4 list-unstyled border-bottom"},J=["onClick"],Q={class:"fs-12 fs-md-5 d-block pb-2"},W=t("br",{class:"d-lg-none"},null,-1),X={class:"d-none d-lg-block my-5"},Z={class:"input-group"},$=t("i",{class:"bi bi-caret-down-fill"},null,-1),ee={class:"ms-2 fw-bold"},te=t("i",{class:"bi bi-caret-down-fill"},null,-1),se={class:"ms-2 fw-bold"},oe=t("span",{class:"material-icons-outlined text-primary"},"search",-1),re=[oe],ie={class:"row g-0",id:"myGroup"},ae={class:"col-2"},le={ref:"priceOrRateCollapse",class:"collapse"},ne={class:"card card-body"},de={class:"btn-group-vertical",role:"group","aria-label":"Vertical radio toggle button group"},ce=t("label",{class:"btn btn-outline-primary",for:"selectprice"},"價格",-1),he=t("label",{class:"btn btn-outline-primary",for:"selectRate"},"評價",-1),pe={class:"col-2"},ue={ref:"highOrLowCollapse",class:"collapse"},ge={class:"card card-body"},me={class:"btn-group-vertical",role:"group","aria-label":"Vertical radio toggle button group"},fe=t("label",{class:"btn btn-outline-primary",for:"noDifference"},"不拘",-1),be=t("label",{class:"btn btn-outline-primary",for:"highToLow"},"高到低",-1),_e=t("label",{class:"btn btn-outline-primary",for:"lowToHigh"},"低到高",-1),ye={key:0,class:"row row-cols-xl-4 row-cols-lg-3 row-cols-2 gy-4"},ke={class:"card position-relative"},we={class:"card-img-hover position-relative"},ve=["src","alt"],Pe=t("p",{class:"detail position-absolute top-50 start-50 translate-middle fw-bold letter-spacing-5 link-darkBrown fs-xl-5 text-center"},[n("查看"),t("br",{class:"d-xl-none d-lg-block"}),n("商品資訊")],-1),Re={key:0,class:"fs-md-14 fs-12 text-white p-2 bg-primary position-absolute top-0 start-0"},Oe=["onClick"],Ce=t("img",{src:j,alt:"收藏按鈕-未收藏"},null,-1),Se=[Ce],Le=["onClick"],Be=t("img",{src:E,alt:"收藏按鈕-已收藏"},null,-1),Ne=[Be],Ve=["disabled","onClick"],xe=t("img",{src:H,alt:"購物車按鈕",class:"shadow-sm"},null,-1),qe=[xe],Ge={class:"fs-md-5 fs-6 fw-bold"},Te={class:"d-flex align-items-lg-center fs-md-6 fs-12"},Ue=t("i",{class:"bi bi-star-fill"},null,-1),De={key:1,class:"badge rounded-pill ms-auto border d-none d-md-block bg-whiteGray text-gray border-gray"},Me=t("i",{class:"bi bi-star-fill"},null,-1),je={class:"text-end mt-1 d-md-none fs-12"},Ee=t("i",{class:"bi bi-star-fill"},null,-1),He={key:1,class:"badge rounded-pill ms-auto border d-md-none bg-whiteGray text-gray border-gray"},Fe=t("i",{class:"bi bi-star-fill"},null,-1),Ie={key:1,class:"py-lg-4 text-center"},Ke=t("img",{src:F,class:"mb-lg-3 mb-2 img-md-200-sm-150",alt:"查無資訊"},null,-1),Ye=t("p",{class:"fs-lg-3 fs-6"},"查無商品，請您重新查詢",-1),ze=[Ke,Ye];function Ae(s,o,Je,Qe,r,p){const L=_("BannerComponent"),w=_("RouterLink"),B=_("PaginationComponent");return i(),a("div",null,[m(L),t("section",Y,[t("div",z,[t("ul",A,[(i(!0),a(y,null,k(r.selections.productCategory,e=>(i(),a("li",{key:e.icon,class:d(["col text-center",{"pointer-events-none":r.pageStatus===e.title}])},[t("a",{href:"#",onClick:C(()=>p.select(e.title),["prevent"]),class:d(["text-decoration-none d-inline-block",{"fw-bold":r.pageStatus===e.title,"link-primary":r.pageStatus===e.title}])},[r.pageStatus!==e.title?(i(),a("i",{key:0,class:d([e.icon,"text-gray"])},null,2)):c("",!0),r.pageStatus===e.title?(i(),a("i",{key:1,class:d([e.iconSelected,"text-primary"])},null,2)):c("",!0),t("span",Q,[n(l(e.title==="全部"?"所有":e.title.slice(0,2)),1),W,n(l(e.title==="全部"?"材料":e.title.slice(2,5)),1)])],10,J)],2))),128))]),t("div",{class:d(["blue-line bg-primary position-absolute",{"active-all-ingredient":r.pageStatus==="全部","active-package":r.pageStatus==="食材組合包","active-hot":r.pageStatus==="熱銷單品","active-sale":r.pageStatus==="特價商品"}])},null,2)]),t("div",X,[t("div",Z,[t("a",{class:"btn btn-outline-primary px-5",onClick:o[0]||(o[0]=()=>this.priceOrRateCollapse.toggle())},[n("篩選對象 "),$,t("span",ee,l(r.priceOrRate),1)]),t("button",{class:"btn btn-outline-primary px-5",type:"button",onClick:o[1]||(o[1]=()=>this.highOrLowCollapse.toggle())},[n("篩選值 "),te,t("span",se,l(r.highOrLow),1)]),h(t("input",{type:"search",class:"form-control border-primary border-end-0",placeholder:"請輸入食材名稱","aria-label":"Example text with two button addons","onUpdate:modelValue":o[2]||(o[2]=e=>r.productSearchName=e),onKeyup:o[3]||(o[3]=M((...e)=>p.searchProducts&&p.searchProducts(...e),["enter"]))},null,544),[[D,r.productSearchName]]),t("button",{type:"submit",class:"btn border border-primary border-start-0 bg-transparent d-flex",onClick:o[4]||(o[4]=C((...e)=>p.searchProducts&&p.searchProducts(...e),["prevent"]))},re)]),t("div",ie,[t("div",ae,[t("div",le,[t("div",ne,[t("div",de,[h(t("input",{type:"radio",class:"btn-check",value:"價格",name:"priceOrRate",id:"selectprice",autocomplete:"off","onUpdate:modelValue":o[5]||(o[5]=e=>r.priceOrRate=e)},null,512),[[u,r.priceOrRate]]),ce,h(t("input",{type:"radio",class:"btn-check",value:"評價",name:"priceOrRate",id:"selectRate",autocomplete:"off","onUpdate:modelValue":o[6]||(o[6]=e=>r.priceOrRate=e)},null,512),[[u,r.priceOrRate]]),he])])],512)]),t("div",pe,[t("div",ue,[t("div",ge,[t("div",me,[h(t("input",{type:"radio",class:"btn-check",value:"不拘",name:"highOrLow",id:"noDifference",autocomplete:"off",checked:"","onUpdate:modelValue":o[7]||(o[7]=e=>r.highOrLow=e)},null,512),[[u,r.highOrLow]]),fe,h(t("input",{type:"radio",class:"btn-check",value:"高到低",name:"highOrLow",id:"highToLow",autocomplete:"off","onUpdate:modelValue":o[8]||(o[8]=e=>r.highOrLow=e)},null,512),[[u,r.highOrLow]]),be,h(t("input",{type:"radio",class:"btn-check",value:"低到高",name:"highOrLow",id:"lowToHigh",autocomplete:"off","onUpdate:modelValue":o[9]||(o[9]=e=>r.highOrLow=e)},null,512),[[u,r.highOrLow]]),_e])])],512)])])]),r.filterProducts.length?(i(),a("div",ye,[(i(!0),a(y,null,k(this.$refs.pagination.pageProducts,e=>(i(),a("div",{class:"col",key:e.id},[t("div",ke,[t("div",we,[m(w,{to:`/products/${e.id}`},{default:S(()=>[t("img",{src:e.imgUrl,class:"object-fit-cover card-img",alt:e.title},null,8,ve),Pe,e.isCheaper?(i(),a("span",Re,l(s.discount(e))+" 折 ",1)):c("",!0)]),_:2},1032,["to"]),t("button",{type:"button",class:"position-absolute btn-bookmark border-0 bg-transparent top-0 end-0 m-2 m-md-3",onClick:()=>s.addBookmark("productBookmarks",e)},Se,8,Oe),(i(!0),a(y,null,k(s.productBookmarks,(We,v)=>(i(),a("div",{key:v},[v===e.id?(i(),a("button",{key:0,type:"button",class:"position-absolute btn-bookmark-delete border-0 bg-transparent top-0 end-0 m-2 m-md-3",onClick:()=>s.deleteBookmark("productBookmarks",e.id)},Ne,8,Le)):c("",!0)]))),128)),t("button",{disabled:s.loadingItem,onClick:()=>s.addCart(e),type:"button",class:"btn-buy border-0 bg-transparent m-2 m-md-3 p-0 position-absolute end-0 bottom-0"},qe,8,Ve)]),m(w,{to:`/products/${e.id}`,class:"card-body px-0 text-decoration-none link-darkBrown"},{default:S(()=>[t("h3",Ge,l(e.title),1),t("div",Te,[t("del",{class:d(["me-2 text-muted",{"d-none":!e.isCheaper}])},"NT$ "+l(s.numberComma(e.originalPrice)),3),t("span",{class:d(["me-1",{"text-danger":e.isCheaper,"fw-bold":e.isCheaper}])},"NT$ "+l(s.numberComma(e.price)),3),t("span",null," / "+l(e.num)+l(e.unit),1),s.rates[e.id]?(i(),a("span",{key:0,class:d(["badge rounded-pill ms-auto border d-none d-md-block",{"text-yellow":s.rates[e.id].averageRate,"border-yellow":s.rates[e.id].averageRate,"bg-lightYellow":s.rates[e.id].averageRate,"bg-whiteGray":!s.rates[e.id].averageRate,"text-gray":!s.rates[e.id].averageRate,"border-gray":!s.rates[e.id].averageRate}])},[n(l(s.rates[e.id].averageRate)+" ",1),Ue],2)):s.rates[e.id]?c("",!0):(i(),a("span",De,[n(" 0 "),Me]))]),t("div",je,[s.rates[e.id]?(i(),a("span",{key:0,class:d(["badge rounded-pill ms-auto border d-md-none",{"text-yellow":s.rates[e.id].averageRate,"border-yellow":s.rates[e.id].averageRate,"bg-lightYellow":s.rates[e.id].averageRate,"bg-whiteGray":!s.rates[e.id].averageRate,"text-gray":!s.rates[e.id].averageRate,"border-gray":!s.rates[e.id].averageRate}])},[n(l(s.rates[e.id].averageRate)+" ",1),Ee],2)):s.rates[e.id]?c("",!0):(i(),a("span",He,[n(" 0 "),Fe]))])]),_:2},1032,["to"])])]))),128))])):!r.filterProducts.length&&r.search?(i(),a("div",Ie,ze)):c("",!0),m(B,{ref:"pagination","price-or-rate":r.priceOrRate,"filter-products":r.filterProducts,class:"mb-5"},null,8,["price-or-rate","filter-products"])])])}const gt=I(K,[["render",Ae]]);export{gt as default};
